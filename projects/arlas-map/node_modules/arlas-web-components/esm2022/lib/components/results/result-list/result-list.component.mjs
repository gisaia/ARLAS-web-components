/*
 * Licensed to Gisaïa under one or more contributor
 * license agreements. See the NOTICE.txt file distributed with
 * this work for additional information regarding copyright
 * ownership. Gisaïa licenses this file to you under
 * the Apache License, Version 2.0 (the "License"); you may
 * not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
import { ChangeDetectorRef, Component, ElementRef, EventEmitter, HostListener, Input, IterableDiffers, ViewEncapsulation } from '@angular/core';
import { Output } from '@angular/core';
import { TranslateService } from '@ngx-translate/core';
import { ngxLoadingAnimationTypes } from 'ngx-loading-reloaded';
import { fromEvent, Subject } from 'rxjs';
import { debounceTime } from 'rxjs/operators';
import { ArlasColorService } from '../../../services/color.generator.service';
import { Column } from '../model/column';
import { Item } from '../model/item';
import { CellBackgroundStyleEnum } from '../utils/enumerations/cellBackgroundStyleEnum';
import { ModeEnum } from '../utils/enumerations/modeEnum';
import { PageEnum } from '../utils/enumerations/pageEnum';
import { SortEnum } from '../utils/enumerations/sortEnum';
import { ThumbnailFitEnum } from '../utils/enumerations/thumbnailFitEnum';
import { ResultListOptions, matchAndReplace } from '../utils/results.utils';
import { marker } from '@colsen1991/ngx-translate-extract-marker';
import { ResultlistNotifierService } from '../../../services/resultlist.notifier.service';
import * as i0 from "@angular/core";
import * as i1 from "../../../services/color.generator.service";
import * as i2 from "@ngx-translate/core";
import * as i3 from "../../../services/resultlist.notifier.service";
import * as i4 from "@angular/common";
import * as i5 from "@angular/material/icon";
import * as i6 from "@angular/material/button-toggle";
import * as i7 from "@angular/material/grid-list";
import * as i8 from "@angular/material/checkbox";
import * as i9 from "@angular/material/menu";
import * as i10 from "@angular/material/select";
import * as i11 from "@angular/material/core";
import * as i12 from "@angular/material/slide-toggle";
import * as i13 from "@angular/material/tooltip";
import * as i14 from "@angular/forms";
import * as i15 from "ngx-loading-reloaded";
import * as i16 from "../result-grid-tile/result-grid-tile.component";
import * as i17 from "../result-item/result-item.component";
import * as i18 from "../result-detailed-item/result-detailed-item.component";
import * as i19 from "../result-detailed-grid/result-detailed-grid.component";
import * as i20 from "../result-filter/result-filter.component";
import * as i21 from "../result-directive/result-scroll.directive";
/**
 * ResultList component allows to structure data in a filterable and sortable table.
 * Items can be represented as rows or grids and are multi-selectable.
 * For both list and grid modes, each item has detailed data that can be displayed in a togglable space.
 */
export class ResultListComponent {
    constructor(iterableRowsDiffer, iterableColumnsDiffer, el, colorService, translate, notifier, cdr) {
        this.el = el;
        this.colorService = colorService;
        this.translate = translate;
        this.notifier = notifier;
        this.cdr = cdr;
        /**
         * @constant
         */
        this.GEO_DISTANCE = 'geodistance';
        /**
         * @constant
         */
        this.FILTER_ON = marker('Filter on');
        /**
         * @constant
         */
        this.GLOBAL_ACTIONS = marker('Global actions');
        /**
         * @constant
         */
        this.GEOSORT_ACTION = marker('Geo sort action');
        /**
         * @constant
         */
        this.GRID_MODE = marker('Grid mode');
        /**
         * @constant
         */
        this.LIST_MODE = marker('List mode');
        /**
         * @constant
         */
        this.CONTAIN_FIT = marker('Fit the whole thumbnail to the tile');
        /**
         * @constant
         */
        this.WIDTH_FIT = marker('Fit the thumbnail\'s width to the tile');
        /**
         * @constant
         */
        this.HEIGHT_FIT = marker('Fit the thumbnail\'s height to the tile');
        /**
         * @constant
         */
        this.GEOSORT_BUTTON = marker('Geo-sort');
        /**
         * @constant
         */
        this.COLUMN_ACTIONS_HEIGHT = 52;
        /**
         * @constant
         */
        this.COLUMN_NAME_HEIGHT = 27;
        /**
         * @constant
         */
        this.FILTERS_HEIGHT = 50;
        /**
         * @constant
         */
        this.TAIL_HEIGHT = 30;
        this.loadAnimationConfig = {
            animationType: ngxLoadingAnimationTypes.threeBounce, backdropBackgroundColour: 'rgba(100,100,100,0.5)',
            backdropBorderRadius: '0', primaryColour: '#ffffff', secondaryColour: '#ffffff', tertiaryColour: '#ffffff'
        };
        this.scrollOptions = { maintainScrollUpPosition: true, maintainScrollDownPosition: true, nbLines: 0 };
        this.fetchState = { endListUp: true, endListDown: false };
        /**
         * @Input : Angular
         * @description The table width. If not specified, the tableWidth value is
         * equal to container width.
         */
        this.tableWidth = null;
        /**
         * @Input : Angular
         * @description The number of items left on the list/grid when scrolling up or down upon which loading new data is triggered.
         * When scrolling up or down, once there is `nbLinesBeforeFetch` items left at the top or bottom of the list, previous/next
         * data is loaded.
        */
        this.nbLinesBeforeFetch = 5;
        /**
         * @Input : Angular
         * @description Height of the detail grid div (Grid Mode).
         */
        this.detailedGridHeight = 300;
        /**
         * @Input : Angular
         * @description Number of grid columns (Grid Mode).
         */
        this.nbGridColumns = 4;
        /**
         * @Input : Angular
         * @description List of actions to apply on the selected items.
         */
        this.globalActionsList = new Array();
        /**
         * @Input : Angular
         * @description A detailed-data-retriever object that implements
         * DetailedDataRetriever interface.
         */
        this.detailedDataRetriever = null;
        /**
         * @Input : Angular
         * @description List of items ids that are in a indeterminated status.
         */
        this.indeterminatedItems = new Set();
        /**
         * @Input : Angular
         * @description List of items ids that are in a selected status.
        */
        this.selectedItems = new Set();
        /**
         * @Input : Angular
         * @description Map <itemId, Set<actionIds>> : for each item, gives the list of activated actions.
        */
        this.activatedActionsPerItem = new Map();
        /**
         * @Input : Angular
         * @description List of items ids to be highlighted.
         */
        this.highlightItems = new Set();
        /**
         * @Input : Angular
         * @description Whether filters on list are displayed.
         */
        this.displayFilters = true;
        /**
         * @Input : Angular
         * @description Whether the sort on the geometry is enabled.
         */
        this.isGeoSortEnabled = false;
        /**
         * @Input : Angular
         * @description Whether the sort on the geometry is activated
         */
        this.isGeoSortActivated = false;
        /**
         * @Input : Angular
         * @description A  boolean to show or hide thead of table
         */
        this.displayThead = true;
        /**
         * @Input : Angular
         * @description Knowing that saturation scale is [0, 1], `colorsSaturationWeight` is a
         * factor (between 0 and 1) that tightens this scale to [(1-colorsSaturationWeight), 1].
         * Therefore saturation of generated colors will be within this tightened scale..
         */
        this.colorsSaturationWeight = 1 / 2;
        /**
         * @Input : Angular
         * @description Whether to allow colorizing cells and the grid tile of the list.
         */
        this.useColorService = false;
        /**
         * @Input : Angular
          * @description The way the cell will be colorized: filled or outlined
         */
        this.cellBackgroundStyle = CellBackgroundStyleEnum.filled;
        /**
         * @Input
         * @description Whether display group with no detail.
         */
        this.showEmptyGroup = false;
        /**
         * @Input
         * @description Whether display the detailled part in grid mode.
         */
        this.isDetailledGridOpen = false;
        /**
         * @Input
         * @description How to fit the thumbnail to the tile:
         * - `height` fit the height of the thumbnail.
         * - `width` fit the width of the thumbnail.
         * - `contain` fit the wholethumbnail.
         */
        this.thumbnailFit = ThumbnailFitEnum.contain;
        /**
         * @Output : Angular
         * @description Emits the event of sorting data on the specified column.
         */
        this.sortColumnEvent = new Subject();
        /**
         * @Output : Angular
         * @description Emits the event of geo-sorting data.
         */
        this.geoSortEvent = new Subject();
        /**
         * @Output : Angular
         * @description Emits the event of geo-sorting data.
         */
        this.geoAutoSortEvent = new Subject();
        /**
         * @Output : Angular
         * @description Emits the list of items identifiers whose checkboxes are selected.
         */
        this.selectedItemsEvent = new Subject();
        /**
         * @Output : Angular
         * @description Emits one item identifier that is hovered..
         */
        this.consultedItemEvent = new Subject();
        /**
         * @Output : Angular
         * @description Emits the item that is clicked on.
         */
        this.clickOnItemEvent = new Subject();
        /**
         * @Output : Angular
         * @description Emits the filtred fields map (fieldName-fieldValue map).
         */
        this.setFiltersEvent = new Subject();
        /**
         * @Output : Angular
         * @description Emits the request of more data to load. The emitted number is the number of times this event has been emitted.
         * @deprecated moreDataEvent can be replaced by `paginationEvent`
         */
        this.moreDataEvent = new Subject();
        /**
         * @Output : Angular
         * @description Emits the request of a new page to load.
         * The emitted PageQuery contains the reference item from which the new page is loaded
         * and whether it is the previous or the next page.
         */
        this.paginationEvent = new Subject();
        /**
         * @Output : Angular
         * @description Emits the event of applying the specified action on the specified item.
         */
        this.actionOnItemEvent = new Subject();
        /**
         * @Output : Angular
         * @description Emits the event of applying the specified globalb action on the selected items.
         */
        this.globalActionEvent = new Subject();
        /**
         * @Output : Angular
         * @description Emits the event of applying the specified global action on the selected items.
         */
        this.columnFilterChanged = new Subject();
        /**
         * @Output : Angular
         * @description Emits the event of clicking on a grid tile.
         */
        this.clickOnTile = new Subject();
        /**
         * @Output : Angular
         * @description Emits the event of clicking on the switch mode button. Emits the new mode (grid or list).
         */
        this.changeResultMode = new Subject();
        /**
         * @Output : Angular
         * @description Emits the current visible items in the viewport.
         */
        this.visibleItems = new Subject();
        /**
        * @Output : Angular
        * @description Emits on changes rowItemList current value.
        */
        this.onChangeItems = new Subject();
        /**
         * @Output : Angular
         * @description Emits when changing how thumbnails fit in their div.
         */
        this.thumbnailFitEvent = new Subject();
        /**
         * @Output : Angular
         * @description Emits when result list is updated.
         */
        this.onResultListUpdate = new EventEmitter();
        /**
         * @Output : Angular
         * @description Emits when the list is ready.
         */
        this.onListLoaded = new EventEmitter();
        this.items = new Array();
        this.sortedColumn = { columnName: '', fieldName: '', sortDirection: SortEnum.asc };
        // Heights of table elements
        this.tbodyHeight = null;
        this.theadHeight = null;
        this.ModeEnum = ModeEnum;
        this.ThumbnailFitEnum = ThumbnailFitEnum;
        this.PageEnum = PageEnum;
        this.SortEnum = SortEnum;
        this.isNextPageRequested = false;
        this.isPreviousPageRequested = false;
        this.hasGridMode = false;
        this.allItemsChecked = false;
        this.borderStyle = 'solid';
        this.displayListGrid = 'inline';
        this.isShiftDown = false;
        this.debouncer = new Subject();
        this.scrollDebouncer = new Subject();
        this.emitVisibleItemsDebouncer = new Subject();
        this.iterableRowsDiffer = iterableRowsDiffer.find([]).create(null);
        this.iterableColumnsDiffer = iterableColumnsDiffer.find([]).create(null);
        // Resize the table height on window resize
        fromEvent(window, 'resize')
            .pipe(debounceTime(500))
            .subscribe((event) => {
            this.setTableHeight();
        });
        // Add debounce on hover item list
        this.debouncer.pipe(debounceTime(500)).subscribe(elementidentifier => this.consultedItemEvent.next(elementidentifier));
        this.scrollDebouncer.pipe(debounceTime(1000)).subscribe(page => this.paginationEvent.next(page));
        this.emitVisibleItemsDebouncer.pipe(debounceTime(1000)).subscribe(event => this.visibleItems.next(event));
    }
    shiftDown(_) {
        this.isShiftDown = true;
    }
    shiftUp(event) {
        this.isShiftDown = false;
    }
    ngOnInit() {
        this.resultMode = (this.defautMode && (this.defautMode.toString() === 'grid' ||
            this.defautMode.toString() === ModeEnum.grid.toString())) ? ModeEnum.grid : ModeEnum.list;
        this.options = Object.assign(new ResultListOptions(), this.options);
        if (!!this.fieldsConfiguration) {
            if (this.fieldsConfiguration.urlThumbnailTemplate !== undefined) {
                this.hasGridMode = true;
            }
        }
    }
    ngAfterViewInit() {
        this.onListLoaded.next(true);
        this.setTableWidth();
        this.setTableHeight();
    }
    emitThumbnailsFitStatus(fitChange) {
        this.thumbnailFit = ThumbnailFitEnum[fitChange.value];
        this.thumbnailFitEvent.next(this.thumbnailFit);
    }
    ngOnChanges(changes) {
        if (changes['defautMode'] !== undefined) {
            if (this.defautMode.toString() === 'grid' || this.defautMode.toString() === ModeEnum.grid.toString()) {
                this.resultMode = ModeEnum.grid;
                this.displayListGrid = 'block';
            }
            else {
                this.resultMode = ModeEnum.list;
                this.displayListGrid = 'inline';
            }
            this.setTableHeight();
        }
        if (changes['rowItemList'] !== undefined) {
            this.items = [];
            // Reset selected items when data change (ie a filter is applied/removed or pagination occur)
            this.selectedItems = new Set();
            this.isPreviousPageRequested = false;
            // If the selected item is not in the current list of items, close the detail
            const selectedItemInData = !!this.selectedGridItem && this.rowItemList
                .map(item => item.get(this.fieldsConfiguration.idFieldName))
                .includes(this.selectedGridItem.identifier);
            if (!(!!changes['rowItemList'].currentValue && selectedItemInData)) {
                this.closeDetail(true);
            }
            this.onChangeItems.next(changes['rowItemList'].currentValue);
        }
        if (changes['isDetailledGridOpen'] !== undefined) {
            this.isDetailledGridOpen = changes['isDetailledGridOpen'].currentValue;
        }
        if (changes['indeterminatedItems'] !== undefined) {
            this.items.forEach(item => {
                item.isindeterminated = false;
                this.indeterminatedItems.forEach(id => {
                    if (item.identifier === id && !this.selectedItems.has(id)) {
                        item.isindeterminated = true;
                    }
                });
            });
        }
        if (changes['selectedItems'] !== undefined) {
            this.items.forEach(item => {
                item.isChecked = false;
                this.selectedItems.forEach(id => {
                    if (item.identifier === id) {
                        item.isChecked = true;
                    }
                });
            });
            this.setSelectedItems(this.selectedItems);
        }
        if (changes['highlightItems'] !== undefined) {
            if (this.highlightItems.size > 0) {
                this.items.forEach(item => {
                    if (this.highlightItems.has(item.identifier)) {
                        item.ishighLight = true;
                    }
                    else {
                        item.ishighLight = false;
                    }
                });
            }
            else {
                this.items.forEach(item => {
                    item.ishighLight = undefined;
                });
            }
        }
        if (changes['fetchState'] !== undefined) {
            if (this.fetchState && this.fetchState.endListUp) {
                this.isPreviousPageRequested = false;
            }
            if (this.fetchState && this.fetchState.endListDown) {
                this.isNextPageRequested = false;
            }
        }
        if (changes['currentSortedColumn'] !== undefined && changes['currentSortedColumn'].currentValue) {
            this.sortedColumn = {
                columnName: changes['currentSortedColumn'].currentValue.columnName,
                fieldName: changes['currentSortedColumn'].currentValue.fieldName,
                sortDirection: changes['currentSortedColumn'].currentValue.sortDirection
            };
        }
    }
    ngDoCheck() {
        const columnChanges = this.iterableColumnsDiffer.diff(this.fieldsList);
        const itemChanges = this.iterableRowsDiffer.diff(this.rowItemList);
        if (columnChanges) {
            this.setColumns();
        }
        if (itemChanges) {
            let itemIndex = 0;
            itemChanges.forEachAddedItem(i => {
                this.onAddItems(i.item, this.isPreviousPageRequested, itemIndex);
                itemIndex++;
            });
            itemChanges.forEachRemovedItem(i => {
                if (this.isNextPageRequested) {
                    this.items.splice(0, 1);
                }
                else if (this.isPreviousPageRequested) {
                    this.items.splice(this.items.length - 1, 1);
                }
            });
            /**
             * This variable notifies the ResultScrollDirective whether the end of list is reached at top or bottom
             */
            if (this.isPreviousPageRequested) {
                /**
                 * This variable is set and given as an input to the `ResultScrollDirective`.
                 * The objective of this input is to inform `ResultScrollDirective` that it should
                 * maintain the Scroll Position when Adding Content to the top of the list
                 */
                this.scrollOptions = { maintainScrollUpPosition: true, maintainScrollDownPosition: false, nbLines: itemIndex };
            }
            if (this.isNextPageRequested) {
                /**
                 * This variable is set and given as an input to the `ResultScrollDirective`.
                 * The objective of this input is to inform `ResultScrollDirective` that it should
                 * maintain the Scroll Position when Adding Content to the bottom of the list
                 */
                this.scrollOptions = { maintainScrollUpPosition: false, maintainScrollDownPosition: true, nbLines: itemIndex };
            }
            this.setSelectedItems(this.selectedItems);
            this.isNextPageRequested = false;
            this.isPreviousPageRequested = false;
            this.onResultListUpdate.emit(true);
        }
    }
    emitVisibleItems(items) {
        this.emitVisibleItemsDebouncer.next(items);
    }
    /**
     * @description Emits the event of asking for next or previous page of items
     * @param referenceIdentifier : item identifier used as reference to fetch the next/previous page
     * @param whichPage : Whether to fetch the `next` or `previous` page
     */
    paginate(itemData, whichPage) {
        this.isNextPageRequested = whichPage === PageEnum.next;
        this.isPreviousPageRequested = whichPage === PageEnum.previous;
        this.scrollDebouncer.next({ reference: itemData, whichPage: whichPage });
    }
    /**
     * @description Emits which action to apply on which item/product
     */
    triggerActionOnItem(actionOnItem) {
        this.actionOnItemEvent.next(actionOnItem);
    }
    /**
     * @description Sets and emits the action to apply to all selected items
     */
    setGlobalAction(action) {
        this.globalActionEvent.next(action);
    }
    setGeoSortAction() {
        if (!this.isGeoSortActivated) {
            this.geoSort();
        }
        this.isGeoSortActivated = !this.isGeoSortActivated;
        this.geoAutoSortEvent.next(this.isGeoSortActivated);
    }
    /**
     * @description Sets and emits the [fieldName, filterValue] map of filtered fields
     */
    // Emits a map of only filtered fields
    setFilters(filtersMap) {
        this.filtersMap = filtersMap;
        this.setFiltersEvent.next(this.filtersMap);
    }
    /**
     * @description Sets and emits the identifiers list of selected items
     */
    setSelectedItems(selectedItems, stopPropagation) {
        // remove all text selection on current document
        // SB : Sometime blinking append, need to be deepened
        document.getSelection().removeAllRanges();
        this.selectedItems = selectedItems;
        if (selectedItems.size < this.items.length) {
            this.allItemsChecked = false;
        }
        else if (this.items.length !== 0) {
            this.allItemsChecked = this.items.filter(i => i.isChecked).length === this.items.length;
        }
        this.selectedItemsEvent.next(Array.from(this.selectedItems));
        if (this.isShiftDown && this.selectedItems.size > 1 && !stopPropagation) {
            this.selectInBetween();
        }
    }
    /**
     * @description Emits the column to sort on and the sort direction
     */
    sort(paramSortedColumn) {
        this.isGeoSortActivated = false;
        paramSortedColumn.sortDirection = this.sortedColumn.sortDirection;
        this.columns.forEach(column => {
            if (column.fieldName !== paramSortedColumn.fieldName) {
                column.sortDirection = SortEnum.none;
            }
        });
        this.sortColumnEvent.next(paramSortedColumn);
        // Reset direction to ASC after a clean
        if (this.sortedColumn.sortDirection === SortEnum.none) {
            this.sortedColumn.sortDirection = SortEnum.asc;
        }
    }
    setDirection(event) {
        event.stopPropagation();
        if (this.sortedColumn.sortDirection === SortEnum.asc) {
            this.sortedColumn.sortDirection = SortEnum.desc;
        }
        else {
            this.sortedColumn.sortDirection = SortEnum.asc;
        }
        this.sort(this.sortedColumn);
    }
    setSortedColumn(event) {
        if (event.value) {
            this.sortedColumn = {
                columnName: event.value.columnName,
                fieldName: event.value.fieldName,
                sortDirection: this.sortedColumn?.sortDirection ?? SortEnum.none
            };
        }
        else {
            this.sortedColumn = {
                columnName: '',
                fieldName: '',
                sortDirection: SortEnum.none
            };
        }
        this.sort(this.sortedColumn);
    }
    /**
     * @description Emits the request event of geo-sorting
     */
    geoSort() {
        this.columns.forEach(column => {
            if (!column.isIdField) {
                column.sortDirection = SortEnum.none;
            }
        });
        // Reset column filter when geo sort request
        this.sortedColumn = null;
        this.currentSortedColumn = null;
        this.geoSortEvent.next(this.GEO_DISTANCE);
    }
    /**
     * @description Sets and emits the hovered item's identifier
     */
    setConsultedItem(identifier) {
        const elementidentifier = {
            idFieldName: this.fieldsConfiguration.idFieldName,
            idValue: identifier
        };
        this.debouncer.next(elementidentifier);
    }
    /**
     * @description called on hovering an item : its sets the items actions + emits the item's identifier
     * @param item hovered item
     */
    onEnterItem(item) {
        this.setConsultedItem(item.identifier);
        this.notifier.notifyItemHover(item);
    }
    /**
     * @description called on leaving an item : emits the item's identifier
     * @param item item previously hovered
     */
    onLeaveItem(item) {
        this.setConsultedItem('leave-' + item.identifier);
    }
    /**
     * @description Called when item is clicked. It is instant compared to other events
     * @param item Item clicked on
     */
    onClickItem(item) {
        const elementidentifier = {
            idFieldName: this.fieldsConfiguration.idFieldName,
            idValue: item.identifier
        };
        this.clickOnItemEvent.next(elementidentifier);
    }
    /**
     * @description Sets the border style of rows
     */
    setBorderStyle(borderStyle) {
        this.borderStyle = borderStyle;
    }
    /**
     * @description Sets the selected grid item
     */
    setSelectedGridItem(item) {
        this.selectedGridItem = item;
        this.isDetailledGridOpen = true;
        this.setTableHeight();
        this.clickOnTile.next(item);
    }
    closeDetail(isClosed) {
        if (isClosed) {
            this.isDetailledGridOpen = false;
            this.setTableHeight();
        }
    }
    /**
     * @description Sets the display style according to the mode
     */
    whichMode(toggleChangeEvent) {
        if (toggleChangeEvent.value === ModeEnum.grid.toString()) {
            this.resultMode = ModeEnum.grid;
            this.displayListGrid = 'block';
        }
        else {
            this.resultMode = ModeEnum.list;
            this.displayListGrid = 'inline';
        }
        this.changeResultMode.next(this.resultMode);
        this.setTableHeight();
    }
    /**
     * @description Selects all the items
     */
    selectAllItems() {
        this.allItemsChecked = !this.allItemsChecked;
        this.selectedItems = new Set();
        this.items.forEach(item => {
            item.isChecked = this.allItemsChecked;
            item.isindeterminated = false;
            if (this.allItemsChecked) {
                this.selectedItems.add(item.identifier);
            }
        });
        this.setSelectedItems(this.selectedItems);
    }
    /**
     * @description Selects all the items between the farest and nearest selected items
     */
    selectInBetween() {
        const selectedItemsList = new Array();
        this.items.forEach(i => {
            if (this.selectedItems.has(i.identifier)) {
                selectedItemsList.push(i);
            }
        });
        if (selectedItemsList.length > 0) {
            const firstItem = selectedItemsList[0];
            const lastItem = selectedItemsList[selectedItemsList.length - 1];
            let inBetween = false;
            this.items.forEach(item => {
                if (item === firstItem) {
                    inBetween = true;
                }
                if (item === lastItem) {
                    inBetween = false;
                }
                if (inBetween) {
                    item.isChecked = true;
                    item.isindeterminated = false;
                    this.selectedItems.add(item.identifier);
                }
            });
            this.setSelectedItems(this.selectedItems, true);
        }
    }
    /**
     * @description Emits the column when a filter is addedd
     */
    columnChanged(colum) {
        this.columnFilterChanged.next(colum);
    }
    /**
     * @description Clear set of selection
     */
    clearSelection() {
        this.setSelectedItems(new Set());
        this.items.forEach(item => {
            item.isChecked = false;
            item.isindeterminated = false;
        });
    }
    byFieldName(item1, item2) {
        return item1 && item2 ? item1.fieldName === item2.fieldName : item1 === item2;
    }
    // Build the table's columns
    setColumns() {
        this.columns = new Array();
        const checkboxColumnWidth = 25;
        const toggleColumnWidth = 35;
        // id column is the first one and has a pre fixed width
        // It is the column where checkboxes are put
        const idColumn = new Column('', this.fieldsConfiguration.idFieldName, '');
        idColumn.isIdField = true;
        idColumn.width = checkboxColumnWidth;
        this.columns.unshift(idColumn);
        this.fieldsList.forEach(field => {
            const column = new Column(field.columnName, field.fieldName, field.dataType);
            column.width = (this.tableWidth - checkboxColumnWidth - toggleColumnWidth) / this.fieldsList.length;
            column.useColorService = field.useColorService ? field.useColorService : false;
            this.columns.push(column);
        });
        // add a column for toggle icon
        const toggleColumn = new Column('', 'toggle', '');
        toggleColumn.isToggleField = true;
        toggleColumn.width = toggleColumnWidth;
        this.columns.push(toggleColumn);
    }
    onAddItems(itemData, addOnTop, index) {
        const item = new Item(this.columns, itemData);
        item.identifier = itemData.get(this.fieldsConfiguration.idFieldName);
        if (this.fieldsConfiguration.titleFieldNames) {
            item.title = this.fieldsConfiguration.titleFieldNames
                .map(field => itemData.get(field.fieldPath + '_title'))
                .join(' ');
            if (item.title) {
                item.title = item.title.trim();
            }
        }
        if (this.useColorService && this.fieldsConfiguration.iconColorFieldName) {
            const colorFieldValue = itemData.get(this.fieldsConfiguration.iconColorFieldName + '_title');
            if (colorFieldValue) {
                item.color = this.colorService.getColor(colorFieldValue, this.keysToColors, this.colorsSaturationWeight);
            }
        }
        if (this.fieldsConfiguration.tooltipFieldNames) {
            item.tooltip = this.fieldsConfiguration.tooltipFieldNames
                .map(field => itemData.get(field.fieldPath + '_tooltip'))
                .join(' ');
            if (item.tooltip) {
                item.tooltip = item.tooltip.trim();
            }
        }
        if (this.fieldsConfiguration.icon) {
            item.icon = this.fieldsConfiguration.icon;
        }
        if (this.fieldsConfiguration.iconCssClass) {
            item.iconCssClass = itemData.get(this.fieldsConfiguration.iconCssClass);
            if (item.iconCssClass) {
                item.iconCssClass = item.iconCssClass.trim();
            }
        }
        item.imageEnabled = itemData.get('imageEnabled') === 'true';
        item.thumbnailEnabled = itemData.get('thumbnailEnabled') === 'true';
        item.detailsTitleEnabled = itemData.get('detailsTitleEnabled') === 'true';
        /** Retro-compatibility code */
        if (item.imageEnabled && this.fieldsConfiguration.urlImageTemplate) {
            item.urlImages = new Array();
            item.urlImages.push(matchAndReplace(itemData, this.fieldsConfiguration.urlImageTemplate));
        }
        /** End of retro-compatibility code */
        if (item.imageEnabled && this.fieldsConfiguration.urlImageTemplates && this.fieldsConfiguration.urlImageTemplates.length > 0) {
            item.urlImages = new Array();
            item.descriptions = new Array();
            this.fieldsConfiguration.urlImageTemplates.forEach(descUrl => {
                let condition = !descUrl.filter;
                if (descUrl.filter) {
                    const data = itemData.get(descUrl.filter.field);
                    if (Array.isArray(data)) {
                        condition = data.some(v => descUrl.filter.values.includes(v));
                    }
                    else if (data) {
                        condition = descUrl.filter.values.includes(data.toString());
                    }
                    else {
                        condition = false;
                    }
                }
                if (condition) {
                    item.urlImages.push(matchAndReplace(itemData, descUrl.url));
                    item.descriptions.push(matchAndReplace(itemData, descUrl.description));
                }
            });
        }
        if (item.thumbnailEnabled && this.fieldsConfiguration.urlThumbnailTemplate) {
            item.urlThumbnail = matchAndReplace(itemData, this.fieldsConfiguration.urlThumbnailTemplate);
        }
        if (item.detailsTitleEnabled && this.fieldsConfiguration.detailsTitleTemplate) {
            item.detailsTitle = matchAndReplace(itemData, this.fieldsConfiguration.detailsTitleTemplate);
        }
        item.position = this.items.length + 1;
        item.ishighLight = undefined;
        // When new data is loaded, check the one that were already checked +
        // remove the no longuer existing data from selectedItems (thanks to actualSelectedItems)
        if (this.allItemsChecked && (this.isNextPageRequested || this.isPreviousPageRequested)) {
            item.isChecked = true;
            this.selectedItems.add(item.identifier);
        }
        else {
            if (this.selectedItems.has(item.identifier)) {
                item.isChecked = true;
            }
            if (this.indeterminatedItems.has(item.identifier)) {
                item.isindeterminated = true;
            }
            else {
                item.isindeterminated = false;
            }
        }
        if (addOnTop) {
            this.items.splice(index, 0, item);
        }
        else {
            this.items.push(item);
        }
    }
    setTableWidth() {
        if (this.tableWidth === null) {
            const nativeElement = this.el.nativeElement;
            if (nativeElement.childNodes && nativeElement.childNodes.length > 0 && nativeElement.childNodes[0]) {
                this.tableWidth = this.el.nativeElement.childNodes[0].offsetWidth;
            }
        }
    }
    /**
     * @description Sets the table head and body height
     */
    setTableHeight(nbTrials = 0) {
        const tableElement = this.el.nativeElement.parentElement;
        if (!!tableElement && tableElement.getBoundingClientRect().height !== 0) {
            this.theadHeight = this.COLUMN_ACTIONS_HEIGHT +
                // Only in list mode
                this.COLUMN_NAME_HEIGHT * (this.resultMode === ModeEnum.list ? 1 : 0) +
                // Only if filters are present
                this.FILTERS_HEIGHT * (this.displayFilters ? 1 : 0);
            this.tbodyHeight = tableElement.getBoundingClientRect().height - this.theadHeight -
                // Only if the list is in grid mode
                this.TAIL_HEIGHT * (this.resultMode === ModeEnum.grid ? 1 : 0) -
                // Only if the list is in grid mode and has an element selected
                this.detailedGridHeight * (this.resultMode === ModeEnum.grid ? 1 : 0) * (this.isDetailledGridOpen ? 1 : 0);
            this.cdr.detectChanges();
        }
        else {
            // If the container has no height then try again for up to 10 times
            // Because of an issue with the DOM not loading properly the parent container, its height can be detected to be 0,
            // even with a preset height. Multiple tiemout values were tested, but they don't have an impact on this behavior.
            if (nbTrials < 10) {
                setTimeout(() => this.setTableHeight(nbTrials + 1), 0);
            }
            else {
                console.error('Failed to load the result list\'s height in less than 10 trials.' +
                    'Try to limit the element visibility to when it is really on screen to avoid this issue.');
            }
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: ResultListComponent, deps: [{ token: i0.IterableDiffers }, { token: i0.IterableDiffers }, { token: i0.ElementRef }, { token: i1.ArlasColorService }, { token: i2.TranslateService }, { token: i3.ResultlistNotifierService }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.13", type: ResultListComponent, selector: "arlas-result-list", inputs: { options: "options", fetchState: "fetchState", fieldsList: "fieldsList", rowItemList: "rowItemList", fieldsConfiguration: "fieldsConfiguration", tableWidth: "tableWidth", nLastLines: "nLastLines", nbLinesBeforeFetch: "nbLinesBeforeFetch", detailedGridHeight: "detailedGridHeight", nbGridColumns: "nbGridColumns", globalActionsList: "globalActionsList", detailedDataRetriever: "detailedDataRetriever", indeterminatedItems: "indeterminatedItems", selectedItems: "selectedItems", activatedActionsPerItem: "activatedActionsPerItem", highlightItems: "highlightItems", defautMode: "defautMode", isBodyHidden: "isBodyHidden", displayFilters: "displayFilters", isGeoSortEnabled: "isGeoSortEnabled", isGeoSortActivated: "isGeoSortActivated", currentSortedColumn: "currentSortedColumn", filtersMap: "filtersMap", dropDownMapValues: "dropDownMapValues", displayThead: "displayThead", keysToColors: "keysToColors", colorsSaturationWeight: "colorsSaturationWeight", useColorService: "useColorService", cellBackgroundStyle: "cellBackgroundStyle", selectedGridItem: "selectedGridItem", showEmptyGroup: "showEmptyGroup", isDetailledGridOpen: "isDetailledGridOpen", thumbnailFit: "thumbnailFit" }, outputs: { sortColumnEvent: "sortColumnEvent", geoSortEvent: "geoSortEvent", geoAutoSortEvent: "geoAutoSortEvent", selectedItemsEvent: "selectedItemsEvent", consultedItemEvent: "consultedItemEvent", clickOnItemEvent: "clickOnItemEvent", setFiltersEvent: "setFiltersEvent", moreDataEvent: "moreDataEvent", paginationEvent: "paginationEvent", actionOnItemEvent: "actionOnItemEvent", globalActionEvent: "globalActionEvent", columnFilterChanged: "columnFilterChanged", clickOnTile: "clickOnTile", changeResultMode: "changeResultMode", visibleItems: "visibleItems", onChangeItems: "onChangeItems", thumbnailFitEvent: "thumbnailFitEvent", onResultListUpdate: "onResultListUpdate", onListLoaded: "onListLoaded" }, host: { listeners: { "document:keydown.shift": "shiftDown($event)", "document:keyup.shift": "shiftUp($event)" } }, usesOnChanges: true, ngImport: i0, template: "<table [style.width.px]=\"tableWidth\" class=\"resultlist\">\n  <thead *ngIf=\"displayThead\">\n    <tr class=\"resultlist__filter resultlist__thead__tr\" *ngIf=\"this.displayFilters\">\n      <ng-container *ngFor=\"let column of columns\">\n        <td [style.width.px]=\"column.width\" *ngIf=\"column.isIdField\">\n          <span class=\"resultlist__header--columns--hidden\"></span>\n        </td>\n        <td arlas-result-filter class=\"resultlist__filter__{{column.columnName}}\"\n          *ngIf=\"!column.isIdField && !column.isToggleField\"\n          matTooltip=\"{{FILTER_ON | translate}} {{column.columnName  | translate}}\" [style.width.px]=\"column.width\"\n          [column]=\"column\" [dropdownValues]=\"dropDownMapValues?.get(column.fieldName)|async\" [filtersMap]=\"filtersMap\"\n          (columnChanged)=\"columnChanged($event)\" (setFiltersEvent)=\"setFilters($event)\">\n        </td>\n        <td *ngIf=\"column.isToggleField\" [style.width.px]=\"column.width\">\n          <span class=\"resultlist__header--columns--hidden\"></span>\n        </td>\n      </ng-container>\n    </tr>\n    <tr class=\"resultlist__tools resultlist__thead__tr\">\n      <td [style.width.px]=\"tableWidth\" class=\"resultlist__tools__td\">\n        <div class=\"resultlist__tools--select\">\n          <div class=\"resultgrid--checkbox\">\n            <mat-checkbox (change)=\"selectAllItems()\" [checked]=\"allItemsChecked\"\n              [indeterminate]=\"!allItemsChecked && selectedItems.size > 0\"></mat-checkbox>\n            <div class=\"resultgrid--checkbox__count\">\n              {{selectedItems.size}}\n            </div>\n          </div>\n          <div class=\"resultlist__tools--menu\">\n              <mat-icon id=\"global_actions_btn\" matTooltip=\"{{GLOBAL_ACTIONS | translate}}\" mat-icon-button [matMenuTriggerFor]=\"menu\" *ngIf=\"globalActionsList.length > 0\">more_vert</mat-icon>\n              <mat-menu #menu=\"matMenu\">\n                <button id=\"{{action.label + '_btn'}}'\" *ngFor=\"let action of globalActionsList\"  [disabled]=\"!action.alwaysEnabled && selectedItems.size===0\" mat-menu-item (click)=\"setGlobalAction(action)\">\n                  {{action.label | translate}}\n                </button>\n              </mat-menu>\n          </div>\n        </div>\n        <div class=\"resultlist__tools--separator\">|</div>\n        <div class=\"resultlist__tools--sort-container\" id=\"resultlist_sort\">\n          <mat-slide-toggle *ngIf=\"isGeoSortEnabled\" class=\"resultlist__tools--geosort\"\n            [disableRipple]=\"true\" [checked]=\"isGeoSortActivated\" [labelPosition]=\"'before'\"\n            matTooltip=\"{{GEOSORT_ACTION | translate}}\" (change)=\"setGeoSortAction()\" [hideIcon]=\"true\">\n            {{GEOSORT_BUTTON | translate}}</mat-slide-toggle>\n          <mat-select class=\"resultlist__tools--sort\" [panelClass]=\"'resultlist__tools--sort'\"\n            [compareWith]=\"byFieldName\" (selectionChange)=\"setSortedColumn($event)\"\n            [ngModel]=\"sortedColumn\" placeholder=\"{{'Sort on' | translate}}\">\n              <mat-select-trigger>\n                @if (sortedColumn?.fieldName) {\n                  <span>\n                    {{sortedColumn.columnName | translate}}\n                  </span>\n                }\n              </mat-select-trigger>\n              <mat-option [value]=\"\" class=\"resultlist__tools--sort-option\"> - - </mat-option>\n              @for (column of columns; track column.fieldName) {\n                @if (!column.isIdField && !column.isToggleField) {\n                  <mat-option [value]=\"column\" class=\"resultlist__tools--sort-option\">\n                    {{column.columnName | translate}}\n                  </mat-option>\n                }\n              }\n          </mat-select>\n          @if (sortedColumn?.fieldName) {\n            <mat-button mat-icon-button class=\"resultlist__tools--sort-direction\" (click)=\"setDirection($event)\"\n                (keydown)=\"setDirection($event)\" [matTooltip]=\"'Change sort direction' | translate\">\n              <mat-icon [class.reversed]=\"sortedColumn.sortDirection === SortEnum.asc\">trending_flat</mat-icon>\n            </mat-button>\n          }\n        </div>\n        <ng-container *ngIf=\"hasGridMode\">\n          <div class=\"resultlist__tools--separator\">|</div>\n          <div class=\"resultlist__tools--mode\" id=\"resultlist_mode\">\n            <mat-button-toggle-group [name]=\"'modeGroup'\" (change)=\"whichMode($event)\" [hideSingleSelectionIndicator]=\"true\">\n              <mat-button-toggle id=\"list_mode_btn\" matTooltip=\"{{LIST_MODE | translate}}\" value=\"{{ModeEnum.list}}\"\n                [checked]=\"resultMode==ModeEnum.list\">\n                <mat-icon>list</mat-icon>\n              </mat-button-toggle>\n              <mat-button-toggle id=\"grid_mode_btn\" matTooltip=\"{{GRID_MODE | translate}}\" value=\"{{ModeEnum.grid}}\"\n                [checked]=\"resultMode==ModeEnum.grid\">\n                <mat-icon>grid_view</mat-icon>\n              </mat-button-toggle>\n            </mat-button-toggle-group>\n          </div>\n        </ng-container>\n      </td>\n    </tr>\n    <tr class=\"resultlist__header resultlist__thead__tr\" *ngIf=\"resultMode !== ModeEnum.grid\">\n      <ng-container *ngFor=\"let column of columns\">\n        <th *ngIf=\"column.isIdField\" [style.max-width.px]=\"column.width\" [style.min-width.px]=\"column.width\"\n          class=\"resultlist__header--columns\">\n          <span class=\"resultlist__header--columns--hidden\"></span>\n        </th>\n        <th *ngIf=\"!column.isIdField && !column.isToggleField\" [style.max-width.px]=\"column.width\"\n          [style.min-width.px]=\"column.width\" class=\"resultlist__header--columns\"\n          [matTooltip]=\"(column.columnName | translate) + (!!column.dataType ? '(' + column.dataType + ')' : '')\">\n          <span>\n            {{column.columnName | translate}}{{column.dataType ? ' (' + column.dataType + ')': ''}}\n          </span>\n        </th>\n        <th *ngIf=\"column.isToggleField\" class=\"resultlist__header--columns\" [style.max-width.px]=\"column.width\"\n          [style.min-width.px]=\"column.width\">\n          <span class=\"resultlist__header--columns--hidden\">\n          </span>\n        </th>\n      </ng-container>\n    </tr>\n    <tr class=\"resultlist__grid-detail resultlist__thead__tr\"\n      *ngIf=\"selectedGridItem !== null && resultMode === ModeEnum.grid && isDetailledGridOpen\">\n      <td class=\"resultlist__grid-detail--td\" [colSpan]=\"columns?.length\">\n        <arlas-result-detailed-grid [gridTile]=\"selectedGridItem\" [detailWidth]=\"tableWidth\"\n          [activatedActionsPerItem]=\"activatedActionsPerItem\"\n          [detailHeight]=\"detailedGridHeight\" [idFieldName]=\"fieldsConfiguration.idFieldName\"\n          [isDetailShowed]=\"isDetailledGridOpen\" (actionOnItemEvent)=\"triggerActionOnItem($event)\"\n          [showEmptyGroup]=\"showEmptyGroup\" [useHttp]=\"fieldsConfiguration.useHttpQuicklooks\"\n          (closeDetail)=\"closeDetail($event)\">\n        </arlas-result-detailed-grid>\n      </td>\n    </tr>\n  </thead>\n  <div *ngIf=\"isPreviousPageRequested\" class=\"resultlist__loading resultlist__top_loading\"\n    [style.width.px]=\"tableWidth\">\n    <ngx-loading [show]=\"isPreviousPageRequested\" [config]=\"loadAnimationConfig\"></ngx-loading>\n  </div>\n  <tbody class=\"resultlist__tbody\" arlasResultScroll *ngIf=\"!isBodyHidden\" [style.overflow-anchor]=\"'none'\"\n    [style.height.px]=\"tbodyHeight\" [scrollOptions]=\"scrollOptions\" [items]=\"items\" [style.position]=\"'relative'\"\n    [nbGridColumns]=\"nbGridColumns\"\n    [nbLinesBeforeFetch]=\"(nbLinesBeforeFetch !== undefined) ? nbLinesBeforeFetch:nLastLines\" [fetchState]=\"fetchState\"\n    [resultMode]=\"resultMode\" (visibleItems)=\"emitVisibleItems($event)\"\n    (nextDataEvent)=\"paginate($event, PageEnum.next)\" (previousDataEvent)=\"paginate($event, PageEnum.previous)\">\n    <mat-grid-list cols=\"{{nbGridColumns}}\" rowHeight=\"1:1\" [style.display]=\"displayListGrid\">\n      <ng-container *ngFor=\"let rowItem of items; index as i\">\n        <ng-container *ngIf=\"resultMode === ModeEnum.list; else grid_mode\">\n          <tr arlas-result-item [activatedActionsPerItem]=\"activatedActionsPerItem\" id=\"{{rowItem.identifier}}\" class=\"resultlist__body--item-hover-{{rowItem.ishighLight}}\"\n            [options]=\"options\" (mouseenter)=\"onEnterItem(rowItem)\" (mouseleave)=\"onLeaveItem(rowItem)\"\n            (click)=\"onClickItem(rowItem)\" [idFieldName]=\"fieldsConfiguration.idFieldName\" [tableWidth]=\"tableWidth\"\n            [rowItem]=\"rowItem\" [useColorService]=\"useColorService\" [cellBackgroundStyle]=\"cellBackgroundStyle\"\n            [keysToColors]=\"keysToColors\" [colorsSaturationWeight]=\"colorsSaturationWeight\"\n            [detailedDataRetriever]=\"detailedDataRetriever\" [selectedItems]=\"selectedItems\"\n            (selectedItemsEvent)=\"setSelectedItems($event)\" (borderStyleEvent)=\"setBorderStyle($event)\"\n            [style.border-bottom-style]=\"borderStyle\" (actionOnItemEvent)=\"triggerActionOnItem($event)\"\n           >\n          </tr>\n          <tr arlas-result-detailed-item *ngIf=\"rowItem.isDetailToggled\" class=\"resultlist__body--detailed-item\"\n            (mouseenter)=\"onEnterItem(rowItem)\" (mouseleave)=\"onLeaveItem(rowItem)\"\n            [detailedDataRetriever]=\"detailedDataRetriever\"\n            [activatedActionsPerItem]=\"activatedActionsPerItem\"\n            [detailColspan]=\"rowItem.columns.length\" [rowItem]=\"rowItem\" [showEmptyGroup]=showEmptyGroup\n            [idFieldName]=\"fieldsConfiguration.idFieldName\" (actionOnItemEvent)=\"triggerActionOnItem($event)\">\n          </tr>\n\n        </ng-container>\n        <ng-template #grid_mode>\n          <div class=\"div-grid-tile\" (mouseenter)=\"onEnterItem(rowItem)\" (mouseleave)=\"onLeaveItem(rowItem)\" >\n            <mat-grid-tile *ngIf=\"resultMode === ModeEnum.grid\" class=\"resultlist__md-grid-tile\">\n              <arlas-result-grid-tile\n                [activatedActionsPerItem]=\"activatedActionsPerItem\"\n                [displayInfoIcon]=\"rowItem.identifier === selectedGridItem?.identifier && isDetailledGridOpen\"\n                [thumbnailFit]=\"thumbnailFit\"\n                id=\"{{rowItem.identifier}}\" class=\"resultlist__grid-tile\" [options]=\"options\" [gridTile]=\"rowItem\"\n                [selectedItems]=\"selectedItems\" [detailedDataRetriever]=\"detailedDataRetriever\"\n                (selectedItemsEvent)=\"setSelectedItems($event)\" (clickedOnItemEvent)=\"setSelectedGridItem($event)\"\n                [idFieldName]=\"fieldsConfiguration.idFieldName\" (actionOnItemEvent)=\"triggerActionOnItem($event)\">\n              </arlas-result-grid-tile>\n            </mat-grid-tile>\n          </div>\n        </ng-template>\n      </ng-container>\n    </mat-grid-list>\n  </tbody>\n  <div *ngIf=\"resultMode === ModeEnum.grid\" class=\"resultlist-thumbnails-fit\">\n    <mat-button-toggle-group [name]=\"'thumbnailFitGroup'\" (change)=\"emitThumbnailsFitStatus($event)\"\n        class=\"fit-group\" [hideSingleSelectionIndicator]=\"true\">\n      <mat-button-toggle matTooltip=\"{{WIDTH_FIT | translate}}\" value=\"{{ThumbnailFitEnum.width}}\"\n        [checked]=\"thumbnailFit==ThumbnailFitEnum.width\">\n        <mat-icon style=\"transform: rotate(-90deg)\" class=\"fit-icon\">expand</mat-icon>\n      </mat-button-toggle>\n      <mat-button-toggle matTooltip=\"{{CONTAIN_FIT | translate}}\" value=\"{{ThumbnailFitEnum.contain}}\"\n        [checked]=\"thumbnailFit==ThumbnailFitEnum.contain\" class=\"contain-icon-wrapper\">\n        <mat-icon class=\"contain-icon fit-icon\">expand</mat-icon>\n        <mat-icon class=\"fit-icon\">expand</mat-icon>\n      </mat-button-toggle>\n      <mat-button-toggle matTooltip=\"{{HEIGHT_FIT | translate}}\" value=\"{{ThumbnailFitEnum.height}}\"\n        [checked]=\"thumbnailFit==ThumbnailFitEnum.height\">\n        <mat-icon class=\"fit-icon\">expand</mat-icon>\n      </mat-button-toggle>\n    </mat-button-toggle-group>\n  </div>\n  <div *ngIf=\"isNextPageRequested\" class=\"resultlist__loading resultlist__bottom_loading\" [style.width.px]=\"tableWidth\">\n    <ngx-loading [show]=\"isNextPageRequested\" [config]=\"loadAnimationConfig\"></ngx-loading>\n  </div>\n</table>\n", styles: ["@charset \"UTF-8\";.resultlist__header{text-align:center;height:25px}.resultlist__header--columns{font-family:Roboto,Helvetica Neue,sans-serif;font-size:.9em;text-align:left;vertical-align:middle;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;box-sizing:border-box}.resultlist__header--columns__sort{float:right}.resultlist__header--columns__sort--icon{font-size:18px}.resultlist{width:100%;overflow:hidden;display:table;table-layout:fixed;margin-bottom:0;border-collapse:collapse}.resultlist__tools__td{padding:5px;display:flex;flex-direction:row;align-items:center}.resultlist__loading{width:100%;height:100px;position:absolute;z-index:1000;background-color:#fff;opacity:.7}.resultlist__bottom_loading{bottom:0}.resultlist__body--item{border-top:1px solid #e9ecef;border-bottom:1px dashed #e9ecef}.resultlist__body--item-hover-true{border-top:1px solid #e9ecef;border-bottom:1px dashed #e9ecef;background-color:#fff;position:relative;font-weight:500}.resultlist__body--item-hover-{border-top:1px solid #e9ecef;border-bottom:1px dashed #e9ecef;position:relative;background-color:#fff}.resultlist__body--item-hover-false{border-top:1px solid #e9ecef;border-bottom:1px dashed #e9ecef;position:relative;background-color:#eee;color:#aaa}tr:hover .toggle .actions arlas-result-actions .list_actions .not_activated{display:block}.resultlist__lastline{border-top:1px dashed #e9ecef;border-bottom:0px solid #e9ecef}.resultlist__body--detailed-item{border-top:1px dashed #e9ecef;border-bottom:1px solid #e9ecef;background-color:#fff}.resultlist__header,.resultlist__filter,.resultlist__tools,.resultlist__grid-detail{border-top:1px solid #e9ecef;border-bottom:1px solid #e9ecef}.resultlist-thumbnails-fit{display:flex;align-items:center;justify-content:center;height:30px}.resultlist-thumbnails-fit .mat-button-toggle-label-content{line-height:36px!important;height:36px;width:36px;padding:0!important}.resultlist__tools{height:50px;overflow:hidden}.resultlist__tools .resultlist__tools--geosort{font-size:14px;padding-right:10px;white-space:nowrap;overflow:hidden;--mdc-switch-track-height: 10px;--mdc-switch-handle-width: 15px;--mdc-switch-track-width: 30px;--mdc-switch-state-layer-size: 0}.resultlist__tools .resultlist__tools--geosort .mdc-switch__handle{--mat-switch-unselected-handle-size: 15px;--mat-switch-selected-handle-size: 15px;--mat-switch-pressed-handle-size: 15px}.resultlist__tools .resultlist__tools--geosort .mdc-form-field--align-end>label{padding-right:10px}.resultlist__grid-detail{display:block;margin-bottom:3px}.resultlist__grid-detail--td{padding:0!important}.resultlist__tools--select{flex:1;display:flex;align-items:center;justify-content:space-between}.resultgrid--checkbox{float:left;display:flex;align-items:center;--mdc-checkbox-state-layer-size: 18px}.resultgrid--checkbox__count{font-family:Roboto,Helvetica Neue,sans-serif;font-size:.7em;font-weight:700;padding:2px 0 0 8px;min-width:21px}.resultlist__tools--menu{cursor:pointer;float:left;padding-top:6px}.resultlist__tools--mode{text-align:right}.resultlist__tools--mode .mat-button-toggle-label-content{line-height:36px!important;height:36px;width:36px;padding:0!important}.resultlist__grid-tile{display:block;height:100%;width:100%}.resultlist__thead__tr{display:block;position:relative;width:100%}.resultlist__tbody{display:block;overflow-y:auto;overflow-x:hidden;width:100%;background-color:#ddd}::-webkit-scrollbar{width:6px;background-color:#f5f5f5}::-webkit-scrollbar-track{box-shadow:inset 0 0 6px #0000004d;-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#f5f5f5}::-webkit-scrollbar-thumb{background-color:#555}.select_between__icon,.select_all__icon_check{cursor:pointer}.resultgrid__clear{font-size:14px;width:14px;height:14px;cursor:pointer}.resultlist__tools--sort-container{flex:1;font-size:14px;display:flex;align-items:center}.resultlist__tools--sort-container .resultlist__tools--sort{flex:1;padding-right:5px;--mdc-typography-body1-font-size: 14px}.resultlist__tools--sort-container .resultlist__tools--sort .mat-mdc-select-trigger{gap:5px}.resultlist__tools--sort-container .resultlist__tools--sort-direction mat-icon{transform:rotate(90deg);font-size:18px;height:18px;width:18px;cursor:pointer}.resultlist__tools--sort-container .resultlist__tools--sort-direction .reversed{transform:rotate(-90deg)}.resultlist__tools--separator{padding:0 5px;color:#d3d3d3;font-size:24px;font-weight:100}.fit-images{color:#9b9b9b}.cover-images{color:#444}.fit-group{height:25px;align-items:center}.contain-icon{position:absolute;top:10px;transform:rotate(90deg)}.fit-icon{height:18px!important;width:18px!important;font-size:18px}.contain-icon-wrapper{position:relative}.cdk-overlay-pane:has(.mat-mdc-select-panel.resultlist__tools--sort){width:auto!important;--mat-select-trigger-text-tracking: 0;--mat-option-label-text-tracking: 0;--mat-option-label-text-size: 14px;--mdc-radio-state-layer-size: 20px}.cdk-overlay-pane:has(.mat-mdc-select-panel.resultlist__tools--sort) .mat-mdc-option{min-height:30px}.cdk-overlay-pane:has(.mat-mdc-select-panel.resultlist__tools--sort) .mat-mdc-option.mdc-list-item--disabled{opacity:unset}\n"], dependencies: [{ kind: "directive", type: i4.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i4.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i5.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "directive", type: i6.MatButtonToggleGroup, selector: "mat-button-toggle-group", inputs: ["appearance", "name", "vertical", "value", "multiple", "disabled", "disabledInteractive", "hideSingleSelectionIndicator", "hideMultipleSelectionIndicator"], outputs: ["valueChange", "change"], exportAs: ["matButtonToggleGroup"] }, { kind: "component", type: i6.MatButtonToggle, selector: "mat-button-toggle", inputs: ["aria-label", "aria-labelledby", "id", "name", "value", "tabIndex", "disableRipple", "appearance", "checked", "disabled", "disabledInteractive"], outputs: ["change"], exportAs: ["matButtonToggle"] }, { kind: "component", type: i7.MatGridList, selector: "mat-grid-list", inputs: ["cols", "gutterSize", "rowHeight"], exportAs: ["matGridList"] }, { kind: "component", type: i7.MatGridTile, selector: "mat-grid-tile", inputs: ["rowspan", "colspan"], exportAs: ["matGridTile"] }, { kind: "component", type: i8.MatCheckbox, selector: "mat-checkbox", inputs: ["aria-label", "aria-labelledby", "aria-describedby", "id", "required", "labelPosition", "name", "value", "disableRipple", "tabIndex", "color", "disabledInteractive", "checked", "disabled", "indeterminate"], outputs: ["change", "indeterminateChange"], exportAs: ["matCheckbox"] }, { kind: "component", type: i9.MatMenu, selector: "mat-menu", inputs: ["backdropClass", "aria-label", "aria-labelledby", "aria-describedby", "xPosition", "yPosition", "overlapTrigger", "hasBackdrop", "class", "classList"], outputs: ["closed", "close"], exportAs: ["matMenu"] }, { kind: "component", type: i9.MatMenuItem, selector: "[mat-menu-item]", inputs: ["role", "disabled", "disableRipple"], exportAs: ["matMenuItem"] }, { kind: "directive", type: i9.MatMenuTrigger, selector: "[mat-menu-trigger-for], [matMenuTriggerFor]", inputs: ["mat-menu-trigger-for", "matMenuTriggerFor", "matMenuTriggerData", "matMenuTriggerRestoreFocus"], outputs: ["menuOpened", "onMenuOpen", "menuClosed", "onMenuClose"], exportAs: ["matMenuTrigger"] }, { kind: "component", type: i10.MatSelect, selector: "mat-select", inputs: ["aria-describedby", "panelClass", "disabled", "disableRipple", "tabIndex", "hideSingleSelectionIndicator", "placeholder", "required", "multiple", "disableOptionCentering", "compareWith", "value", "aria-label", "aria-labelledby", "errorStateMatcher", "typeaheadDebounceInterval", "sortComparator", "id", "panelWidth"], outputs: ["openedChange", "opened", "closed", "selectionChange", "valueChange"], exportAs: ["matSelect"] }, { kind: "directive", type: i10.MatSelectTrigger, selector: "mat-select-trigger" }, { kind: "component", type: i11.MatOption, selector: "mat-option", inputs: ["value", "id", "disabled"], outputs: ["onSelectionChange"], exportAs: ["matOption"] }, { kind: "component", type: i12.MatSlideToggle, selector: "mat-slide-toggle", inputs: ["name", "id", "labelPosition", "aria-label", "aria-labelledby", "aria-describedby", "required", "color", "disabled", "disableRipple", "tabIndex", "checked", "hideIcon", "disabledInteractive"], outputs: ["change", "toggleChange"], exportAs: ["matSlideToggle"] }, { kind: "directive", type: i13.MatTooltip, selector: "[matTooltip]", inputs: ["matTooltipPosition", "matTooltipPositionAtOrigin", "matTooltipDisabled", "matTooltipShowDelay", "matTooltipHideDelay", "matTooltipTouchGestures", "matTooltip", "matTooltipClass"], exportAs: ["matTooltip"] }, { kind: "directive", type: i14.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i14.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "component", type: i15.NgxLoadingComponent, selector: "ngx-loading", inputs: ["show", "config", "template"] }, { kind: "component", type: i16.ResultGridTileComponent, selector: "arlas-result-grid-tile", inputs: ["gridTile", "thumbnailFit", "selectedItems", "detailedDataRetriever", "options", "idFieldName", "activatedActionsPerItem", "displayInfoIcon"], outputs: ["actionOnItemEvent", "selectedItemsEvent", "selectedItemPositionEvent", "clickedOnItemEvent"] }, { kind: "component", type: i17.ResultItemComponent, selector: "[arlas-result-item]", inputs: ["options", "rowItem", "idFieldName", "detailedDataRetriever", "selectedItems", "keysToColors", "colorsSaturationWeight", "useColorService", "cellBackgroundStyle", "activatedActionsPerItem", "tableWidth"], outputs: ["selectedItemsEvent", "actionOnItemEvent", "selectedItemPositionEvent", "borderStyleEvent"] }, { kind: "component", type: i18.ResultDetailedItemComponent, selector: "[arlas-result-detailed-item]", inputs: ["detailColspan", "idFieldName", "containerType", "rowItem", "showEmptyGroup", "detailedDataRetriever", "activatedActionsPerItem"], outputs: ["actionOnItemEvent"] }, { kind: "component", type: i19.ResultDetailedGridComponent, selector: "arlas-result-detailed-grid", inputs: ["gridTile", "detailWidth", "detailHeight", "idFieldName", "isDetailShowed", "showEmptyGroup", "useHttp", "activatedActionsPerItem", "detailedDataRetriever"], outputs: ["actionOnItemEvent", "closeDetail"] }, { kind: "component", type: i20.ResultFilterComponent, selector: "[arlas-result-filter]", inputs: ["column", "filtersMap", "inputValue", "dropdownValues"], outputs: ["setFiltersEvent", "columnChanged"] }, { kind: "directive", type: i21.ResultScrollDirective, selector: "[arlasResultScroll]", inputs: ["items", "nbLinesBeforeFetch", "nbGridColumns", "resultMode", "fetchState", "scrollOptions"], outputs: ["nextDataEvent", "previousDataEvent", "visibleItems"] }, { kind: "pipe", type: i4.AsyncPipe, name: "async" }, { kind: "pipe", type: i2.TranslatePipe, name: "translate" }], encapsulation: i0.ViewEncapsulation.None }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: ResultListComponent, decorators: [{
            type: Component,
            args: [{ selector: 'arlas-result-list', encapsulation: ViewEncapsulation.None, template: "<table [style.width.px]=\"tableWidth\" class=\"resultlist\">\n  <thead *ngIf=\"displayThead\">\n    <tr class=\"resultlist__filter resultlist__thead__tr\" *ngIf=\"this.displayFilters\">\n      <ng-container *ngFor=\"let column of columns\">\n        <td [style.width.px]=\"column.width\" *ngIf=\"column.isIdField\">\n          <span class=\"resultlist__header--columns--hidden\"></span>\n        </td>\n        <td arlas-result-filter class=\"resultlist__filter__{{column.columnName}}\"\n          *ngIf=\"!column.isIdField && !column.isToggleField\"\n          matTooltip=\"{{FILTER_ON | translate}} {{column.columnName  | translate}}\" [style.width.px]=\"column.width\"\n          [column]=\"column\" [dropdownValues]=\"dropDownMapValues?.get(column.fieldName)|async\" [filtersMap]=\"filtersMap\"\n          (columnChanged)=\"columnChanged($event)\" (setFiltersEvent)=\"setFilters($event)\">\n        </td>\n        <td *ngIf=\"column.isToggleField\" [style.width.px]=\"column.width\">\n          <span class=\"resultlist__header--columns--hidden\"></span>\n        </td>\n      </ng-container>\n    </tr>\n    <tr class=\"resultlist__tools resultlist__thead__tr\">\n      <td [style.width.px]=\"tableWidth\" class=\"resultlist__tools__td\">\n        <div class=\"resultlist__tools--select\">\n          <div class=\"resultgrid--checkbox\">\n            <mat-checkbox (change)=\"selectAllItems()\" [checked]=\"allItemsChecked\"\n              [indeterminate]=\"!allItemsChecked && selectedItems.size > 0\"></mat-checkbox>\n            <div class=\"resultgrid--checkbox__count\">\n              {{selectedItems.size}}\n            </div>\n          </div>\n          <div class=\"resultlist__tools--menu\">\n              <mat-icon id=\"global_actions_btn\" matTooltip=\"{{GLOBAL_ACTIONS | translate}}\" mat-icon-button [matMenuTriggerFor]=\"menu\" *ngIf=\"globalActionsList.length > 0\">more_vert</mat-icon>\n              <mat-menu #menu=\"matMenu\">\n                <button id=\"{{action.label + '_btn'}}'\" *ngFor=\"let action of globalActionsList\"  [disabled]=\"!action.alwaysEnabled && selectedItems.size===0\" mat-menu-item (click)=\"setGlobalAction(action)\">\n                  {{action.label | translate}}\n                </button>\n              </mat-menu>\n          </div>\n        </div>\n        <div class=\"resultlist__tools--separator\">|</div>\n        <div class=\"resultlist__tools--sort-container\" id=\"resultlist_sort\">\n          <mat-slide-toggle *ngIf=\"isGeoSortEnabled\" class=\"resultlist__tools--geosort\"\n            [disableRipple]=\"true\" [checked]=\"isGeoSortActivated\" [labelPosition]=\"'before'\"\n            matTooltip=\"{{GEOSORT_ACTION | translate}}\" (change)=\"setGeoSortAction()\" [hideIcon]=\"true\">\n            {{GEOSORT_BUTTON | translate}}</mat-slide-toggle>\n          <mat-select class=\"resultlist__tools--sort\" [panelClass]=\"'resultlist__tools--sort'\"\n            [compareWith]=\"byFieldName\" (selectionChange)=\"setSortedColumn($event)\"\n            [ngModel]=\"sortedColumn\" placeholder=\"{{'Sort on' | translate}}\">\n              <mat-select-trigger>\n                @if (sortedColumn?.fieldName) {\n                  <span>\n                    {{sortedColumn.columnName | translate}}\n                  </span>\n                }\n              </mat-select-trigger>\n              <mat-option [value]=\"\" class=\"resultlist__tools--sort-option\"> - - </mat-option>\n              @for (column of columns; track column.fieldName) {\n                @if (!column.isIdField && !column.isToggleField) {\n                  <mat-option [value]=\"column\" class=\"resultlist__tools--sort-option\">\n                    {{column.columnName | translate}}\n                  </mat-option>\n                }\n              }\n          </mat-select>\n          @if (sortedColumn?.fieldName) {\n            <mat-button mat-icon-button class=\"resultlist__tools--sort-direction\" (click)=\"setDirection($event)\"\n                (keydown)=\"setDirection($event)\" [matTooltip]=\"'Change sort direction' | translate\">\n              <mat-icon [class.reversed]=\"sortedColumn.sortDirection === SortEnum.asc\">trending_flat</mat-icon>\n            </mat-button>\n          }\n        </div>\n        <ng-container *ngIf=\"hasGridMode\">\n          <div class=\"resultlist__tools--separator\">|</div>\n          <div class=\"resultlist__tools--mode\" id=\"resultlist_mode\">\n            <mat-button-toggle-group [name]=\"'modeGroup'\" (change)=\"whichMode($event)\" [hideSingleSelectionIndicator]=\"true\">\n              <mat-button-toggle id=\"list_mode_btn\" matTooltip=\"{{LIST_MODE | translate}}\" value=\"{{ModeEnum.list}}\"\n                [checked]=\"resultMode==ModeEnum.list\">\n                <mat-icon>list</mat-icon>\n              </mat-button-toggle>\n              <mat-button-toggle id=\"grid_mode_btn\" matTooltip=\"{{GRID_MODE | translate}}\" value=\"{{ModeEnum.grid}}\"\n                [checked]=\"resultMode==ModeEnum.grid\">\n                <mat-icon>grid_view</mat-icon>\n              </mat-button-toggle>\n            </mat-button-toggle-group>\n          </div>\n        </ng-container>\n      </td>\n    </tr>\n    <tr class=\"resultlist__header resultlist__thead__tr\" *ngIf=\"resultMode !== ModeEnum.grid\">\n      <ng-container *ngFor=\"let column of columns\">\n        <th *ngIf=\"column.isIdField\" [style.max-width.px]=\"column.width\" [style.min-width.px]=\"column.width\"\n          class=\"resultlist__header--columns\">\n          <span class=\"resultlist__header--columns--hidden\"></span>\n        </th>\n        <th *ngIf=\"!column.isIdField && !column.isToggleField\" [style.max-width.px]=\"column.width\"\n          [style.min-width.px]=\"column.width\" class=\"resultlist__header--columns\"\n          [matTooltip]=\"(column.columnName | translate) + (!!column.dataType ? '(' + column.dataType + ')' : '')\">\n          <span>\n            {{column.columnName | translate}}{{column.dataType ? ' (' + column.dataType + ')': ''}}\n          </span>\n        </th>\n        <th *ngIf=\"column.isToggleField\" class=\"resultlist__header--columns\" [style.max-width.px]=\"column.width\"\n          [style.min-width.px]=\"column.width\">\n          <span class=\"resultlist__header--columns--hidden\">\n          </span>\n        </th>\n      </ng-container>\n    </tr>\n    <tr class=\"resultlist__grid-detail resultlist__thead__tr\"\n      *ngIf=\"selectedGridItem !== null && resultMode === ModeEnum.grid && isDetailledGridOpen\">\n      <td class=\"resultlist__grid-detail--td\" [colSpan]=\"columns?.length\">\n        <arlas-result-detailed-grid [gridTile]=\"selectedGridItem\" [detailWidth]=\"tableWidth\"\n          [activatedActionsPerItem]=\"activatedActionsPerItem\"\n          [detailHeight]=\"detailedGridHeight\" [idFieldName]=\"fieldsConfiguration.idFieldName\"\n          [isDetailShowed]=\"isDetailledGridOpen\" (actionOnItemEvent)=\"triggerActionOnItem($event)\"\n          [showEmptyGroup]=\"showEmptyGroup\" [useHttp]=\"fieldsConfiguration.useHttpQuicklooks\"\n          (closeDetail)=\"closeDetail($event)\">\n        </arlas-result-detailed-grid>\n      </td>\n    </tr>\n  </thead>\n  <div *ngIf=\"isPreviousPageRequested\" class=\"resultlist__loading resultlist__top_loading\"\n    [style.width.px]=\"tableWidth\">\n    <ngx-loading [show]=\"isPreviousPageRequested\" [config]=\"loadAnimationConfig\"></ngx-loading>\n  </div>\n  <tbody class=\"resultlist__tbody\" arlasResultScroll *ngIf=\"!isBodyHidden\" [style.overflow-anchor]=\"'none'\"\n    [style.height.px]=\"tbodyHeight\" [scrollOptions]=\"scrollOptions\" [items]=\"items\" [style.position]=\"'relative'\"\n    [nbGridColumns]=\"nbGridColumns\"\n    [nbLinesBeforeFetch]=\"(nbLinesBeforeFetch !== undefined) ? nbLinesBeforeFetch:nLastLines\" [fetchState]=\"fetchState\"\n    [resultMode]=\"resultMode\" (visibleItems)=\"emitVisibleItems($event)\"\n    (nextDataEvent)=\"paginate($event, PageEnum.next)\" (previousDataEvent)=\"paginate($event, PageEnum.previous)\">\n    <mat-grid-list cols=\"{{nbGridColumns}}\" rowHeight=\"1:1\" [style.display]=\"displayListGrid\">\n      <ng-container *ngFor=\"let rowItem of items; index as i\">\n        <ng-container *ngIf=\"resultMode === ModeEnum.list; else grid_mode\">\n          <tr arlas-result-item [activatedActionsPerItem]=\"activatedActionsPerItem\" id=\"{{rowItem.identifier}}\" class=\"resultlist__body--item-hover-{{rowItem.ishighLight}}\"\n            [options]=\"options\" (mouseenter)=\"onEnterItem(rowItem)\" (mouseleave)=\"onLeaveItem(rowItem)\"\n            (click)=\"onClickItem(rowItem)\" [idFieldName]=\"fieldsConfiguration.idFieldName\" [tableWidth]=\"tableWidth\"\n            [rowItem]=\"rowItem\" [useColorService]=\"useColorService\" [cellBackgroundStyle]=\"cellBackgroundStyle\"\n            [keysToColors]=\"keysToColors\" [colorsSaturationWeight]=\"colorsSaturationWeight\"\n            [detailedDataRetriever]=\"detailedDataRetriever\" [selectedItems]=\"selectedItems\"\n            (selectedItemsEvent)=\"setSelectedItems($event)\" (borderStyleEvent)=\"setBorderStyle($event)\"\n            [style.border-bottom-style]=\"borderStyle\" (actionOnItemEvent)=\"triggerActionOnItem($event)\"\n           >\n          </tr>\n          <tr arlas-result-detailed-item *ngIf=\"rowItem.isDetailToggled\" class=\"resultlist__body--detailed-item\"\n            (mouseenter)=\"onEnterItem(rowItem)\" (mouseleave)=\"onLeaveItem(rowItem)\"\n            [detailedDataRetriever]=\"detailedDataRetriever\"\n            [activatedActionsPerItem]=\"activatedActionsPerItem\"\n            [detailColspan]=\"rowItem.columns.length\" [rowItem]=\"rowItem\" [showEmptyGroup]=showEmptyGroup\n            [idFieldName]=\"fieldsConfiguration.idFieldName\" (actionOnItemEvent)=\"triggerActionOnItem($event)\">\n          </tr>\n\n        </ng-container>\n        <ng-template #grid_mode>\n          <div class=\"div-grid-tile\" (mouseenter)=\"onEnterItem(rowItem)\" (mouseleave)=\"onLeaveItem(rowItem)\" >\n            <mat-grid-tile *ngIf=\"resultMode === ModeEnum.grid\" class=\"resultlist__md-grid-tile\">\n              <arlas-result-grid-tile\n                [activatedActionsPerItem]=\"activatedActionsPerItem\"\n                [displayInfoIcon]=\"rowItem.identifier === selectedGridItem?.identifier && isDetailledGridOpen\"\n                [thumbnailFit]=\"thumbnailFit\"\n                id=\"{{rowItem.identifier}}\" class=\"resultlist__grid-tile\" [options]=\"options\" [gridTile]=\"rowItem\"\n                [selectedItems]=\"selectedItems\" [detailedDataRetriever]=\"detailedDataRetriever\"\n                (selectedItemsEvent)=\"setSelectedItems($event)\" (clickedOnItemEvent)=\"setSelectedGridItem($event)\"\n                [idFieldName]=\"fieldsConfiguration.idFieldName\" (actionOnItemEvent)=\"triggerActionOnItem($event)\">\n              </arlas-result-grid-tile>\n            </mat-grid-tile>\n          </div>\n        </ng-template>\n      </ng-container>\n    </mat-grid-list>\n  </tbody>\n  <div *ngIf=\"resultMode === ModeEnum.grid\" class=\"resultlist-thumbnails-fit\">\n    <mat-button-toggle-group [name]=\"'thumbnailFitGroup'\" (change)=\"emitThumbnailsFitStatus($event)\"\n        class=\"fit-group\" [hideSingleSelectionIndicator]=\"true\">\n      <mat-button-toggle matTooltip=\"{{WIDTH_FIT | translate}}\" value=\"{{ThumbnailFitEnum.width}}\"\n        [checked]=\"thumbnailFit==ThumbnailFitEnum.width\">\n        <mat-icon style=\"transform: rotate(-90deg)\" class=\"fit-icon\">expand</mat-icon>\n      </mat-button-toggle>\n      <mat-button-toggle matTooltip=\"{{CONTAIN_FIT | translate}}\" value=\"{{ThumbnailFitEnum.contain}}\"\n        [checked]=\"thumbnailFit==ThumbnailFitEnum.contain\" class=\"contain-icon-wrapper\">\n        <mat-icon class=\"contain-icon fit-icon\">expand</mat-icon>\n        <mat-icon class=\"fit-icon\">expand</mat-icon>\n      </mat-button-toggle>\n      <mat-button-toggle matTooltip=\"{{HEIGHT_FIT | translate}}\" value=\"{{ThumbnailFitEnum.height}}\"\n        [checked]=\"thumbnailFit==ThumbnailFitEnum.height\">\n        <mat-icon class=\"fit-icon\">expand</mat-icon>\n      </mat-button-toggle>\n    </mat-button-toggle-group>\n  </div>\n  <div *ngIf=\"isNextPageRequested\" class=\"resultlist__loading resultlist__bottom_loading\" [style.width.px]=\"tableWidth\">\n    <ngx-loading [show]=\"isNextPageRequested\" [config]=\"loadAnimationConfig\"></ngx-loading>\n  </div>\n</table>\n", styles: ["@charset \"UTF-8\";.resultlist__header{text-align:center;height:25px}.resultlist__header--columns{font-family:Roboto,Helvetica Neue,sans-serif;font-size:.9em;text-align:left;vertical-align:middle;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;box-sizing:border-box}.resultlist__header--columns__sort{float:right}.resultlist__header--columns__sort--icon{font-size:18px}.resultlist{width:100%;overflow:hidden;display:table;table-layout:fixed;margin-bottom:0;border-collapse:collapse}.resultlist__tools__td{padding:5px;display:flex;flex-direction:row;align-items:center}.resultlist__loading{width:100%;height:100px;position:absolute;z-index:1000;background-color:#fff;opacity:.7}.resultlist__bottom_loading{bottom:0}.resultlist__body--item{border-top:1px solid #e9ecef;border-bottom:1px dashed #e9ecef}.resultlist__body--item-hover-true{border-top:1px solid #e9ecef;border-bottom:1px dashed #e9ecef;background-color:#fff;position:relative;font-weight:500}.resultlist__body--item-hover-{border-top:1px solid #e9ecef;border-bottom:1px dashed #e9ecef;position:relative;background-color:#fff}.resultlist__body--item-hover-false{border-top:1px solid #e9ecef;border-bottom:1px dashed #e9ecef;position:relative;background-color:#eee;color:#aaa}tr:hover .toggle .actions arlas-result-actions .list_actions .not_activated{display:block}.resultlist__lastline{border-top:1px dashed #e9ecef;border-bottom:0px solid #e9ecef}.resultlist__body--detailed-item{border-top:1px dashed #e9ecef;border-bottom:1px solid #e9ecef;background-color:#fff}.resultlist__header,.resultlist__filter,.resultlist__tools,.resultlist__grid-detail{border-top:1px solid #e9ecef;border-bottom:1px solid #e9ecef}.resultlist-thumbnails-fit{display:flex;align-items:center;justify-content:center;height:30px}.resultlist-thumbnails-fit .mat-button-toggle-label-content{line-height:36px!important;height:36px;width:36px;padding:0!important}.resultlist__tools{height:50px;overflow:hidden}.resultlist__tools .resultlist__tools--geosort{font-size:14px;padding-right:10px;white-space:nowrap;overflow:hidden;--mdc-switch-track-height: 10px;--mdc-switch-handle-width: 15px;--mdc-switch-track-width: 30px;--mdc-switch-state-layer-size: 0}.resultlist__tools .resultlist__tools--geosort .mdc-switch__handle{--mat-switch-unselected-handle-size: 15px;--mat-switch-selected-handle-size: 15px;--mat-switch-pressed-handle-size: 15px}.resultlist__tools .resultlist__tools--geosort .mdc-form-field--align-end>label{padding-right:10px}.resultlist__grid-detail{display:block;margin-bottom:3px}.resultlist__grid-detail--td{padding:0!important}.resultlist__tools--select{flex:1;display:flex;align-items:center;justify-content:space-between}.resultgrid--checkbox{float:left;display:flex;align-items:center;--mdc-checkbox-state-layer-size: 18px}.resultgrid--checkbox__count{font-family:Roboto,Helvetica Neue,sans-serif;font-size:.7em;font-weight:700;padding:2px 0 0 8px;min-width:21px}.resultlist__tools--menu{cursor:pointer;float:left;padding-top:6px}.resultlist__tools--mode{text-align:right}.resultlist__tools--mode .mat-button-toggle-label-content{line-height:36px!important;height:36px;width:36px;padding:0!important}.resultlist__grid-tile{display:block;height:100%;width:100%}.resultlist__thead__tr{display:block;position:relative;width:100%}.resultlist__tbody{display:block;overflow-y:auto;overflow-x:hidden;width:100%;background-color:#ddd}::-webkit-scrollbar{width:6px;background-color:#f5f5f5}::-webkit-scrollbar-track{box-shadow:inset 0 0 6px #0000004d;-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#f5f5f5}::-webkit-scrollbar-thumb{background-color:#555}.select_between__icon,.select_all__icon_check{cursor:pointer}.resultgrid__clear{font-size:14px;width:14px;height:14px;cursor:pointer}.resultlist__tools--sort-container{flex:1;font-size:14px;display:flex;align-items:center}.resultlist__tools--sort-container .resultlist__tools--sort{flex:1;padding-right:5px;--mdc-typography-body1-font-size: 14px}.resultlist__tools--sort-container .resultlist__tools--sort .mat-mdc-select-trigger{gap:5px}.resultlist__tools--sort-container .resultlist__tools--sort-direction mat-icon{transform:rotate(90deg);font-size:18px;height:18px;width:18px;cursor:pointer}.resultlist__tools--sort-container .resultlist__tools--sort-direction .reversed{transform:rotate(-90deg)}.resultlist__tools--separator{padding:0 5px;color:#d3d3d3;font-size:24px;font-weight:100}.fit-images{color:#9b9b9b}.cover-images{color:#444}.fit-group{height:25px;align-items:center}.contain-icon{position:absolute;top:10px;transform:rotate(90deg)}.fit-icon{height:18px!important;width:18px!important;font-size:18px}.contain-icon-wrapper{position:relative}.cdk-overlay-pane:has(.mat-mdc-select-panel.resultlist__tools--sort){width:auto!important;--mat-select-trigger-text-tracking: 0;--mat-option-label-text-tracking: 0;--mat-option-label-text-size: 14px;--mdc-radio-state-layer-size: 20px}.cdk-overlay-pane:has(.mat-mdc-select-panel.resultlist__tools--sort) .mat-mdc-option{min-height:30px}.cdk-overlay-pane:has(.mat-mdc-select-panel.resultlist__tools--sort) .mat-mdc-option.mdc-list-item--disabled{opacity:unset}\n"] }]
        }], ctorParameters: () => [{ type: i0.IterableDiffers }, { type: i0.IterableDiffers }, { type: i0.ElementRef }, { type: i1.ArlasColorService }, { type: i2.TranslateService }, { type: i3.ResultlistNotifierService }, { type: i0.ChangeDetectorRef }], propDecorators: { options: [{
                type: Input
            }], fetchState: [{
                type: Input
            }], fieldsList: [{
                type: Input
            }], rowItemList: [{
                type: Input
            }], fieldsConfiguration: [{
                type: Input
            }], tableWidth: [{
                type: Input
            }], nLastLines: [{
                type: Input
            }], nbLinesBeforeFetch: [{
                type: Input
            }], detailedGridHeight: [{
                type: Input
            }], nbGridColumns: [{
                type: Input
            }], globalActionsList: [{
                type: Input
            }], detailedDataRetriever: [{
                type: Input
            }], indeterminatedItems: [{
                type: Input
            }], selectedItems: [{
                type: Input
            }], activatedActionsPerItem: [{
                type: Input
            }], highlightItems: [{
                type: Input
            }], defautMode: [{
                type: Input
            }], isBodyHidden: [{
                type: Input
            }], displayFilters: [{
                type: Input
            }], isGeoSortEnabled: [{
                type: Input
            }], isGeoSortActivated: [{
                type: Input
            }], currentSortedColumn: [{
                type: Input
            }], filtersMap: [{
                type: Input
            }], dropDownMapValues: [{
                type: Input
            }], displayThead: [{
                type: Input
            }], keysToColors: [{
                type: Input
            }], colorsSaturationWeight: [{
                type: Input
            }], useColorService: [{
                type: Input
            }], cellBackgroundStyle: [{
                type: Input
            }], selectedGridItem: [{
                type: Input
            }], showEmptyGroup: [{
                type: Input
            }], isDetailledGridOpen: [{
                type: Input
            }], thumbnailFit: [{
                type: Input
            }], sortColumnEvent: [{
                type: Output
            }], geoSortEvent: [{
                type: Output
            }], geoAutoSortEvent: [{
                type: Output
            }], selectedItemsEvent: [{
                type: Output
            }], consultedItemEvent: [{
                type: Output
            }], clickOnItemEvent: [{
                type: Output
            }], setFiltersEvent: [{
                type: Output
            }], moreDataEvent: [{
                type: Output
            }], paginationEvent: [{
                type: Output
            }], actionOnItemEvent: [{
                type: Output
            }], globalActionEvent: [{
                type: Output
            }], columnFilterChanged: [{
                type: Output
            }], clickOnTile: [{
                type: Output
            }], changeResultMode: [{
                type: Output
            }], visibleItems: [{
                type: Output
            }], onChangeItems: [{
                type: Output
            }], thumbnailFitEvent: [{
                type: Output
            }], onResultListUpdate: [{
                type: Output
            }], onListLoaded: [{
                type: Output
            }], shiftDown: [{
                type: HostListener,
                args: ['document:keydown.shift', ['$event']]
            }], shiftUp: [{
                type: HostListener,
                args: ['document:keyup.shift', ['$event']]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzdWx0LWxpc3QuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvYXJsYXMtY29tcG9uZW50cy9zcmMvbGliL2NvbXBvbmVudHMvcmVzdWx0cy9yZXN1bHQtbGlzdC9yZXN1bHQtbGlzdC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9hcmxhcy1jb21wb25lbnRzL3NyYy9saWIvY29tcG9uZW50cy9yZXN1bHRzL3Jlc3VsdC1saXN0L3Jlc3VsdC1saXN0LmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7OztHQWlCRztBQUVILE9BQU8sRUFDVSxpQkFBaUIsRUFBRSxTQUFTLEVBQVcsVUFBVSxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUNuRyxlQUFlLEVBQWlCLGlCQUFpQixFQUNsRCxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQXFCLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUcxRCxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN2RCxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNoRSxPQUFPLEVBQUUsU0FBUyxFQUFjLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUN0RCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDOUMsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sMkNBQTJDLENBQUM7QUFDOUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3pDLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFckMsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sK0NBQStDLENBQUM7QUFDeEYsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFN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aXNhw69hIHVuZGVyIG9uZSBvciBtb3JlIGNvbnRyaWJ1dG9yXG4gKiBsaWNlbnNlIGFncmVlbWVudHMuIFNlZSB0aGUgTk9USUNFLnR4dCBmaWxlIGRpc3RyaWJ1dGVkIHdpdGhcbiAqIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiByZWdhcmRpbmcgY29weXJpZ2h0XG4gKiBvd25lcnNoaXAuIEdpc2HDr2EgbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlclxuICogdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heVxuICogbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICBBZnRlclZpZXdJbml0LCBDaGFuZ2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBEb0NoZWNrLCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIEhvc3RMaXN0ZW5lciwgSW5wdXQsXG4gIEl0ZXJhYmxlRGlmZmVycywgU2ltcGxlQ2hhbmdlcywgVmlld0VuY2Fwc3VsYXRpb25cbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBPbkNoYW5nZXMsIE9uSW5pdCwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNYXRCdXR0b25Ub2dnbGVDaGFuZ2UgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9idXR0b24tdG9nZ2xlJztcbmltcG9ydCB7IE1hdFNlbGVjdENoYW5nZSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL3NlbGVjdCc7XG5pbXBvcnQgeyBUcmFuc2xhdGVTZXJ2aWNlIH0gZnJvbSAnQG5neC10cmFuc2xhdGUvY29yZSc7XG5pbXBvcnQgeyBuZ3hMb2FkaW5nQW5pbWF0aW9uVHlwZXMgfSBmcm9tICduZ3gtbG9hZGluZy1yZWxvYWRlZCc7XG5pbXBvcnQgeyBmcm9tRXZlbnQsIE9ic2VydmFibGUsIFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGRlYm91bmNlVGltZSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IEFybGFzQ29sb3JTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vc2VydmljZXMvY29sb3IuZ2VuZXJhdG9yLnNlcnZpY2UnO1xuaW1wb3J0IHsgQ29sdW1uIH0gZnJvbSAnLi4vbW9kZWwvY29sdW1uJztcbmltcG9ydCB7IEl0ZW0gfSBmcm9tICcuLi9tb2RlbC9pdGVtJztcbmltcG9ydCB7IERldGFpbGVkRGF0YVJldHJpZXZlciB9IGZyb20gJy4uL3V0aWxzL2RldGFpbGVkLWRhdGEtcmV0cmlldmVyJztcbmltcG9ydCB7IENlbGxCYWNrZ3JvdW5kU3R5bGVFbnVtIH0gZnJvbSAnLi4vdXRpbHMvZW51bWVyYXRpb25zL2NlbGxCYWNrZ3JvdW5kU3R5bGVFbnVtJztcbmltcG9ydCB7IE1vZGVFbnVtIH0gZnJvbSAnLi4vdXRpbHMvZW51bWVyYXRpb25zL21vZGVFbnVtJztcbmltcG9ydCB7IFBhZ2VFbnVtIH0gZnJvbSAnLi4vdXRpbHMvZW51bWVyYXRpb25zL3BhZ2VFbnVtJztcbmltcG9ydCB7IFNvcnRFbnVtIH0gZnJvbSAnLi4vdXRpbHMvZW51bWVyYXRpb25zL3NvcnRFbnVtJztcbmltcG9ydCB7IFRodW1ibmFpbEZpdEVudW0gfSBmcm9tICcuLi91dGlscy9lbnVtZXJhdGlvbnMvdGh1bWJuYWlsRml0RW51bSc7XG5pbXBvcnQgeyBBY3Rpb24sIEVsZW1lbnRJZGVudGlmaWVyLCBGaWVsZHNDb25maWd1cmF0aW9uLCBJdGVtRGF0YVR5cGUsXG4gIFBhZ2VRdWVyeSwgUmVzdWx0TGlzdE9wdGlvbnMsIG1hdGNoQW5kUmVwbGFjZSB9IGZyb20gJy4uL3V0aWxzL3Jlc3VsdHMudXRpbHMnO1xuaW1wb3J0IHsgbWFya2VyIH0gZnJvbSAnQGNvbHNlbjE5OTEvbmd4LXRyYW5zbGF0ZS1leHRyYWN0LW1hcmtlcic7XG5pbXBvcnQgeyBSZXN1bHRsaXN0Tm90aWZpZXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vc2VydmljZXMvcmVzdWx0bGlzdC5ub3RpZmllci5zZXJ2aWNlJztcblxuLyoqXG4gKiBSZXN1bHRMaXN0IGNvbXBvbmVudCBhbGxvd3MgdG8gc3RydWN0dXJlIGRhdGEgaW4gYSBmaWx0ZXJhYmxlIGFuZCBzb3J0YWJsZSB0YWJsZS5cbiAqIEl0ZW1zIGNhbiBiZSByZXByZXNlbnRlZCBhcyByb3dzIG9yIGdyaWRzIGFuZCBhcmUgbXVsdGktc2VsZWN0YWJsZS5cbiAqIEZvciBib3RoIGxpc3QgYW5kIGdyaWQgbW9kZXMsIGVhY2ggaXRlbSBoYXMgZGV0YWlsZWQgZGF0YSB0aGF0IGNhbiBiZSBkaXNwbGF5ZWQgaW4gYSB0b2dnbGFibGUgc3BhY2UuXG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2FybGFzLXJlc3VsdC1saXN0JyxcbiAgdGVtcGxhdGVVcmw6ICcuL3Jlc3VsdC1saXN0LmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vcmVzdWx0LWxpc3QuY29tcG9uZW50LnNjc3MnXSxcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxufSlcbmV4cG9ydCBjbGFzcyBSZXN1bHRMaXN0Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBEb0NoZWNrLCBPbkNoYW5nZXMsIEFmdGVyVmlld0luaXQge1xuXG4gIC8qKlxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIHB1YmxpYyBHRU9fRElTVEFOQ0UgPSAnZ2VvZGlzdGFuY2UnO1xuXG4gIC8qKlxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIHB1YmxpYyBGSUxURVJfT04gPSBtYXJrZXIoJ0ZpbHRlciBvbicpO1xuXG4gIC8qKlxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIHB1YmxpYyBHTE9CQUxfQUNUSU9OUyA9IG1hcmtlcignR2xvYmFsIGFjdGlvbnMnKTtcbiAgLyoqXG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgcHVibGljIEdFT1NPUlRfQUNUSU9OID0gbWFya2VyKCdHZW8gc29ydCBhY3Rpb24nKTtcbiAgLyoqXG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgcHVibGljIEdSSURfTU9ERSA9IG1hcmtlcignR3JpZCBtb2RlJyk7XG4gIC8qKlxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIHB1YmxpYyBMSVNUX01PREUgPSBtYXJrZXIoJ0xpc3QgbW9kZScpO1xuXG4gIC8qKlxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIHB1YmxpYyBDT05UQUlOX0ZJVCA9IG1hcmtlcignRml0IHRoZSB3aG9sZSB0aHVtYm5haWwgdG8gdGhlIHRpbGUnKTtcblxuICAvKipcbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBwdWJsaWMgV0lEVEhfRklUID0gbWFya2VyKCdGaXQgdGhlIHRodW1ibmFpbFxcJ3Mgd2lkdGggdG8gdGhlIHRpbGUnKTtcblxuICAvKipcbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBwdWJsaWMgSEVJR0hUX0ZJVCA9IG1hcmtlcignRml0IHRoZSB0aHVtYm5haWxcXCdzIGhlaWdodCB0byB0aGUgdGlsZScpO1xuXG4gIC8qKlxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIHB1YmxpYyBHRU9TT1JUX0JVVFRPTiA9IG1hcmtlcignR2VvLXNvcnQnKTtcblxuICAvKipcbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBwdWJsaWMgQ09MVU1OX0FDVElPTlNfSEVJR0hUID0gNTI7XG5cbiAgLyoqXG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgcHVibGljIENPTFVNTl9OQU1FX0hFSUdIVCA9IDI3O1xuXG4gIC8qKlxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIHB1YmxpYyBGSUxURVJTX0hFSUdIVCA9IDUwO1xuXG4gIC8qKlxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIHB1YmxpYyBUQUlMX0hFSUdIVCA9IDMwO1xuXG5cbiAgcHVibGljIGxvYWRBbmltYXRpb25Db25maWcgPSB7XG4gICAgYW5pbWF0aW9uVHlwZTogbmd4TG9hZGluZ0FuaW1hdGlvblR5cGVzLnRocmVlQm91bmNlLCBiYWNrZHJvcEJhY2tncm91bmRDb2xvdXI6ICdyZ2JhKDEwMCwxMDAsMTAwLDAuNSknLFxuICAgIGJhY2tkcm9wQm9yZGVyUmFkaXVzOiAnMCcsIHByaW1hcnlDb2xvdXI6ICcjZmZmZmZmJywgc2Vjb25kYXJ5Q29sb3VyOiAnI2ZmZmZmZicsIHRlcnRpYXJ5Q29sb3VyOiAnI2ZmZmZmZidcbiAgfTtcblxuICBwdWJsaWMgc2Nyb2xsT3B0aW9ucyA9IHsgbWFpbnRhaW5TY3JvbGxVcFBvc2l0aW9uOiB0cnVlLCBtYWludGFpblNjcm9sbERvd25Qb3NpdGlvbjogdHJ1ZSwgbmJMaW5lczogMCB9O1xuXG4gIC8qKlxuICAgKiBASW5wdXQgOiBBbmd1bGFyXG4gICAqIEBkZXNjcmlwdGlvbiBBbiBpbnB1dCB0byBjdXN0b21pemUgdGhlIHJlc3VsdGxpc3RcbiAgICovXG4gIEBJbnB1dCgpIHB1YmxpYyBvcHRpb25zOiBSZXN1bHRMaXN0T3B0aW9ucztcblxuICBASW5wdXQoKSBwdWJsaWMgZmV0Y2hTdGF0ZSA9IHsgZW5kTGlzdFVwOiB0cnVlLCBlbmRMaXN0RG93bjogZmFsc2UgfTtcbiAgLyoqXG4gICAqIEBJbnB1dCA6IEFuZ3VsYXJcbiAgICogQGRlc2NyaXB0aW9uIExpc3Qgb2YgdGhlIGZpZWxkcyBkaXNwbGF5ZWQgaW4gdGhlIHRhYmxlIChpbmNsdWRpbmcgdGhlIGlkIGZpZWxkKVxuICAgKiAtIGZpZWxkTmFtZSA6IE5hbWUvcGF0aCBvZiB0aGUgZmllbGQgdG8gYWRkIHRvIGxpc3RcbiAgICogLSBjb2x1bW5OYW1lIDogTmFtZSBvZiB0aGUgZmllbGQgdGhhdCB3aWxsIGJlIGRpc3BsYXllZCBvbiB0aGUgbGlzdCBjb2x1bW5cbiAgICogLSBkYXRhVHlwZSA6IFVuaXQgb2YgdGhlIGZpZWxkIHZhbHVlcyBpZiBpdCBleGlzdHMgKGRlZ3JlZSwgcGVyY2VudGFnZSwgZXRjKVxuICAgKiAtIHVzZUNvbG9yU2VydmljZSA6IFdoZXRoZXIgdG8gY29sb3JpemUgdmFsdWVzIG9uIGNlbGxzIG9mIHRoZSBsaXN0IHdpdGggYSBjb2xvciBnZW5lcmF0ZWQgZnJvbSB0aGUgZmllbGQgdmFsdWVcbiAgICogTk9URSA6IFRoaXMgbGlzdCBzaG91bGQgaW5jbHVkZSB0aGUgSUQgZmllbGQuIEl0IHdpbGwgYmUgdGhlIGlkIG9mIGVhY2ggaXRlbVxuICAgKi9cbiAgQElucHV0KCkgcHVibGljIGZpZWxkc0xpc3Q6IEFycmF5PHtcbiAgICBmaWVsZE5hbWU6IHN0cmluZztcbiAgICBjb2x1bW5OYW1lOiBzdHJpbmc7XG4gICAgZGF0YVR5cGU6IHN0cmluZztcbiAgICB1c2VDb2xvclNlcnZpY2U/OiBib29sZWFuO1xuICB9PjtcblxuICAvKipcbiAgICogQElucHV0IDogQW5ndWxhclxuICAgKiBAZGVzY3JpcHRpb24gTGlzdCBvZiBmaWVsZE5hbWUtZmllbGRWYWx1ZSBtYXAuIEVhY2ggbWFwIGNvcnJlc3BvbmRzIHRvIGEgcm93L2dyaWQuXG4gICAqIEBub3RlIEluIG9yZGVyIHRvIGFwcGx5IGBzZWxlY3RJbkJldHdlZW5gIG1ldGhvZCBwcm9wZXJseSwgdGhpcyBsaXN0IG11c3QgYmUgYXNjZW5kaW5nbHkgc29ydGVkIG9uIHRoZSBpdGVtIGlkZW50aWZpZXIuXG4gICAqL1xuICBASW5wdXQoKSBwdWJsaWMgcm93SXRlbUxpc3Q6IEFycmF5PE1hcDxzdHJpbmcsIEl0ZW1EYXRhVHlwZT4+O1xuXG4gIC8qKlxuICAgKiBASW5wdXQgOiBBbmd1bGFyXG4gICAqIEBkZXNjcmlwdGlvbiBBIGNvbmZpZ3VyYXRpb24gb2JqZWN0IHRoYXQgc2V0cyBpZCBmaWVsZCwgdGl0bGUgZmllbGQgYW5kIHVybHNcbiAgICogdG8gaW1hZ2VzICYmIHRodW1ibmFpbHNcbiAgICovXG4gIEBJbnB1dCgpIHB1YmxpYyBmaWVsZHNDb25maWd1cmF0aW9uOiBGaWVsZHNDb25maWd1cmF0aW9uO1xuXG4gIC8qKlxuICAgKiBASW5wdXQgOiBBbmd1bGFyXG4gICAqIEBkZXNjcmlwdGlvbiBUaGUgdGFibGUgd2lkdGguIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0YWJsZVdpZHRoIHZhbHVlIGlzXG4gICAqIGVxdWFsIHRvIGNvbnRhaW5lciB3aWR0aC5cbiAgICovXG4gIEBJbnB1dCgpIHB1YmxpYyB0YWJsZVdpZHRoOiBudW1iZXIgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBASW5wdXQgOiBBbmd1bGFyXG4gICAqIEBkZXNjcmlwdGlvbiBUaGUgbnVtYmVyIG9mIGl0ZW1zIGxlZnQgb24gdGhlIGxpc3QvZ3JpZCB3aGVuIHNjcm9sbGluZyB1cCBvciBkb3duIHVwb24gd2hpY2ggbG9hZGluZyBuZXcgZGF0YSBpcyB0cmlnZ2VyZWQuXG4gICAqIFdoZW4gc2Nyb2xsaW5nIHVwIG9yIGRvd24sIG9uY2UgdGhlcmUgaXMgYG5MYXN0TGluZXNgIGl0ZW1zIGxlZnQgYXQgdGhlIHRvcCBvciBib3R0b20gb2YgdGhlIGxpc3QsIHByZXZpb3VzL25leHQgZGF0YSBpcyBsb2FkZWQuXG4gICAqIEBkZXByZWNhdGVkIG5MYXN0TGluZXMgaXMgZGVwcmVjYXRlZCBhbmQgdXNlZCBvbmx5IGlmIGBuYkxpbmVzQmVmb3JlRmV0Y2hgIGlzIG5vdCBzZXRcbiAgKi9cbiAgQElucHV0KCkgcHVibGljIG5MYXN0TGluZXM6IG51bWJlcjtcblxuICAvKipcbiAgICogQElucHV0IDogQW5ndWxhclxuICAgKiBAZGVzY3JpcHRpb24gVGhlIG51bWJlciBvZiBpdGVtcyBsZWZ0IG9uIHRoZSBsaXN0L2dyaWQgd2hlbiBzY3JvbGxpbmcgdXAgb3IgZG93biB1cG9uIHdoaWNoIGxvYWRpbmcgbmV3IGRhdGEgaXMgdHJpZ2dlcmVkLlxuICAgKiBXaGVuIHNjcm9sbGluZyB1cCBvciBkb3duLCBvbmNlIHRoZXJlIGlzIGBuYkxpbmVzQmVmb3JlRmV0Y2hgIGl0ZW1zIGxlZnQgYXQgdGhlIHRvcCBvciBib3R0b20gb2YgdGhlIGxpc3QsIHByZXZpb3VzL25leHRcbiAgICogZGF0YSBpcyBsb2FkZWQuXG4gICovXG4gIEBJbnB1dCgpIHB1YmxpYyBuYkxpbmVzQmVmb3JlRmV0Y2ggPSA1O1xuXG4gIC8qKlxuICAgKiBASW5wdXQgOiBBbmd1bGFyXG4gICAqIEBkZXNjcmlwdGlvbiBIZWlnaHQgb2YgdGhlIGRldGFpbCBncmlkIGRpdiAoR3JpZCBNb2RlKS5cbiAgICovXG4gIEBJbnB1dCgpIHB1YmxpYyBkZXRhaWxlZEdyaWRIZWlnaHQgPSAzMDA7XG5cbiAgLyoqXG4gICAqIEBJbnB1dCA6IEFuZ3VsYXJcbiAgICogQGRlc2NyaXB0aW9uIE51bWJlciBvZiBncmlkIGNvbHVtbnMgKEdyaWQgTW9kZSkuXG4gICAqL1xuICBASW5wdXQoKSBwdWJsaWMgbmJHcmlkQ29sdW1ucyA9IDQ7XG5cbiAgLyoqXG4gICAqIEBJbnB1dCA6IEFuZ3VsYXJcbiAgICogQGRlc2NyaXB0aW9uIExpc3Qgb2YgYWN0aW9ucyB0byBhcHBseSBvbiB0aGUgc2VsZWN0ZWQgaXRlbXMuXG4gICAqL1xuICBASW5wdXQoKSBwdWJsaWMgZ2xvYmFsQWN0aW9uc0xpc3QgPSBuZXcgQXJyYXk8QWN0aW9uPigpO1xuXG4gIC8qKlxuICAgKiBASW5wdXQgOiBBbmd1bGFyXG4gICAqIEBkZXNjcmlwdGlvbiBBIGRldGFpbGVkLWRhdGEtcmV0cmlldmVyIG9iamVjdCB0aGF0IGltcGxlbWVudHNcbiAgICogRGV0YWlsZWREYXRhUmV0cmlldmVyIGludGVyZmFjZS5cbiAgICovXG4gIEBJbnB1dCgpIHB1YmxpYyBkZXRhaWxlZERhdGFSZXRyaWV2ZXI6IERldGFpbGVkRGF0YVJldHJpZXZlciA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEBJbnB1dCA6IEFuZ3VsYXJcbiAgICogQGRlc2NyaXB0aW9uIExpc3Qgb2YgaXRlbXMgaWRzIHRoYXQgYXJlIGluIGEgaW5kZXRlcm1pbmF0ZWQgc3RhdHVzLlxuICAgKi9cbiAgQElucHV0KCkgcHVibGljIGluZGV0ZXJtaW5hdGVkSXRlbXM6IFNldDxzdHJpbmc+ID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgLyoqXG4gICAqIEBJbnB1dCA6IEFuZ3VsYXJcbiAgICogQGRlc2NyaXB0aW9uIExpc3Qgb2YgaXRlbXMgaWRzIHRoYXQgYXJlIGluIGEgc2VsZWN0ZWQgc3RhdHVzLlxuICAqL1xuICBASW5wdXQoKSBwdWJsaWMgc2VsZWN0ZWRJdGVtczogU2V0PHN0cmluZz4gPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuICAvKipcbiAgICogQElucHV0IDogQW5ndWxhclxuICAgKiBAZGVzY3JpcHRpb24gTWFwIDxpdGVtSWQsIFNldDxhY3Rpb25JZHM+PiA6IGZvciBlYWNoIGl0ZW0sIGdpdmVzIHRoZSBsaXN0IG9mIGFjdGl2YXRlZCBhY3Rpb25zLlxuICAqL1xuICBASW5wdXQoKSBwdWJsaWMgYWN0aXZhdGVkQWN0aW9uc1Blckl0ZW06IE1hcDxzdHJpbmcsIFNldDxzdHJpbmc+PiA9IG5ldyBNYXA8c3RyaW5nLCBTZXQ8c3RyaW5nPj4oKTtcblxuICAvKipcbiAgICogQElucHV0IDogQW5ndWxhclxuICAgKiBAZGVzY3JpcHRpb24gTGlzdCBvZiBpdGVtcyBpZHMgdG8gYmUgaGlnaGxpZ2h0ZWQuXG4gICAqL1xuICBASW5wdXQoKSBwdWJsaWMgaGlnaGxpZ2h0SXRlbXM6IFNldDxzdHJpbmc+ID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgLyoqXG4gICAqIEBJbnB1dCA6IEFuZ3VsYXJcbiAgICogQGRlc2NyaXB0aW9uIE1vZGUgb2YgcmVwcmVzZW50YXRpb24gOiBgbGlzdGAgb3IgYGdyaWRgLlxuICAgKi9cbiAgQElucHV0KCkgcHVibGljIGRlZmF1dE1vZGU6IE1vZGVFbnVtO1xuXG4gIC8qKlxuICogQElucHV0IDogQW5ndWxhclxuICogQGRlc2NyaXB0aW9uIFdoZXRoZXIgdGhlIGJvZHkgdGFibGUgaXMgaGlkZGVuIG9yIG5vdC5cbiAqL1xuICBASW5wdXQoKSBwdWJsaWMgaXNCb2R5SGlkZGVuOiBib29sZWFuO1xuICAvKipcbiAgICogQElucHV0IDogQW5ndWxhclxuICAgKiBAZGVzY3JpcHRpb24gV2hldGhlciBmaWx0ZXJzIG9uIGxpc3QgYXJlIGRpc3BsYXllZC5cbiAgICovXG4gIEBJbnB1dCgpIHB1YmxpYyBkaXNwbGF5RmlsdGVycyA9IHRydWU7XG5cbiAgLyoqXG4gICAqIEBJbnB1dCA6IEFuZ3VsYXJcbiAgICogQGRlc2NyaXB0aW9uIFdoZXRoZXIgdGhlIHNvcnQgb24gdGhlIGdlb21ldHJ5IGlzIGVuYWJsZWQuXG4gICAqL1xuICBASW5wdXQoKSBwdWJsaWMgaXNHZW9Tb3J0RW5hYmxlZCA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBASW5wdXQgOiBBbmd1bGFyXG4gICAqIEBkZXNjcmlwdGlvbiBXaGV0aGVyIHRoZSBzb3J0IG9uIHRoZSBnZW9tZXRyeSBpcyBhY3RpdmF0ZWRcbiAgICovXG4gIEBJbnB1dCgpIHB1YmxpYyBpc0dlb1NvcnRBY3RpdmF0ZWQgPSBmYWxzZTtcblxuICAvKipcbiAgICogQElucHV0IDogQW5ndWxhclxuICAgKiBAZGVzY3JpcHRpb24gVGhlIGNvbHVtbiB0aGF0IGlzIGN1cnJlbnRseSBzb3J0ZWQgb25cbiAgICovXG4gIEBJbnB1dCgpIHB1YmxpYyBjdXJyZW50U29ydGVkQ29sdW1uOiBDb2x1bW47XG5cbiAgLyoqXG4gICAqIEBJbnB1dCA6IEFuZ3VsYXJcbiAgICogQGRlc2NyaXB0aW9uIEEgZmllbGROYW1lLWZpZWxkVmFsdWUgbWFwIG9mIGZpZWxkcyB0byBmaWx0ZXIuXG4gICAqL1xuXG4gIEBJbnB1dCgpIHB1YmxpYyBmaWx0ZXJzTWFwOiBNYXA8c3RyaW5nLCBJdGVtRGF0YVR5cGU+O1xuXG4gIC8qKlxuICAgKiBASW5wdXQgOiBBbmd1bGFyXG4gICAqIEBkZXNjcmlwdGlvbiBBICBtYXAgb2YgZmllbGROYW1lLSBPYnNlcnZhYmxlIG9mIGFycmF5IHZhbHVlIGZvciBkcm9wZG93biBmaWx0ZXJcbiAgICovXG5cbiAgQElucHV0KCkgcHVibGljIGRyb3BEb3duTWFwVmFsdWVzOiBNYXA8c3RyaW5nLCBPYnNlcnZhYmxlPEFycmF5PHN0cmluZz4+PjtcbiAgLyoqXG4gICAqIEBJbnB1dCA6IEFuZ3VsYXJcbiAgICogQGRlc2NyaXB0aW9uIEEgIGJvb2xlYW4gdG8gc2hvdyBvciBoaWRlIHRoZWFkIG9mIHRhYmxlXG4gICAqL1xuICBASW5wdXQoKSBwdWJsaWMgZGlzcGxheVRoZWFkID0gdHJ1ZTtcblxuICAvKipcbiAgICogQElucHV0IDogQW5ndWxhclxuICAgKiBAZGVzY3JpcHRpb24gTGlzdCBvZiBba2V5LCBjb2xvcl0gY291cGxlcyB0aGF0IGFzc29jaWF0ZXMgYSBoZXggY29sb3IgdG8gZWFjaCBrZXlcbiAgICovXG4gIEBJbnB1dCgpIHB1YmxpYyBrZXlzVG9Db2xvcnM6IEFycmF5PFtzdHJpbmcsIHN0cmluZ10+O1xuXG4gIC8qKlxuICAgKiBASW5wdXQgOiBBbmd1bGFyXG4gICAqIEBkZXNjcmlwdGlvbiBLbm93aW5nIHRoYXQgc2F0dXJhdGlvbiBzY2FsZSBpcyBbMCwgMV0sIGBjb2xvcnNTYXR1cmF0aW9uV2VpZ2h0YCBpcyBhXG4gICAqIGZhY3RvciAoYmV0d2VlbiAwIGFuZCAxKSB0aGF0IHRpZ2h0ZW5zIHRoaXMgc2NhbGUgdG8gWygxLWNvbG9yc1NhdHVyYXRpb25XZWlnaHQpLCAxXS5cbiAgICogVGhlcmVmb3JlIHNhdHVyYXRpb24gb2YgZ2VuZXJhdGVkIGNvbG9ycyB3aWxsIGJlIHdpdGhpbiB0aGlzIHRpZ2h0ZW5lZCBzY2FsZS4uXG4gICAqL1xuICBASW5wdXQoKSBwdWJsaWMgY29sb3JzU2F0dXJhdGlvbldlaWdodCA9IDEgLyAyO1xuXG4gIC8qKlxuICAgKiBASW5wdXQgOiBBbmd1bGFyXG4gICAqIEBkZXNjcmlwdGlvbiBXaGV0aGVyIHRvIGFsbG93IGNvbG9yaXppbmcgY2VsbHMgYW5kIHRoZSBncmlkIHRpbGUgb2YgdGhlIGxpc3QuXG4gICAqL1xuICBASW5wdXQoKSBwdWJsaWMgdXNlQ29sb3JTZXJ2aWNlID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIEBJbnB1dCA6IEFuZ3VsYXJcbiAgICAqIEBkZXNjcmlwdGlvbiBUaGUgd2F5IHRoZSBjZWxsIHdpbGwgYmUgY29sb3JpemVkOiBmaWxsZWQgb3Igb3V0bGluZWRcbiAgICovXG4gIEBJbnB1dCgpIHB1YmxpYyBjZWxsQmFja2dyb3VuZFN0eWxlOiBDZWxsQmFja2dyb3VuZFN0eWxlRW51bSA9IENlbGxCYWNrZ3JvdW5kU3R5bGVFbnVtLmZpbGxlZDtcbiAgLyoqXG4gICAqIEBJbnB1dCA6IEFuZ3VsYXJcbiAgICogQGRlc2NyaXB0aW9uIEEgIGl0ZW0gdG8gc2hvdyBkZXRhaWxcbiAgICovXG4gIEBJbnB1dCgpIHB1YmxpYyBzZWxlY3RlZEdyaWRJdGVtOiBJdGVtO1xuICAvKipcbiAgICogQElucHV0XG4gICAqIEBkZXNjcmlwdGlvbiBXaGV0aGVyIGRpc3BsYXkgZ3JvdXAgd2l0aCBubyBkZXRhaWwuXG4gICAqL1xuICBASW5wdXQoKSBwdWJsaWMgc2hvd0VtcHR5R3JvdXAgPSBmYWxzZTtcbiAgLyoqXG4gICAqIEBJbnB1dFxuICAgKiBAZGVzY3JpcHRpb24gV2hldGhlciBkaXNwbGF5IHRoZSBkZXRhaWxsZWQgcGFydCBpbiBncmlkIG1vZGUuXG4gICAqL1xuICBASW5wdXQoKSBwdWJsaWMgaXNEZXRhaWxsZWRHcmlkT3BlbiA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBASW5wdXRcbiAgICogQGRlc2NyaXB0aW9uIEhvdyB0byBmaXQgdGhlIHRodW1ibmFpbCB0byB0aGUgdGlsZTpcbiAgICogLSBgaGVpZ2h0YCBmaXQgdGhlIGhlaWdodCBvZiB0aGUgdGh1bWJuYWlsLlxuICAgKiAtIGB3aWR0aGAgZml0IHRoZSB3aWR0aCBvZiB0aGUgdGh1bWJuYWlsLlxuICAgKiAtIGBjb250YWluYCBmaXQgdGhlIHdob2xldGh1bWJuYWlsLlxuICAgKi9cbiAgQElucHV0KCkgcHVibGljIHRodW1ibmFpbEZpdDogVGh1bWJuYWlsRml0RW51bSA9IFRodW1ibmFpbEZpdEVudW0uY29udGFpbjtcblxuICAvKipcbiAgICogQE91dHB1dCA6IEFuZ3VsYXJcbiAgICogQGRlc2NyaXB0aW9uIEVtaXRzIHRoZSBldmVudCBvZiBzb3J0aW5nIGRhdGEgb24gdGhlIHNwZWNpZmllZCBjb2x1bW4uXG4gICAqL1xuICBAT3V0cHV0KCkgcHVibGljIHNvcnRDb2x1bW5FdmVudDogU3ViamVjdDx7IGZpZWxkTmFtZTogc3RyaW5nOyBzb3J0RGlyZWN0aW9uOiBTb3J0RW51bTsgfT4gPVxuICAgIG5ldyBTdWJqZWN0PHsgZmllbGROYW1lOiBzdHJpbmc7IHNvcnREaXJlY3Rpb246IFNvcnRFbnVtOyB9PigpO1xuXG4gIC8qKlxuICAgKiBAT3V0cHV0IDogQW5ndWxhclxuICAgKiBAZGVzY3JpcHRpb24gRW1pdHMgdGhlIGV2ZW50IG9mIGdlby1zb3J0aW5nIGRhdGEuXG4gICAqL1xuICBAT3V0cHV0KCkgcHVibGljIGdlb1NvcnRFdmVudDogU3ViamVjdDxzdHJpbmc+ID0gbmV3IFN1YmplY3Q8c3RyaW5nPigpO1xuXG4gIC8qKlxuICAgKiBAT3V0cHV0IDogQW5ndWxhclxuICAgKiBAZGVzY3JpcHRpb24gRW1pdHMgdGhlIGV2ZW50IG9mIGdlby1zb3J0aW5nIGRhdGEuXG4gICAqL1xuICBAT3V0cHV0KCkgcHVibGljIGdlb0F1dG9Tb3J0RXZlbnQ6IFN1YmplY3Q8Ym9vbGVhbj4gPSBuZXcgU3ViamVjdDxib29sZWFuPigpO1xuXG4gIC8qKlxuICAgKiBAT3V0cHV0IDogQW5ndWxhclxuICAgKiBAZGVzY3JpcHRpb24gRW1pdHMgdGhlIGxpc3Qgb2YgaXRlbXMgaWRlbnRpZmllcnMgd2hvc2UgY2hlY2tib3hlcyBhcmUgc2VsZWN0ZWQuXG4gICAqL1xuICBAT3V0cHV0KCkgcHVibGljIHNlbGVjdGVkSXRlbXNFdmVudDogU3ViamVjdDxBcnJheTxzdHJpbmc+PiA9IG5ldyBTdWJqZWN0PEFycmF5PHN0cmluZz4+KCk7XG5cbiAgLyoqXG4gICAqIEBPdXRwdXQgOiBBbmd1bGFyXG4gICAqIEBkZXNjcmlwdGlvbiBFbWl0cyBvbmUgaXRlbSBpZGVudGlmaWVyIHRoYXQgaXMgaG92ZXJlZC4uXG4gICAqL1xuICBAT3V0cHV0KCkgcHVibGljIGNvbnN1bHRlZEl0ZW1FdmVudDogU3ViamVjdDxFbGVtZW50SWRlbnRpZmllcj4gPSBuZXcgU3ViamVjdDxFbGVtZW50SWRlbnRpZmllcj4oKTtcblxuICAvKipcbiAgICogQE91dHB1dCA6IEFuZ3VsYXJcbiAgICogQGRlc2NyaXB0aW9uIEVtaXRzIHRoZSBpdGVtIHRoYXQgaXMgY2xpY2tlZCBvbi5cbiAgICovXG4gIEBPdXRwdXQoKSBwdWJsaWMgY2xpY2tPbkl0ZW1FdmVudCA9IG5ldyBTdWJqZWN0PEVsZW1lbnRJZGVudGlmaWVyPigpO1xuXG4gIC8qKlxuICAgKiBAT3V0cHV0IDogQW5ndWxhclxuICAgKiBAZGVzY3JpcHRpb24gRW1pdHMgdGhlIGZpbHRyZWQgZmllbGRzIG1hcCAoZmllbGROYW1lLWZpZWxkVmFsdWUgbWFwKS5cbiAgICovXG4gIEBPdXRwdXQoKSBwdWJsaWMgc2V0RmlsdGVyc0V2ZW50OiBTdWJqZWN0PE1hcDxzdHJpbmcsIEl0ZW1EYXRhVHlwZT4+ID0gbmV3IFN1YmplY3QoKTtcblxuICAvKipcbiAgICogQE91dHB1dCA6IEFuZ3VsYXJcbiAgICogQGRlc2NyaXB0aW9uIEVtaXRzIHRoZSByZXF1ZXN0IG9mIG1vcmUgZGF0YSB0byBsb2FkLiBUaGUgZW1pdHRlZCBudW1iZXIgaXMgdGhlIG51bWJlciBvZiB0aW1lcyB0aGlzIGV2ZW50IGhhcyBiZWVuIGVtaXR0ZWQuXG4gICAqIEBkZXByZWNhdGVkIG1vcmVEYXRhRXZlbnQgY2FuIGJlIHJlcGxhY2VkIGJ5IGBwYWdpbmF0aW9uRXZlbnRgXG4gICAqL1xuICBAT3V0cHV0KCkgcHVibGljIG1vcmVEYXRhRXZlbnQ6IFN1YmplY3Q8bnVtYmVyPiA9IG5ldyBTdWJqZWN0PG51bWJlcj4oKTtcblxuICAvKipcbiAgICogQE91dHB1dCA6IEFuZ3VsYXJcbiAgICogQGRlc2NyaXB0aW9uIEVtaXRzIHRoZSByZXF1ZXN0IG9mIGEgbmV3IHBhZ2UgdG8gbG9hZC5cbiAgICogVGhlIGVtaXR0ZWQgUGFnZVF1ZXJ5IGNvbnRhaW5zIHRoZSByZWZlcmVuY2UgaXRlbSBmcm9tIHdoaWNoIHRoZSBuZXcgcGFnZSBpcyBsb2FkZWRcbiAgICogYW5kIHdoZXRoZXIgaXQgaXMgdGhlIHByZXZpb3VzIG9yIHRoZSBuZXh0IHBhZ2UuXG4gICAqL1xuICBAT3V0cHV0KCkgcHVibGljIHBhZ2luYXRpb25FdmVudDogU3ViamVjdDxQYWdlUXVlcnk+ID0gbmV3IFN1YmplY3Q8UGFnZVF1ZXJ5PigpO1xuXG4gIC8qKlxuICAgKiBAT3V0cHV0IDogQW5ndWxhclxuICAgKiBAZGVzY3JpcHRpb24gRW1pdHMgdGhlIGV2ZW50IG9mIGFwcGx5aW5nIHRoZSBzcGVjaWZpZWQgYWN0aW9uIG9uIHRoZSBzcGVjaWZpZWQgaXRlbS5cbiAgICovXG4gIEBPdXRwdXQoKSBwdWJsaWMgYWN0aW9uT25JdGVtRXZlbnQ6IFN1YmplY3Q8eyBhY3Rpb246IEFjdGlvbjsgZWxlbWVudGlkZW50aWZpZXI6IEVsZW1lbnRJZGVudGlmaWVyOyB9PiA9XG4gICAgbmV3IFN1YmplY3Q8eyBhY3Rpb246IEFjdGlvbjsgZWxlbWVudGlkZW50aWZpZXI6IEVsZW1lbnRJZGVudGlmaWVyOyB9PigpO1xuXG4gIC8qKlxuICAgKiBAT3V0cHV0IDogQW5ndWxhclxuICAgKiBAZGVzY3JpcHRpb24gRW1pdHMgdGhlIGV2ZW50IG9mIGFwcGx5aW5nIHRoZSBzcGVjaWZpZWQgZ2xvYmFsYiBhY3Rpb24gb24gdGhlIHNlbGVjdGVkIGl0ZW1zLlxuICAgKi9cbiAgQE91dHB1dCgpIHB1YmxpYyBnbG9iYWxBY3Rpb25FdmVudDogU3ViamVjdDxBY3Rpb24+ID0gbmV3IFN1YmplY3Q8QWN0aW9uPigpO1xuXG4gIC8qKlxuICAgKiBAT3V0cHV0IDogQW5ndWxhclxuICAgKiBAZGVzY3JpcHRpb24gRW1pdHMgdGhlIGV2ZW50IG9mIGFwcGx5aW5nIHRoZSBzcGVjaWZpZWQgZ2xvYmFsIGFjdGlvbiBvbiB0aGUgc2VsZWN0ZWQgaXRlbXMuXG4gICAqL1xuICBAT3V0cHV0KCkgcHVibGljIGNvbHVtbkZpbHRlckNoYW5nZWQ6IFN1YmplY3Q8Q29sdW1uPiA9IG5ldyBTdWJqZWN0PENvbHVtbj4oKTtcblxuICAvKipcbiAgICogQE91dHB1dCA6IEFuZ3VsYXJcbiAgICogQGRlc2NyaXB0aW9uIEVtaXRzIHRoZSBldmVudCBvZiBjbGlja2luZyBvbiBhIGdyaWQgdGlsZS5cbiAgICovXG4gIEBPdXRwdXQoKSBwdWJsaWMgY2xpY2tPblRpbGU6IFN1YmplY3Q8SXRlbT4gPSBuZXcgU3ViamVjdDxJdGVtPigpO1xuXG4gIC8qKlxuICAgKiBAT3V0cHV0IDogQW5ndWxhclxuICAgKiBAZGVzY3JpcHRpb24gRW1pdHMgdGhlIGV2ZW50IG9mIGNsaWNraW5nIG9uIHRoZSBzd2l0Y2ggbW9kZSBidXR0b24uIEVtaXRzIHRoZSBuZXcgbW9kZSAoZ3JpZCBvciBsaXN0KS5cbiAgICovXG4gIEBPdXRwdXQoKSBwdWJsaWMgY2hhbmdlUmVzdWx0TW9kZTogU3ViamVjdDxNb2RlRW51bT4gPSBuZXcgU3ViamVjdDxNb2RlRW51bT4oKTtcblxuICAvKipcbiAgICogQE91dHB1dCA6IEFuZ3VsYXJcbiAgICogQGRlc2NyaXB0aW9uIEVtaXRzIHRoZSBjdXJyZW50IHZpc2libGUgaXRlbXMgaW4gdGhlIHZpZXdwb3J0LlxuICAgKi9cbiAgQE91dHB1dCgpIHB1YmxpYyB2aXNpYmxlSXRlbXM6IFN1YmplY3Q8QXJyYXk8SXRlbT4+ID0gbmV3IFN1YmplY3Q8QXJyYXk8SXRlbT4+KCk7XG5cbiAgLyoqXG4gICogQE91dHB1dCA6IEFuZ3VsYXJcbiAgKiBAZGVzY3JpcHRpb24gRW1pdHMgb24gY2hhbmdlcyByb3dJdGVtTGlzdCBjdXJyZW50IHZhbHVlLlxuICAqL1xuICBAT3V0cHV0KCkgcHVibGljIG9uQ2hhbmdlSXRlbXM6IFN1YmplY3Q8QXJyYXk8YW55Pj4gPSBuZXcgU3ViamVjdDxBcnJheTxhbnk+PigpO1xuXG4gIC8qKlxuICAgKiBAT3V0cHV0IDogQW5ndWxhclxuICAgKiBAZGVzY3JpcHRpb24gRW1pdHMgd2hlbiBjaGFuZ2luZyBob3cgdGh1bWJuYWlscyBmaXQgaW4gdGhlaXIgZGl2LlxuICAgKi9cbiAgQE91dHB1dCgpIHB1YmxpYyB0aHVtYm5haWxGaXRFdmVudDogU3ViamVjdDxUaHVtYm5haWxGaXRFbnVtPiA9IG5ldyBTdWJqZWN0KCk7XG5cbiAgLyoqXG4gICAqIEBPdXRwdXQgOiBBbmd1bGFyXG4gICAqIEBkZXNjcmlwdGlvbiBFbWl0cyB3aGVuIHJlc3VsdCBsaXN0IGlzIHVwZGF0ZWQuXG4gICAqL1xuICBAT3V0cHV0KCkgcHVibGljIG9uUmVzdWx0TGlzdFVwZGF0ZTogRXZlbnRFbWl0dGVyPGJvb2xlYW4+ID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xuXG4gIC8qKlxuICAgKiBAT3V0cHV0IDogQW5ndWxhclxuICAgKiBAZGVzY3JpcHRpb24gRW1pdHMgd2hlbiB0aGUgbGlzdCBpcyByZWFkeS5cbiAgICovXG4gIEBPdXRwdXQoKSBwdWJsaWMgb25MaXN0TG9hZGVkID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xuXG4gIHB1YmxpYyBjb2x1bW5zOiBBcnJheTxDb2x1bW4+O1xuICBwdWJsaWMgaXRlbXM6IEFycmF5PEl0ZW0+ID0gbmV3IEFycmF5PEl0ZW0+KCk7XG4gIHB1YmxpYyBzb3J0ZWRDb2x1bW46IHsgY29sdW1uTmFtZTogc3RyaW5nOyBmaWVsZE5hbWU6IHN0cmluZzsgc29ydERpcmVjdGlvbjogU29ydEVudW07IH1cbiAgICA9IHsgY29sdW1uTmFtZTogJycsIGZpZWxkTmFtZTogJycsIHNvcnREaXJlY3Rpb246IFNvcnRFbnVtLmFzYyB9O1xuXG4gIC8vIEhlaWdodHMgb2YgdGFibGUgZWxlbWVudHNcbiAgcHVibGljIHRib2R5SGVpZ2h0OiBudW1iZXIgPSBudWxsO1xuICBwdWJsaWMgdGhlYWRIZWlnaHQ6IG51bWJlciA9IG51bGw7XG5cbiAgcHVibGljIE1vZGVFbnVtID0gTW9kZUVudW07XG4gIHB1YmxpYyBUaHVtYm5haWxGaXRFbnVtID0gVGh1bWJuYWlsRml0RW51bTtcbiAgcHVibGljIFBhZ2VFbnVtID0gUGFnZUVudW07XG4gIHB1YmxpYyBTb3J0RW51bSA9IFNvcnRFbnVtO1xuXG4gIHByaXZhdGUgaXRlcmFibGVSb3dzRGlmZmVyO1xuICBwcml2YXRlIGl0ZXJhYmxlQ29sdW1uc0RpZmZlcjtcblxuICBwdWJsaWMgaXNOZXh0UGFnZVJlcXVlc3RlZCA9IGZhbHNlO1xuICBwdWJsaWMgaXNQcmV2aW91c1BhZ2VSZXF1ZXN0ZWQgPSBmYWxzZTtcbiAgcHVibGljIGhhc0dyaWRNb2RlID0gZmFsc2U7XG4gIHB1YmxpYyByZXN1bHRNb2RlOiBNb2RlRW51bTtcbiAgcHVibGljIGFsbEl0ZW1zQ2hlY2tlZCA9IGZhbHNlO1xuXG4gIHB1YmxpYyBib3JkZXJTdHlsZSA9ICdzb2xpZCc7XG4gIHB1YmxpYyBkaXNwbGF5TGlzdEdyaWQgPSAnaW5saW5lJztcbiAgcHVibGljIGlzU2hpZnREb3duID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBkZWJvdW5jZXIgPSBuZXcgU3ViamVjdDxFbGVtZW50SWRlbnRpZmllcj4oKTtcbiAgcHJpdmF0ZSBzY3JvbGxEZWJvdW5jZXIgPSBuZXcgU3ViamVjdDxhbnk+KCk7XG4gIHByaXZhdGUgZW1pdFZpc2libGVJdGVtc0RlYm91bmNlciA9IG5ldyBTdWJqZWN0PGFueT4oKTtcblxuXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihpdGVyYWJsZVJvd3NEaWZmZXI6IEl0ZXJhYmxlRGlmZmVycywgaXRlcmFibGVDb2x1bW5zRGlmZmVyOiBJdGVyYWJsZURpZmZlcnMsIHByaXZhdGUgZWw6IEVsZW1lbnRSZWYsXG4gICAgcHJpdmF0ZSBjb2xvclNlcnZpY2U6IEFybGFzQ29sb3JTZXJ2aWNlLCBwdWJsaWMgdHJhbnNsYXRlOiBUcmFuc2xhdGVTZXJ2aWNlLCBwcml2YXRlIG5vdGlmaWVyOiBSZXN1bHRsaXN0Tm90aWZpZXJTZXJ2aWNlLFxuICAgIHByaXZhdGUgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZikge1xuICAgIHRoaXMuaXRlcmFibGVSb3dzRGlmZmVyID0gaXRlcmFibGVSb3dzRGlmZmVyLmZpbmQoW10pLmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLml0ZXJhYmxlQ29sdW1uc0RpZmZlciA9IGl0ZXJhYmxlQ29sdW1uc0RpZmZlci5maW5kKFtdKS5jcmVhdGUobnVsbCk7XG4gICAgLy8gUmVzaXplIHRoZSB0YWJsZSBoZWlnaHQgb24gd2luZG93IHJlc2l6ZVxuICAgIGZyb21FdmVudCh3aW5kb3csICdyZXNpemUnKVxuICAgICAgLnBpcGUoZGVib3VuY2VUaW1lKDUwMCkpXG4gICAgICAuc3Vic2NyaWJlKChldmVudDogRXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5zZXRUYWJsZUhlaWdodCgpO1xuICAgICAgfSk7XG4gICAgLy8gQWRkIGRlYm91bmNlIG9uIGhvdmVyIGl0ZW0gbGlzdFxuICAgIHRoaXMuZGVib3VuY2VyLnBpcGUoZGVib3VuY2VUaW1lKDUwMCkpLnN1YnNjcmliZShlbGVtZW50aWRlbnRpZmllciA9PiB0aGlzLmNvbnN1bHRlZEl0ZW1FdmVudC5uZXh0KGVsZW1lbnRpZGVudGlmaWVyKSk7XG4gICAgdGhpcy5zY3JvbGxEZWJvdW5jZXIucGlwZShkZWJvdW5jZVRpbWUoMTAwMCkpLnN1YnNjcmliZShwYWdlID0+IHRoaXMucGFnaW5hdGlvbkV2ZW50Lm5leHQocGFnZSkpO1xuICAgIHRoaXMuZW1pdFZpc2libGVJdGVtc0RlYm91bmNlci5waXBlKGRlYm91bmNlVGltZSgxMDAwKSkuc3Vic2NyaWJlKGV2ZW50ID0+IHRoaXMudmlzaWJsZUl0ZW1zLm5leHQoZXZlbnQpKTtcbiAgfVxuXG4gIEBIb3N0TGlzdGVuZXIoJ2RvY3VtZW50OmtleWRvd24uc2hpZnQnLCBbJyRldmVudCddKVxuICBwdWJsaWMgc2hpZnREb3duKF8pIHtcbiAgICB0aGlzLmlzU2hpZnREb3duID0gdHJ1ZTtcbiAgfVxuXG4gIEBIb3N0TGlzdGVuZXIoJ2RvY3VtZW50OmtleXVwLnNoaWZ0JywgWyckZXZlbnQnXSlcbiAgcHVibGljIHNoaWZ0VXAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICB0aGlzLmlzU2hpZnREb3duID0gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5yZXN1bHRNb2RlID0gKHRoaXMuZGVmYXV0TW9kZSAmJiAodGhpcy5kZWZhdXRNb2RlLnRvU3RyaW5nKCkgPT09ICdncmlkJyB8fFxuICAgICAgdGhpcy5kZWZhdXRNb2RlLnRvU3RyaW5nKCkgPT09IE1vZGVFbnVtLmdyaWQudG9TdHJpbmcoKSkpID8gTW9kZUVudW0uZ3JpZCA6IE1vZGVFbnVtLmxpc3Q7XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbihuZXcgUmVzdWx0TGlzdE9wdGlvbnMoKSwgdGhpcy5vcHRpb25zKTtcbiAgICBpZiAoISF0aGlzLmZpZWxkc0NvbmZpZ3VyYXRpb24pIHtcbiAgICAgIGlmICh0aGlzLmZpZWxkc0NvbmZpZ3VyYXRpb24udXJsVGh1bWJuYWlsVGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLmhhc0dyaWRNb2RlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xuICAgIHRoaXMub25MaXN0TG9hZGVkLm5leHQodHJ1ZSk7XG4gICAgdGhpcy5zZXRUYWJsZVdpZHRoKCk7XG4gICAgdGhpcy5zZXRUYWJsZUhlaWdodCgpO1xuICB9XG5cbiAgcHVibGljIGVtaXRUaHVtYm5haWxzRml0U3RhdHVzKGZpdENoYW5nZTogTWF0QnV0dG9uVG9nZ2xlQ2hhbmdlKTogdm9pZCB7XG4gICAgdGhpcy50aHVtYm5haWxGaXQgPSBUaHVtYm5haWxGaXRFbnVtW2ZpdENoYW5nZS52YWx1ZSBhcyBzdHJpbmddO1xuICAgIHRoaXMudGh1bWJuYWlsRml0RXZlbnQubmV4dCh0aGlzLnRodW1ibmFpbEZpdCk7XG4gIH1cblxuICBwdWJsaWMgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xuICAgIGlmIChjaGFuZ2VzWydkZWZhdXRNb2RlJ10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHRoaXMuZGVmYXV0TW9kZS50b1N0cmluZygpID09PSAnZ3JpZCcgfHwgdGhpcy5kZWZhdXRNb2RlLnRvU3RyaW5nKCkgPT09IE1vZGVFbnVtLmdyaWQudG9TdHJpbmcoKSkge1xuICAgICAgICB0aGlzLnJlc3VsdE1vZGUgPSBNb2RlRW51bS5ncmlkO1xuICAgICAgICB0aGlzLmRpc3BsYXlMaXN0R3JpZCA9ICdibG9jayc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlc3VsdE1vZGUgPSBNb2RlRW51bS5saXN0O1xuICAgICAgICB0aGlzLmRpc3BsYXlMaXN0R3JpZCA9ICdpbmxpbmUnO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXRUYWJsZUhlaWdodCgpO1xuICAgIH1cblxuICAgIGlmIChjaGFuZ2VzWydyb3dJdGVtTGlzdCddICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuaXRlbXMgPSBbXTtcbiAgICAgIC8vIFJlc2V0IHNlbGVjdGVkIGl0ZW1zIHdoZW4gZGF0YSBjaGFuZ2UgKGllIGEgZmlsdGVyIGlzIGFwcGxpZWQvcmVtb3ZlZCBvciBwYWdpbmF0aW9uIG9jY3VyKVxuICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1zID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgICB0aGlzLmlzUHJldmlvdXNQYWdlUmVxdWVzdGVkID0gZmFsc2U7XG5cbiAgICAgIC8vIElmIHRoZSBzZWxlY3RlZCBpdGVtIGlzIG5vdCBpbiB0aGUgY3VycmVudCBsaXN0IG9mIGl0ZW1zLCBjbG9zZSB0aGUgZGV0YWlsXG4gICAgICBjb25zdCBzZWxlY3RlZEl0ZW1JbkRhdGEgPSAhIXRoaXMuc2VsZWN0ZWRHcmlkSXRlbSAmJiB0aGlzLnJvd0l0ZW1MaXN0XG4gICAgICAgIC5tYXAoaXRlbSA9PiA8c3RyaW5nPml0ZW0uZ2V0KHRoaXMuZmllbGRzQ29uZmlndXJhdGlvbi5pZEZpZWxkTmFtZSkpXG4gICAgICAgIC5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkR3JpZEl0ZW0uaWRlbnRpZmllcik7XG4gICAgICBpZiAoISghIWNoYW5nZXNbJ3Jvd0l0ZW1MaXN0J10uY3VycmVudFZhbHVlICYmIHNlbGVjdGVkSXRlbUluRGF0YSkpIHtcbiAgICAgICAgdGhpcy5jbG9zZURldGFpbCh0cnVlKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5vbkNoYW5nZUl0ZW1zLm5leHQoY2hhbmdlc1sncm93SXRlbUxpc3QnXS5jdXJyZW50VmFsdWUpO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlc1snaXNEZXRhaWxsZWRHcmlkT3BlbiddICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuaXNEZXRhaWxsZWRHcmlkT3BlbiA9IGNoYW5nZXNbJ2lzRGV0YWlsbGVkR3JpZE9wZW4nXS5jdXJyZW50VmFsdWU7XG4gICAgfVxuICAgIGlmIChjaGFuZ2VzWydpbmRldGVybWluYXRlZEl0ZW1zJ10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICBpdGVtLmlzaW5kZXRlcm1pbmF0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pbmRldGVybWluYXRlZEl0ZW1zLmZvckVhY2goaWQgPT4ge1xuICAgICAgICAgIGlmIChpdGVtLmlkZW50aWZpZXIgPT09IGlkICYmICF0aGlzLnNlbGVjdGVkSXRlbXMuaGFzKGlkKSkge1xuICAgICAgICAgICAgaXRlbS5pc2luZGV0ZXJtaW5hdGVkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChjaGFuZ2VzWydzZWxlY3RlZEl0ZW1zJ10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICBpdGVtLmlzQ2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbXMuZm9yRWFjaChpZCA9PiB7XG4gICAgICAgICAgaWYgKGl0ZW0uaWRlbnRpZmllciA9PT0gaWQpIHtcbiAgICAgICAgICAgIGl0ZW0uaXNDaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnNldFNlbGVjdGVkSXRlbXModGhpcy5zZWxlY3RlZEl0ZW1zKTtcbiAgICB9XG4gICAgaWYgKGNoYW5nZXNbJ2hpZ2hsaWdodEl0ZW1zJ10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHRoaXMuaGlnaGxpZ2h0SXRlbXMuc2l6ZSA+IDApIHtcbiAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgIGlmICh0aGlzLmhpZ2hsaWdodEl0ZW1zLmhhcyhpdGVtLmlkZW50aWZpZXIpKSB7XG4gICAgICAgICAgICBpdGVtLmlzaGlnaExpZ2h0ID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXRlbS5pc2hpZ2hMaWdodCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgaXRlbS5pc2hpZ2hMaWdodCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjaGFuZ2VzWydmZXRjaFN0YXRlJ10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHRoaXMuZmV0Y2hTdGF0ZSAmJiB0aGlzLmZldGNoU3RhdGUuZW5kTGlzdFVwKSB7XG4gICAgICAgIHRoaXMuaXNQcmV2aW91c1BhZ2VSZXF1ZXN0ZWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmZldGNoU3RhdGUgJiYgdGhpcy5mZXRjaFN0YXRlLmVuZExpc3REb3duKSB7XG4gICAgICAgIHRoaXMuaXNOZXh0UGFnZVJlcXVlc3RlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoY2hhbmdlc1snY3VycmVudFNvcnRlZENvbHVtbiddICE9PSB1bmRlZmluZWQgJiYgY2hhbmdlc1snY3VycmVudFNvcnRlZENvbHVtbiddLmN1cnJlbnRWYWx1ZSkge1xuICAgICAgdGhpcy5zb3J0ZWRDb2x1bW4gPSB7XG4gICAgICAgIGNvbHVtbk5hbWU6IGNoYW5nZXNbJ2N1cnJlbnRTb3J0ZWRDb2x1bW4nXS5jdXJyZW50VmFsdWUuY29sdW1uTmFtZSxcbiAgICAgICAgZmllbGROYW1lOiBjaGFuZ2VzWydjdXJyZW50U29ydGVkQ29sdW1uJ10uY3VycmVudFZhbHVlLmZpZWxkTmFtZSxcbiAgICAgICAgc29ydERpcmVjdGlvbjogY2hhbmdlc1snY3VycmVudFNvcnRlZENvbHVtbiddLmN1cnJlbnRWYWx1ZS5zb3J0RGlyZWN0aW9uXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBuZ0RvQ2hlY2soKSB7XG4gICAgY29uc3QgY29sdW1uQ2hhbmdlcyA9IHRoaXMuaXRlcmFibGVDb2x1bW5zRGlmZmVyLmRpZmYodGhpcy5maWVsZHNMaXN0KTtcbiAgICBjb25zdCBpdGVtQ2hhbmdlcyA9IHRoaXMuaXRlcmFibGVSb3dzRGlmZmVyLmRpZmYodGhpcy5yb3dJdGVtTGlzdCk7XG4gICAgaWYgKGNvbHVtbkNoYW5nZXMpIHtcbiAgICAgIHRoaXMuc2V0Q29sdW1ucygpO1xuICAgIH1cbiAgICBpZiAoaXRlbUNoYW5nZXMpIHtcbiAgICAgIGxldCBpdGVtSW5kZXggPSAwO1xuICAgICAgaXRlbUNoYW5nZXMuZm9yRWFjaEFkZGVkSXRlbShpID0+IHtcbiAgICAgICAgdGhpcy5vbkFkZEl0ZW1zKGkuaXRlbSwgdGhpcy5pc1ByZXZpb3VzUGFnZVJlcXVlc3RlZCwgaXRlbUluZGV4KTtcbiAgICAgICAgaXRlbUluZGV4Kys7XG4gICAgICB9KTtcbiAgICAgIGl0ZW1DaGFuZ2VzLmZvckVhY2hSZW1vdmVkSXRlbShpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuaXNOZXh0UGFnZVJlcXVlc3RlZCkge1xuICAgICAgICAgIHRoaXMuaXRlbXMuc3BsaWNlKDAsIDEpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNQcmV2aW91c1BhZ2VSZXF1ZXN0ZWQpIHtcbiAgICAgICAgICB0aGlzLml0ZW1zLnNwbGljZSh0aGlzLml0ZW1zLmxlbmd0aCAtIDEsIDEpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8qKlxuICAgICAgICogVGhpcyB2YXJpYWJsZSBub3RpZmllcyB0aGUgUmVzdWx0U2Nyb2xsRGlyZWN0aXZlIHdoZXRoZXIgdGhlIGVuZCBvZiBsaXN0IGlzIHJlYWNoZWQgYXQgdG9wIG9yIGJvdHRvbVxuICAgICAgICovXG4gICAgICBpZiAodGhpcy5pc1ByZXZpb3VzUGFnZVJlcXVlc3RlZCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyB2YXJpYWJsZSBpcyBzZXQgYW5kIGdpdmVuIGFzIGFuIGlucHV0IHRvIHRoZSBgUmVzdWx0U2Nyb2xsRGlyZWN0aXZlYC5cbiAgICAgICAgICogVGhlIG9iamVjdGl2ZSBvZiB0aGlzIGlucHV0IGlzIHRvIGluZm9ybSBgUmVzdWx0U2Nyb2xsRGlyZWN0aXZlYCB0aGF0IGl0IHNob3VsZFxuICAgICAgICAgKiBtYWludGFpbiB0aGUgU2Nyb2xsIFBvc2l0aW9uIHdoZW4gQWRkaW5nIENvbnRlbnQgdG8gdGhlIHRvcCBvZiB0aGUgbGlzdFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zY3JvbGxPcHRpb25zID0geyBtYWludGFpblNjcm9sbFVwUG9zaXRpb246IHRydWUsIG1haW50YWluU2Nyb2xsRG93blBvc2l0aW9uOiBmYWxzZSwgbmJMaW5lczogaXRlbUluZGV4IH07XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pc05leHRQYWdlUmVxdWVzdGVkKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIHZhcmlhYmxlIGlzIHNldCBhbmQgZ2l2ZW4gYXMgYW4gaW5wdXQgdG8gdGhlIGBSZXN1bHRTY3JvbGxEaXJlY3RpdmVgLlxuICAgICAgICAgKiBUaGUgb2JqZWN0aXZlIG9mIHRoaXMgaW5wdXQgaXMgdG8gaW5mb3JtIGBSZXN1bHRTY3JvbGxEaXJlY3RpdmVgIHRoYXQgaXQgc2hvdWxkXG4gICAgICAgICAqIG1haW50YWluIHRoZSBTY3JvbGwgUG9zaXRpb24gd2hlbiBBZGRpbmcgQ29udGVudCB0byB0aGUgYm90dG9tIG9mIHRoZSBsaXN0XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNjcm9sbE9wdGlvbnMgPSB7IG1haW50YWluU2Nyb2xsVXBQb3NpdGlvbjogZmFsc2UsIG1haW50YWluU2Nyb2xsRG93blBvc2l0aW9uOiB0cnVlLCBuYkxpbmVzOiBpdGVtSW5kZXggfTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2V0U2VsZWN0ZWRJdGVtcyh0aGlzLnNlbGVjdGVkSXRlbXMpO1xuICAgICAgdGhpcy5pc05leHRQYWdlUmVxdWVzdGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmlzUHJldmlvdXNQYWdlUmVxdWVzdGVkID0gZmFsc2U7XG4gICAgICB0aGlzLm9uUmVzdWx0TGlzdFVwZGF0ZS5lbWl0KHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBlbWl0VmlzaWJsZUl0ZW1zKGl0ZW1zOiBBcnJheTxJdGVtPikge1xuICAgIHRoaXMuZW1pdFZpc2libGVJdGVtc0RlYm91bmNlci5uZXh0KGl0ZW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gRW1pdHMgdGhlIGV2ZW50IG9mIGFza2luZyBmb3IgbmV4dCBvciBwcmV2aW91cyBwYWdlIG9mIGl0ZW1zXG4gICAqIEBwYXJhbSByZWZlcmVuY2VJZGVudGlmaWVyIDogaXRlbSBpZGVudGlmaWVyIHVzZWQgYXMgcmVmZXJlbmNlIHRvIGZldGNoIHRoZSBuZXh0L3ByZXZpb3VzIHBhZ2VcbiAgICogQHBhcmFtIHdoaWNoUGFnZSA6IFdoZXRoZXIgdG8gZmV0Y2ggdGhlIGBuZXh0YCBvciBgcHJldmlvdXNgIHBhZ2VcbiAgICovXG4gIHB1YmxpYyBwYWdpbmF0ZShpdGVtRGF0YTogTWFwPHN0cmluZywgSXRlbURhdGFUeXBlPiwgd2hpY2hQYWdlOiBQYWdlRW51bSkge1xuICAgIHRoaXMuaXNOZXh0UGFnZVJlcXVlc3RlZCA9IHdoaWNoUGFnZSA9PT0gUGFnZUVudW0ubmV4dDtcbiAgICB0aGlzLmlzUHJldmlvdXNQYWdlUmVxdWVzdGVkID0gd2hpY2hQYWdlID09PSBQYWdlRW51bS5wcmV2aW91cztcbiAgICB0aGlzLnNjcm9sbERlYm91bmNlci5uZXh0KHsgcmVmZXJlbmNlOiBpdGVtRGF0YSwgd2hpY2hQYWdlOiB3aGljaFBhZ2UgfSk7XG5cbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gRW1pdHMgd2hpY2ggYWN0aW9uIHRvIGFwcGx5IG9uIHdoaWNoIGl0ZW0vcHJvZHVjdFxuICAgKi9cbiAgcHVibGljIHRyaWdnZXJBY3Rpb25Pbkl0ZW0oYWN0aW9uT25JdGVtOiB7IGFjdGlvbjogQWN0aW9uOyBlbGVtZW50aWRlbnRpZmllcjogRWxlbWVudElkZW50aWZpZXI7IH0pOiB2b2lkIHtcbiAgICB0aGlzLmFjdGlvbk9uSXRlbUV2ZW50Lm5leHQoYWN0aW9uT25JdGVtKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gU2V0cyBhbmQgZW1pdHMgdGhlIGFjdGlvbiB0byBhcHBseSB0byBhbGwgc2VsZWN0ZWQgaXRlbXNcbiAgICovXG4gIHB1YmxpYyBzZXRHbG9iYWxBY3Rpb24oYWN0aW9uOiBBY3Rpb24pIHtcbiAgICB0aGlzLmdsb2JhbEFjdGlvbkV2ZW50Lm5leHQoYWN0aW9uKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRHZW9Tb3J0QWN0aW9uKCkge1xuICAgIGlmICghdGhpcy5pc0dlb1NvcnRBY3RpdmF0ZWQpIHtcbiAgICAgIHRoaXMuZ2VvU29ydCgpO1xuICAgIH1cbiAgICB0aGlzLmlzR2VvU29ydEFjdGl2YXRlZCA9ICF0aGlzLmlzR2VvU29ydEFjdGl2YXRlZDtcbiAgICB0aGlzLmdlb0F1dG9Tb3J0RXZlbnQubmV4dCh0aGlzLmlzR2VvU29ydEFjdGl2YXRlZCk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIFNldHMgYW5kIGVtaXRzIHRoZSBbZmllbGROYW1lLCBmaWx0ZXJWYWx1ZV0gbWFwIG9mIGZpbHRlcmVkIGZpZWxkc1xuICAgKi9cbiAgLy8gRW1pdHMgYSBtYXAgb2Ygb25seSBmaWx0ZXJlZCBmaWVsZHNcbiAgcHVibGljIHNldEZpbHRlcnMoZmlsdGVyc01hcDogTWFwPHN0cmluZywgSXRlbURhdGFUeXBlPik6IHZvaWQge1xuICAgIHRoaXMuZmlsdGVyc01hcCA9IGZpbHRlcnNNYXA7XG4gICAgdGhpcy5zZXRGaWx0ZXJzRXZlbnQubmV4dCh0aGlzLmZpbHRlcnNNYXApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBTZXRzIGFuZCBlbWl0cyB0aGUgaWRlbnRpZmllcnMgbGlzdCBvZiBzZWxlY3RlZCBpdGVtc1xuICAgKi9cbiAgcHVibGljIHNldFNlbGVjdGVkSXRlbXMoc2VsZWN0ZWRJdGVtczogU2V0PHN0cmluZz4sIHN0b3BQcm9wYWdhdGlvbj86IGJvb2xlYW4pIHtcbiAgICAvLyByZW1vdmUgYWxsIHRleHQgc2VsZWN0aW9uIG9uIGN1cnJlbnQgZG9jdW1lbnRcbiAgICAvLyBTQiA6IFNvbWV0aW1lIGJsaW5raW5nIGFwcGVuZCwgbmVlZCB0byBiZSBkZWVwZW5lZFxuICAgIGRvY3VtZW50LmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpO1xuXG4gICAgdGhpcy5zZWxlY3RlZEl0ZW1zID0gc2VsZWN0ZWRJdGVtcztcbiAgICBpZiAoc2VsZWN0ZWRJdGVtcy5zaXplIDwgdGhpcy5pdGVtcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuYWxsSXRlbXNDaGVja2VkID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmICh0aGlzLml0ZW1zLmxlbmd0aCAhPT0gMCkge1xuICAgICAgdGhpcy5hbGxJdGVtc0NoZWNrZWQgPSB0aGlzLml0ZW1zLmZpbHRlcihpID0+IGkuaXNDaGVja2VkKS5sZW5ndGggPT09IHRoaXMuaXRlbXMubGVuZ3RoO1xuICAgIH1cbiAgICB0aGlzLnNlbGVjdGVkSXRlbXNFdmVudC5uZXh0KEFycmF5LmZyb20odGhpcy5zZWxlY3RlZEl0ZW1zKSk7XG4gICAgaWYgKHRoaXMuaXNTaGlmdERvd24gJiYgdGhpcy5zZWxlY3RlZEl0ZW1zLnNpemUgPiAxICYmICFzdG9wUHJvcGFnYXRpb24pIHtcbiAgICAgIHRoaXMuc2VsZWN0SW5CZXR3ZWVuKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBFbWl0cyB0aGUgY29sdW1uIHRvIHNvcnQgb24gYW5kIHRoZSBzb3J0IGRpcmVjdGlvblxuICAgKi9cbiAgcHVibGljIHNvcnQocGFyYW1Tb3J0ZWRDb2x1bW46IENvbHVtbik6IHZvaWQge1xuICAgIHRoaXMuaXNHZW9Tb3J0QWN0aXZhdGVkID0gZmFsc2U7XG4gICAgcGFyYW1Tb3J0ZWRDb2x1bW4uc29ydERpcmVjdGlvbiA9IHRoaXMuc29ydGVkQ29sdW1uLnNvcnREaXJlY3Rpb247XG4gICAgdGhpcy5jb2x1bW5zLmZvckVhY2goY29sdW1uID0+IHtcbiAgICAgIGlmIChjb2x1bW4uZmllbGROYW1lICE9PSBwYXJhbVNvcnRlZENvbHVtbi5maWVsZE5hbWUpIHtcbiAgICAgICAgY29sdW1uLnNvcnREaXJlY3Rpb24gPSBTb3J0RW51bS5ub25lO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuc29ydENvbHVtbkV2ZW50Lm5leHQocGFyYW1Tb3J0ZWRDb2x1bW4pO1xuICAgIC8vIFJlc2V0IGRpcmVjdGlvbiB0byBBU0MgYWZ0ZXIgYSBjbGVhblxuICAgIGlmICh0aGlzLnNvcnRlZENvbHVtbi5zb3J0RGlyZWN0aW9uID09PSBTb3J0RW51bS5ub25lKSB7XG4gICAgICB0aGlzLnNvcnRlZENvbHVtbi5zb3J0RGlyZWN0aW9uID0gU29ydEVudW0uYXNjO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzZXREaXJlY3Rpb24oZXZlbnQ6IFBvaW50ZXJFdmVudCkge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGlmICh0aGlzLnNvcnRlZENvbHVtbi5zb3J0RGlyZWN0aW9uID09PSBTb3J0RW51bS5hc2MpIHtcbiAgICAgIHRoaXMuc29ydGVkQ29sdW1uLnNvcnREaXJlY3Rpb24gPSBTb3J0RW51bS5kZXNjO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNvcnRlZENvbHVtbi5zb3J0RGlyZWN0aW9uID0gU29ydEVudW0uYXNjO1xuICAgIH1cbiAgICB0aGlzLnNvcnQodGhpcy5zb3J0ZWRDb2x1bW4gYXMgYW55KTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRTb3J0ZWRDb2x1bW4oZXZlbnQ6IE1hdFNlbGVjdENoYW5nZSkge1xuICAgIGlmIChldmVudC52YWx1ZSkge1xuICAgICAgdGhpcy5zb3J0ZWRDb2x1bW4gPSB7XG4gICAgICAgIGNvbHVtbk5hbWU6IGV2ZW50LnZhbHVlLmNvbHVtbk5hbWUsXG4gICAgICAgIGZpZWxkTmFtZTogZXZlbnQudmFsdWUuZmllbGROYW1lLFxuICAgICAgICBzb3J0RGlyZWN0aW9uOiB0aGlzLnNvcnRlZENvbHVtbj8uc29ydERpcmVjdGlvbiA/PyBTb3J0RW51bS5ub25lXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNvcnRlZENvbHVtbiA9IHtcbiAgICAgICAgY29sdW1uTmFtZTogJycsXG4gICAgICAgIGZpZWxkTmFtZTogJycsXG4gICAgICAgIHNvcnREaXJlY3Rpb246IFNvcnRFbnVtLm5vbmVcbiAgICAgIH07XG4gICAgfVxuICAgIHRoaXMuc29ydCh0aGlzLnNvcnRlZENvbHVtbiBhcyBhbnkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBFbWl0cyB0aGUgcmVxdWVzdCBldmVudCBvZiBnZW8tc29ydGluZ1xuICAgKi9cbiAgcHVibGljIGdlb1NvcnQoKTogdm9pZCB7XG4gICAgdGhpcy5jb2x1bW5zLmZvckVhY2goY29sdW1uID0+IHtcbiAgICAgIGlmICghY29sdW1uLmlzSWRGaWVsZCkge1xuICAgICAgICBjb2x1bW4uc29ydERpcmVjdGlvbiA9IFNvcnRFbnVtLm5vbmU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gUmVzZXQgY29sdW1uIGZpbHRlciB3aGVuIGdlbyBzb3J0IHJlcXVlc3RcbiAgICB0aGlzLnNvcnRlZENvbHVtbiA9IG51bGw7XG4gICAgdGhpcy5jdXJyZW50U29ydGVkQ29sdW1uID0gbnVsbDtcblxuICAgIHRoaXMuZ2VvU29ydEV2ZW50Lm5leHQodGhpcy5HRU9fRElTVEFOQ0UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBTZXRzIGFuZCBlbWl0cyB0aGUgaG92ZXJlZCBpdGVtJ3MgaWRlbnRpZmllclxuICAgKi9cbiAgcHVibGljIHNldENvbnN1bHRlZEl0ZW0oaWRlbnRpZmllcjogc3RyaW5nKSB7XG4gICAgY29uc3QgZWxlbWVudGlkZW50aWZpZXI6IEVsZW1lbnRJZGVudGlmaWVyID0ge1xuICAgICAgaWRGaWVsZE5hbWU6IHRoaXMuZmllbGRzQ29uZmlndXJhdGlvbi5pZEZpZWxkTmFtZSxcbiAgICAgIGlkVmFsdWU6IGlkZW50aWZpZXJcbiAgICB9O1xuICAgIHRoaXMuZGVib3VuY2VyLm5leHQoZWxlbWVudGlkZW50aWZpZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBjYWxsZWQgb24gaG92ZXJpbmcgYW4gaXRlbSA6IGl0cyBzZXRzIHRoZSBpdGVtcyBhY3Rpb25zICsgZW1pdHMgdGhlIGl0ZW0ncyBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSBpdGVtIGhvdmVyZWQgaXRlbVxuICAgKi9cbiAgcHVibGljIG9uRW50ZXJJdGVtKGl0ZW06IEl0ZW0pOiB2b2lkIHtcbiAgICB0aGlzLnNldENvbnN1bHRlZEl0ZW0oaXRlbS5pZGVudGlmaWVyKTtcbiAgICB0aGlzLm5vdGlmaWVyLm5vdGlmeUl0ZW1Ib3ZlcihpdGVtKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gY2FsbGVkIG9uIGxlYXZpbmcgYW4gaXRlbSA6IGVtaXRzIHRoZSBpdGVtJ3MgaWRlbnRpZmllclxuICAgKiBAcGFyYW0gaXRlbSBpdGVtIHByZXZpb3VzbHkgaG92ZXJlZFxuICAgKi9cbiAgcHVibGljIG9uTGVhdmVJdGVtKGl0ZW06IEl0ZW0pOiB2b2lkIHtcbiAgICB0aGlzLnNldENvbnN1bHRlZEl0ZW0oJ2xlYXZlLScgKyBpdGVtLmlkZW50aWZpZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBDYWxsZWQgd2hlbiBpdGVtIGlzIGNsaWNrZWQuIEl0IGlzIGluc3RhbnQgY29tcGFyZWQgdG8gb3RoZXIgZXZlbnRzXG4gICAqIEBwYXJhbSBpdGVtIEl0ZW0gY2xpY2tlZCBvblxuICAgKi9cbiAgcHVibGljIG9uQ2xpY2tJdGVtKGl0ZW06IEl0ZW0pOiB2b2lkIHtcbiAgICBjb25zdCBlbGVtZW50aWRlbnRpZmllcjogRWxlbWVudElkZW50aWZpZXIgPSB7XG4gICAgICBpZEZpZWxkTmFtZTogdGhpcy5maWVsZHNDb25maWd1cmF0aW9uLmlkRmllbGROYW1lLFxuICAgICAgaWRWYWx1ZTogaXRlbS5pZGVudGlmaWVyXG4gICAgfTtcbiAgICB0aGlzLmNsaWNrT25JdGVtRXZlbnQubmV4dChlbGVtZW50aWRlbnRpZmllcik7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIFNldHMgdGhlIGJvcmRlciBzdHlsZSBvZiByb3dzXG4gICAqL1xuICBwdWJsaWMgc2V0Qm9yZGVyU3R5bGUoYm9yZGVyU3R5bGUpOiB2b2lkIHtcbiAgICB0aGlzLmJvcmRlclN0eWxlID0gYm9yZGVyU3R5bGU7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIFNldHMgdGhlIHNlbGVjdGVkIGdyaWQgaXRlbVxuICAgKi9cbiAgcHVibGljIHNldFNlbGVjdGVkR3JpZEl0ZW0oaXRlbTogSXRlbSkge1xuICAgIHRoaXMuc2VsZWN0ZWRHcmlkSXRlbSA9IGl0ZW07XG4gICAgdGhpcy5pc0RldGFpbGxlZEdyaWRPcGVuID0gdHJ1ZTtcbiAgICB0aGlzLnNldFRhYmxlSGVpZ2h0KCk7XG4gICAgdGhpcy5jbGlja09uVGlsZS5uZXh0KGl0ZW0pO1xuICB9XG5cbiAgcHVibGljIGNsb3NlRGV0YWlsKGlzQ2xvc2VkOiBib29sZWFuKSB7XG4gICAgaWYgKGlzQ2xvc2VkKSB7XG4gICAgICB0aGlzLmlzRGV0YWlsbGVkR3JpZE9wZW4gPSBmYWxzZTtcbiAgICAgIHRoaXMuc2V0VGFibGVIZWlnaHQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIFNldHMgdGhlIGRpc3BsYXkgc3R5bGUgYWNjb3JkaW5nIHRvIHRoZSBtb2RlXG4gICAqL1xuICBwdWJsaWMgd2hpY2hNb2RlKHRvZ2dsZUNoYW5nZUV2ZW50OiBNYXRCdXR0b25Ub2dnbGVDaGFuZ2UpIHtcbiAgICBpZiAodG9nZ2xlQ2hhbmdlRXZlbnQudmFsdWUgPT09IE1vZGVFbnVtLmdyaWQudG9TdHJpbmcoKSkge1xuICAgICAgdGhpcy5yZXN1bHRNb2RlID0gTW9kZUVudW0uZ3JpZDtcbiAgICAgIHRoaXMuZGlzcGxheUxpc3RHcmlkID0gJ2Jsb2NrJztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZXN1bHRNb2RlID0gTW9kZUVudW0ubGlzdDtcbiAgICAgIHRoaXMuZGlzcGxheUxpc3RHcmlkID0gJ2lubGluZSc7XG4gICAgfVxuICAgIHRoaXMuY2hhbmdlUmVzdWx0TW9kZS5uZXh0KHRoaXMucmVzdWx0TW9kZSk7XG4gICAgdGhpcy5zZXRUYWJsZUhlaWdodCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBTZWxlY3RzIGFsbCB0aGUgaXRlbXNcbiAgICovXG4gIHB1YmxpYyBzZWxlY3RBbGxJdGVtcygpIHtcbiAgICB0aGlzLmFsbEl0ZW1zQ2hlY2tlZCA9ICF0aGlzLmFsbEl0ZW1zQ2hlY2tlZDtcbiAgICB0aGlzLnNlbGVjdGVkSXRlbXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICB0aGlzLml0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBpdGVtLmlzQ2hlY2tlZCA9IHRoaXMuYWxsSXRlbXNDaGVja2VkO1xuICAgICAgaXRlbS5pc2luZGV0ZXJtaW5hdGVkID0gZmFsc2U7XG4gICAgICBpZiAodGhpcy5hbGxJdGVtc0NoZWNrZWQpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1zLmFkZChpdGVtLmlkZW50aWZpZXIpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuc2V0U2VsZWN0ZWRJdGVtcyh0aGlzLnNlbGVjdGVkSXRlbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBTZWxlY3RzIGFsbCB0aGUgaXRlbXMgYmV0d2VlbiB0aGUgZmFyZXN0IGFuZCBuZWFyZXN0IHNlbGVjdGVkIGl0ZW1zXG4gICAqL1xuICBwdWJsaWMgc2VsZWN0SW5CZXR3ZWVuKCkge1xuICAgIGNvbnN0IHNlbGVjdGVkSXRlbXNMaXN0ID0gbmV3IEFycmF5KCk7XG4gICAgdGhpcy5pdGVtcy5mb3JFYWNoKGkgPT4ge1xuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtcy5oYXMoaS5pZGVudGlmaWVyKSkge1xuICAgICAgICBzZWxlY3RlZEl0ZW1zTGlzdC5wdXNoKGkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChzZWxlY3RlZEl0ZW1zTGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBmaXJzdEl0ZW0gPSBzZWxlY3RlZEl0ZW1zTGlzdFswXTtcbiAgICAgIGNvbnN0IGxhc3RJdGVtID0gc2VsZWN0ZWRJdGVtc0xpc3Rbc2VsZWN0ZWRJdGVtc0xpc3QubGVuZ3RoIC0gMV07XG4gICAgICBsZXQgaW5CZXR3ZWVuID0gZmFsc2U7XG4gICAgICB0aGlzLml0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgIGlmIChpdGVtID09PSBmaXJzdEl0ZW0pIHtcbiAgICAgICAgICBpbkJldHdlZW4gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtID09PSBsYXN0SXRlbSkge1xuICAgICAgICAgIGluQmV0d2VlbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbkJldHdlZW4pIHtcbiAgICAgICAgICBpdGVtLmlzQ2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgaXRlbS5pc2luZGV0ZXJtaW5hdGVkID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1zLmFkZChpdGVtLmlkZW50aWZpZXIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRoaXMuc2V0U2VsZWN0ZWRJdGVtcyh0aGlzLnNlbGVjdGVkSXRlbXMsIHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gRW1pdHMgdGhlIGNvbHVtbiB3aGVuIGEgZmlsdGVyIGlzIGFkZGVkZFxuICAgKi9cbiAgcHVibGljIGNvbHVtbkNoYW5nZWQoY29sdW06IENvbHVtbikge1xuICAgIHRoaXMuY29sdW1uRmlsdGVyQ2hhbmdlZC5uZXh0KGNvbHVtKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gQ2xlYXIgc2V0IG9mIHNlbGVjdGlvblxuICAgKi9cbiAgcHVibGljIGNsZWFyU2VsZWN0aW9uKCkge1xuICAgIHRoaXMuc2V0U2VsZWN0ZWRJdGVtcyhuZXcgU2V0KCkpO1xuICAgIHRoaXMuaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIGl0ZW0uaXNDaGVja2VkID0gZmFsc2U7XG4gICAgICBpdGVtLmlzaW5kZXRlcm1pbmF0ZWQgPSBmYWxzZTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgcHVibGljIGJ5RmllbGROYW1lKGl0ZW0xOiBDb2x1bW4sIGl0ZW0yOiBDb2x1bW4pIHtcbiAgICByZXR1cm4gaXRlbTEgJiYgaXRlbTIgPyBpdGVtMS5maWVsZE5hbWUgPT09IGl0ZW0yLmZpZWxkTmFtZSA6IGl0ZW0xID09PSBpdGVtMjtcbiAgfVxuXG4gIC8vIEJ1aWxkIHRoZSB0YWJsZSdzIGNvbHVtbnNcbiAgcHJpdmF0ZSBzZXRDb2x1bW5zKCkge1xuICAgIHRoaXMuY29sdW1ucyA9IG5ldyBBcnJheTxDb2x1bW4+KCk7XG4gICAgY29uc3QgY2hlY2tib3hDb2x1bW5XaWR0aCA9IDI1O1xuICAgIGNvbnN0IHRvZ2dsZUNvbHVtbldpZHRoID0gMzU7XG4gICAgLy8gaWQgY29sdW1uIGlzIHRoZSBmaXJzdCBvbmUgYW5kIGhhcyBhIHByZSBmaXhlZCB3aWR0aFxuICAgIC8vIEl0IGlzIHRoZSBjb2x1bW4gd2hlcmUgY2hlY2tib3hlcyBhcmUgcHV0XG4gICAgY29uc3QgaWRDb2x1bW4gPSBuZXcgQ29sdW1uKCcnLCB0aGlzLmZpZWxkc0NvbmZpZ3VyYXRpb24uaWRGaWVsZE5hbWUsICcnKTtcbiAgICBpZENvbHVtbi5pc0lkRmllbGQgPSB0cnVlO1xuICAgIGlkQ29sdW1uLndpZHRoID0gY2hlY2tib3hDb2x1bW5XaWR0aDtcbiAgICB0aGlzLmNvbHVtbnMudW5zaGlmdChpZENvbHVtbik7XG4gICAgdGhpcy5maWVsZHNMaXN0LmZvckVhY2goZmllbGQgPT4ge1xuICAgICAgY29uc3QgY29sdW1uID0gbmV3IENvbHVtbihmaWVsZC5jb2x1bW5OYW1lLCBmaWVsZC5maWVsZE5hbWUsIGZpZWxkLmRhdGFUeXBlKTtcbiAgICAgIGNvbHVtbi53aWR0aCA9ICh0aGlzLnRhYmxlV2lkdGggLSBjaGVja2JveENvbHVtbldpZHRoIC0gdG9nZ2xlQ29sdW1uV2lkdGgpIC8gdGhpcy5maWVsZHNMaXN0Lmxlbmd0aDtcbiAgICAgIGNvbHVtbi51c2VDb2xvclNlcnZpY2UgPSBmaWVsZC51c2VDb2xvclNlcnZpY2UgPyBmaWVsZC51c2VDb2xvclNlcnZpY2UgOiBmYWxzZTtcbiAgICAgIHRoaXMuY29sdW1ucy5wdXNoKGNvbHVtbik7XG4gICAgfSk7XG4gICAgLy8gYWRkIGEgY29sdW1uIGZvciB0b2dnbGUgaWNvblxuICAgIGNvbnN0IHRvZ2dsZUNvbHVtbiA9IG5ldyBDb2x1bW4oJycsICd0b2dnbGUnLCAnJyk7XG4gICAgdG9nZ2xlQ29sdW1uLmlzVG9nZ2xlRmllbGQgPSB0cnVlO1xuICAgIHRvZ2dsZUNvbHVtbi53aWR0aCA9IHRvZ2dsZUNvbHVtbldpZHRoO1xuICAgIHRoaXMuY29sdW1ucy5wdXNoKHRvZ2dsZUNvbHVtbik7XG4gIH1cblxuICBwcml2YXRlIG9uQWRkSXRlbXMoaXRlbURhdGE6IE1hcDxzdHJpbmcsIEl0ZW1EYXRhVHlwZT4sIGFkZE9uVG9wOiBib29sZWFuLCBpbmRleDogbnVtYmVyKSB7XG4gICAgY29uc3QgaXRlbSA9IG5ldyBJdGVtKHRoaXMuY29sdW1ucywgaXRlbURhdGEpO1xuICAgIGl0ZW0uaWRlbnRpZmllciA9IDxzdHJpbmc+aXRlbURhdGEuZ2V0KHRoaXMuZmllbGRzQ29uZmlndXJhdGlvbi5pZEZpZWxkTmFtZSk7XG4gICAgaWYgKHRoaXMuZmllbGRzQ29uZmlndXJhdGlvbi50aXRsZUZpZWxkTmFtZXMpIHtcbiAgICAgIGl0ZW0udGl0bGUgPSB0aGlzLmZpZWxkc0NvbmZpZ3VyYXRpb24udGl0bGVGaWVsZE5hbWVzXG4gICAgICAgIC5tYXAoZmllbGQgPT4gPHN0cmluZz5pdGVtRGF0YS5nZXQoZmllbGQuZmllbGRQYXRoICsgJ190aXRsZScpKVxuICAgICAgICAuam9pbignICcpO1xuICAgICAgaWYgKGl0ZW0udGl0bGUpIHtcbiAgICAgICAgaXRlbS50aXRsZSA9IGl0ZW0udGl0bGUudHJpbSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy51c2VDb2xvclNlcnZpY2UgJiYgdGhpcy5maWVsZHNDb25maWd1cmF0aW9uLmljb25Db2xvckZpZWxkTmFtZSkge1xuICAgICAgY29uc3QgY29sb3JGaWVsZFZhbHVlID0gPHN0cmluZz5pdGVtRGF0YS5nZXQodGhpcy5maWVsZHNDb25maWd1cmF0aW9uLmljb25Db2xvckZpZWxkTmFtZSArICdfdGl0bGUnKTtcbiAgICAgIGlmIChjb2xvckZpZWxkVmFsdWUpIHtcbiAgICAgICAgaXRlbS5jb2xvciA9IHRoaXMuY29sb3JTZXJ2aWNlLmdldENvbG9yKGNvbG9yRmllbGRWYWx1ZSwgdGhpcy5rZXlzVG9Db2xvcnMsIHRoaXMuY29sb3JzU2F0dXJhdGlvbldlaWdodCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmZpZWxkc0NvbmZpZ3VyYXRpb24udG9vbHRpcEZpZWxkTmFtZXMpIHtcbiAgICAgIGl0ZW0udG9vbHRpcCA9IHRoaXMuZmllbGRzQ29uZmlndXJhdGlvbi50b29sdGlwRmllbGROYW1lc1xuICAgICAgICAubWFwKGZpZWxkID0+IDxzdHJpbmc+aXRlbURhdGEuZ2V0KGZpZWxkLmZpZWxkUGF0aCArICdfdG9vbHRpcCcpKVxuICAgICAgICAuam9pbignICcpO1xuICAgICAgaWYgKGl0ZW0udG9vbHRpcCkge1xuICAgICAgICBpdGVtLnRvb2x0aXAgPSBpdGVtLnRvb2x0aXAudHJpbSgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmZpZWxkc0NvbmZpZ3VyYXRpb24uaWNvbikge1xuICAgICAgaXRlbS5pY29uID0gdGhpcy5maWVsZHNDb25maWd1cmF0aW9uLmljb247XG4gICAgfVxuICAgIGlmICh0aGlzLmZpZWxkc0NvbmZpZ3VyYXRpb24uaWNvbkNzc0NsYXNzKSB7XG4gICAgICBpdGVtLmljb25Dc3NDbGFzcyA9IDxzdHJpbmc+aXRlbURhdGEuZ2V0KHRoaXMuZmllbGRzQ29uZmlndXJhdGlvbi5pY29uQ3NzQ2xhc3MpO1xuICAgICAgaWYgKGl0ZW0uaWNvbkNzc0NsYXNzKSB7XG4gICAgICAgIGl0ZW0uaWNvbkNzc0NsYXNzID0gaXRlbS5pY29uQ3NzQ2xhc3MudHJpbSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpdGVtLmltYWdlRW5hYmxlZCA9IGl0ZW1EYXRhLmdldCgnaW1hZ2VFbmFibGVkJykgPT09ICd0cnVlJztcbiAgICBpdGVtLnRodW1ibmFpbEVuYWJsZWQgPSBpdGVtRGF0YS5nZXQoJ3RodW1ibmFpbEVuYWJsZWQnKSA9PT0gJ3RydWUnO1xuICAgIGl0ZW0uZGV0YWlsc1RpdGxlRW5hYmxlZCA9IGl0ZW1EYXRhLmdldCgnZGV0YWlsc1RpdGxlRW5hYmxlZCcpID09PSAndHJ1ZSc7XG5cbiAgICAvKiogUmV0cm8tY29tcGF0aWJpbGl0eSBjb2RlICovXG4gICAgaWYgKGl0ZW0uaW1hZ2VFbmFibGVkICYmIHRoaXMuZmllbGRzQ29uZmlndXJhdGlvbi51cmxJbWFnZVRlbXBsYXRlKSB7XG4gICAgICBpdGVtLnVybEltYWdlcyA9IG5ldyBBcnJheTxzdHJpbmc+KCk7XG4gICAgICBpdGVtLnVybEltYWdlcy5wdXNoKG1hdGNoQW5kUmVwbGFjZShpdGVtRGF0YSwgdGhpcy5maWVsZHNDb25maWd1cmF0aW9uLnVybEltYWdlVGVtcGxhdGUpKTtcbiAgICB9XG4gICAgLyoqIEVuZCBvZiByZXRyby1jb21wYXRpYmlsaXR5IGNvZGUgKi9cblxuICAgIGlmIChpdGVtLmltYWdlRW5hYmxlZCAmJiB0aGlzLmZpZWxkc0NvbmZpZ3VyYXRpb24udXJsSW1hZ2VUZW1wbGF0ZXMgJiYgdGhpcy5maWVsZHNDb25maWd1cmF0aW9uLnVybEltYWdlVGVtcGxhdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGl0ZW0udXJsSW1hZ2VzID0gbmV3IEFycmF5PHN0cmluZz4oKTtcbiAgICAgIGl0ZW0uZGVzY3JpcHRpb25zID0gbmV3IEFycmF5PHN0cmluZz4oKTtcbiAgICAgIHRoaXMuZmllbGRzQ29uZmlndXJhdGlvbi51cmxJbWFnZVRlbXBsYXRlcy5mb3JFYWNoKGRlc2NVcmwgPT4ge1xuICAgICAgICBsZXQgY29uZGl0aW9uID0gIWRlc2NVcmwuZmlsdGVyO1xuICAgICAgICBpZiAoZGVzY1VybC5maWx0ZXIpIHtcbiAgICAgICAgICBjb25zdCBkYXRhID0gaXRlbURhdGEuZ2V0KGRlc2NVcmwuZmlsdGVyLmZpZWxkKTtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgY29uZGl0aW9uID0gZGF0YS5zb21lKHYgPT4gZGVzY1VybC5maWx0ZXIudmFsdWVzLmluY2x1ZGVzKHYpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgIGNvbmRpdGlvbiA9IGRlc2NVcmwuZmlsdGVyLnZhbHVlcy5pbmNsdWRlcyhkYXRhLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25kaXRpb24gPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbmRpdGlvbikge1xuICAgICAgICAgIGl0ZW0udXJsSW1hZ2VzLnB1c2gobWF0Y2hBbmRSZXBsYWNlKGl0ZW1EYXRhLCBkZXNjVXJsLnVybCkpO1xuICAgICAgICAgIGl0ZW0uZGVzY3JpcHRpb25zLnB1c2gobWF0Y2hBbmRSZXBsYWNlKGl0ZW1EYXRhLCBkZXNjVXJsLmRlc2NyaXB0aW9uKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoaXRlbS50aHVtYm5haWxFbmFibGVkICYmIHRoaXMuZmllbGRzQ29uZmlndXJhdGlvbi51cmxUaHVtYm5haWxUZW1wbGF0ZSkge1xuICAgICAgaXRlbS51cmxUaHVtYm5haWwgPSBtYXRjaEFuZFJlcGxhY2UoaXRlbURhdGEsIHRoaXMuZmllbGRzQ29uZmlndXJhdGlvbi51cmxUaHVtYm5haWxUZW1wbGF0ZSk7XG4gICAgfVxuXG4gICAgaWYgKGl0ZW0uZGV0YWlsc1RpdGxlRW5hYmxlZCAmJiB0aGlzLmZpZWxkc0NvbmZpZ3VyYXRpb24uZGV0YWlsc1RpdGxlVGVtcGxhdGUpIHtcbiAgICAgIGl0ZW0uZGV0YWlsc1RpdGxlID0gbWF0Y2hBbmRSZXBsYWNlKGl0ZW1EYXRhLCB0aGlzLmZpZWxkc0NvbmZpZ3VyYXRpb24uZGV0YWlsc1RpdGxlVGVtcGxhdGUpO1xuICAgIH1cblxuICAgIGl0ZW0ucG9zaXRpb24gPSB0aGlzLml0ZW1zLmxlbmd0aCArIDE7XG4gICAgaXRlbS5pc2hpZ2hMaWdodCA9IHVuZGVmaW5lZDtcbiAgICAvLyBXaGVuIG5ldyBkYXRhIGlzIGxvYWRlZCwgY2hlY2sgdGhlIG9uZSB0aGF0IHdlcmUgYWxyZWFkeSBjaGVja2VkICtcbiAgICAvLyByZW1vdmUgdGhlIG5vIGxvbmd1ZXIgZXhpc3RpbmcgZGF0YSBmcm9tIHNlbGVjdGVkSXRlbXMgKHRoYW5rcyB0byBhY3R1YWxTZWxlY3RlZEl0ZW1zKVxuICAgIGlmICh0aGlzLmFsbEl0ZW1zQ2hlY2tlZCAmJiAodGhpcy5pc05leHRQYWdlUmVxdWVzdGVkIHx8IHRoaXMuaXNQcmV2aW91c1BhZ2VSZXF1ZXN0ZWQpKSB7XG4gICAgICBpdGVtLmlzQ2hlY2tlZCA9IHRydWU7XG4gICAgICB0aGlzLnNlbGVjdGVkSXRlbXMuYWRkKGl0ZW0uaWRlbnRpZmllcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkSXRlbXMuaGFzKGl0ZW0uaWRlbnRpZmllcikpIHtcbiAgICAgICAgaXRlbS5pc0NoZWNrZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaW5kZXRlcm1pbmF0ZWRJdGVtcy5oYXMoaXRlbS5pZGVudGlmaWVyKSkge1xuICAgICAgICBpdGVtLmlzaW5kZXRlcm1pbmF0ZWQgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXRlbS5pc2luZGV0ZXJtaW5hdGVkID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChhZGRPblRvcCkge1xuICAgICAgdGhpcy5pdGVtcy5zcGxpY2UoaW5kZXgsIDAsIGl0ZW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLml0ZW1zLnB1c2goaXRlbSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZXRUYWJsZVdpZHRoKCkge1xuICAgIGlmICh0aGlzLnRhYmxlV2lkdGggPT09IG51bGwpIHtcbiAgICAgIGNvbnN0IG5hdGl2ZUVsZW1lbnQgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICBpZiAobmF0aXZlRWxlbWVudC5jaGlsZE5vZGVzICYmIG5hdGl2ZUVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGggPiAwICYmIG5hdGl2ZUVsZW1lbnQuY2hpbGROb2Rlc1swXSkge1xuICAgICAgICB0aGlzLnRhYmxlV2lkdGggPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQuY2hpbGROb2Rlc1swXS5vZmZzZXRXaWR0aDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIFNldHMgdGhlIHRhYmxlIGhlYWQgYW5kIGJvZHkgaGVpZ2h0XG4gICAqL1xuICBwcml2YXRlIHNldFRhYmxlSGVpZ2h0KG5iVHJpYWxzID0gMCkge1xuICAgIGNvbnN0IHRhYmxlRWxlbWVudCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50IGFzIEhUTUxFbGVtZW50O1xuICAgIGlmICghIXRhYmxlRWxlbWVudCAmJiB0YWJsZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0ICE9PSAwKSB7XG4gICAgICB0aGlzLnRoZWFkSGVpZ2h0ID0gdGhpcy5DT0xVTU5fQUNUSU9OU19IRUlHSFQgK1xuICAgICAgICAvLyBPbmx5IGluIGxpc3QgbW9kZVxuICAgICAgICB0aGlzLkNPTFVNTl9OQU1FX0hFSUdIVCAqICh0aGlzLnJlc3VsdE1vZGUgPT09IE1vZGVFbnVtLmxpc3QgPyAxIDogMCkgK1xuICAgICAgICAvLyBPbmx5IGlmIGZpbHRlcnMgYXJlIHByZXNlbnRcbiAgICAgICAgdGhpcy5GSUxURVJTX0hFSUdIVCAqICh0aGlzLmRpc3BsYXlGaWx0ZXJzID8gMSA6IDApO1xuICAgICAgdGhpcy50Ym9keUhlaWdodCA9IHRhYmxlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLSB0aGlzLnRoZWFkSGVpZ2h0IC1cbiAgICAgICAgLy8gT25seSBpZiB0aGUgbGlzdCBpcyBpbiBncmlkIG1vZGVcbiAgICAgICAgdGhpcy5UQUlMX0hFSUdIVCAqICh0aGlzLnJlc3VsdE1vZGUgPT09IE1vZGVFbnVtLmdyaWQgPyAxIDogMCkgLVxuICAgICAgICAvLyBPbmx5IGlmIHRoZSBsaXN0IGlzIGluIGdyaWQgbW9kZSBhbmQgaGFzIGFuIGVsZW1lbnQgc2VsZWN0ZWRcbiAgICAgICAgdGhpcy5kZXRhaWxlZEdyaWRIZWlnaHQgKiAodGhpcy5yZXN1bHRNb2RlID09PSBNb2RlRW51bS5ncmlkID8gMSA6IDApICogKHRoaXMuaXNEZXRhaWxsZWRHcmlkT3BlbiA/IDEgOiAwKTtcbiAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgdGhlIGNvbnRhaW5lciBoYXMgbm8gaGVpZ2h0IHRoZW4gdHJ5IGFnYWluIGZvciB1cCB0byAxMCB0aW1lc1xuICAgICAgLy8gQmVjYXVzZSBvZiBhbiBpc3N1ZSB3aXRoIHRoZSBET00gbm90IGxvYWRpbmcgcHJvcGVybHkgdGhlIHBhcmVudCBjb250YWluZXIsIGl0cyBoZWlnaHQgY2FuIGJlIGRldGVjdGVkIHRvIGJlIDAsXG4gICAgICAvLyBldmVuIHdpdGggYSBwcmVzZXQgaGVpZ2h0LiBNdWx0aXBsZSB0aWVtb3V0IHZhbHVlcyB3ZXJlIHRlc3RlZCwgYnV0IHRoZXkgZG9uJ3QgaGF2ZSBhbiBpbXBhY3Qgb24gdGhpcyBiZWhhdmlvci5cbiAgICAgIGlmIChuYlRyaWFscyA8IDEwKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zZXRUYWJsZUhlaWdodChuYlRyaWFscyArIDEpLCAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHRoZSByZXN1bHQgbGlzdFxcJ3MgaGVpZ2h0IGluIGxlc3MgdGhhbiAxMCB0cmlhbHMuJyArXG4gICAgICAgICAgJ1RyeSB0byBsaW1pdCB0aGUgZWxlbWVudCB2aXNpYmlsaXR5IHRvIHdoZW4gaXQgaXMgcmVhbGx5IG9uIHNjcmVlbiB0byBhdm9pZCB0aGlzIGlzc3VlLicpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiPHRhYmxlIFtzdHlsZS53aWR0aC5weF09XCJ0YWJsZVdpZHRoXCIgY2xhc3M9XCJyZXN1bHRsaXN0XCI+XG4gIDx0aGVhZCAqbmdJZj1cImRpc3BsYXlUaGVhZFwiPlxuICAgIDx0ciBjbGFzcz1cInJlc3VsdGxpc3RfX2ZpbHRlciByZXN1bHRsaXN0X190aGVhZF9fdHJcIiAqbmdJZj1cInRoaXMuZGlzcGxheUZpbHRlcnNcIj5cbiAgICAgIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IGNvbHVtbiBvZiBjb2x1bW5zXCI+XG4gICAgICAgIDx0ZCBbc3R5bGUud2lkdGgucHhdPVwiY29sdW1uLndpZHRoXCIgKm5nSWY9XCJjb2x1bW4uaXNJZEZpZWxkXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJyZXN1bHRsaXN0X19oZWFkZXItLWNvbHVtbnMtLWhpZGRlblwiPjwvc3Bhbj5cbiAgICAgICAgPC90ZD5cbiAgICAgICAgPHRkIGFybGFzLXJlc3VsdC1maWx0ZXIgY2xhc3M9XCJyZXN1bHRsaXN0X19maWx0ZXJfX3t7Y29sdW1uLmNvbHVtbk5hbWV9fVwiXG4gICAgICAgICAgKm5nSWY9XCIhY29sdW1uLmlzSWRGaWVsZCAmJiAhY29sdW1uLmlzVG9nZ2xlRmllbGRcIlxuICAgICAgICAgIG1hdFRvb2x0aXA9XCJ7e0ZJTFRFUl9PTiB8IHRyYW5zbGF0ZX19IHt7Y29sdW1uLmNvbHVtbk5hbWUgIHwgdHJhbnNsYXRlfX1cIiBbc3R5bGUud2lkdGgucHhdPVwiY29sdW1uLndpZHRoXCJcbiAgICAgICAgICBbY29sdW1uXT1cImNvbHVtblwiIFtkcm9wZG93blZhbHVlc109XCJkcm9wRG93bk1hcFZhbHVlcz8uZ2V0KGNvbHVtbi5maWVsZE5hbWUpfGFzeW5jXCIgW2ZpbHRlcnNNYXBdPVwiZmlsdGVyc01hcFwiXG4gICAgICAgICAgKGNvbHVtbkNoYW5nZWQpPVwiY29sdW1uQ2hhbmdlZCgkZXZlbnQpXCIgKHNldEZpbHRlcnNFdmVudCk9XCJzZXRGaWx0ZXJzKCRldmVudClcIj5cbiAgICAgICAgPC90ZD5cbiAgICAgICAgPHRkICpuZ0lmPVwiY29sdW1uLmlzVG9nZ2xlRmllbGRcIiBbc3R5bGUud2lkdGgucHhdPVwiY29sdW1uLndpZHRoXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJyZXN1bHRsaXN0X19oZWFkZXItLWNvbHVtbnMtLWhpZGRlblwiPjwvc3Bhbj5cbiAgICAgICAgPC90ZD5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuICAgIDwvdHI+XG4gICAgPHRyIGNsYXNzPVwicmVzdWx0bGlzdF9fdG9vbHMgcmVzdWx0bGlzdF9fdGhlYWRfX3RyXCI+XG4gICAgICA8dGQgW3N0eWxlLndpZHRoLnB4XT1cInRhYmxlV2lkdGhcIiBjbGFzcz1cInJlc3VsdGxpc3RfX3Rvb2xzX190ZFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwicmVzdWx0bGlzdF9fdG9vbHMtLXNlbGVjdFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJyZXN1bHRncmlkLS1jaGVja2JveFwiPlxuICAgICAgICAgICAgPG1hdC1jaGVja2JveCAoY2hhbmdlKT1cInNlbGVjdEFsbEl0ZW1zKClcIiBbY2hlY2tlZF09XCJhbGxJdGVtc0NoZWNrZWRcIlxuICAgICAgICAgICAgICBbaW5kZXRlcm1pbmF0ZV09XCIhYWxsSXRlbXNDaGVja2VkICYmIHNlbGVjdGVkSXRlbXMuc2l6ZSA+IDBcIj48L21hdC1jaGVja2JveD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyZXN1bHRncmlkLS1jaGVja2JveF9fY291bnRcIj5cbiAgICAgICAgICAgICAge3tzZWxlY3RlZEl0ZW1zLnNpemV9fVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInJlc3VsdGxpc3RfX3Rvb2xzLS1tZW51XCI+XG4gICAgICAgICAgICAgIDxtYXQtaWNvbiBpZD1cImdsb2JhbF9hY3Rpb25zX2J0blwiIG1hdFRvb2x0aXA9XCJ7e0dMT0JBTF9BQ1RJT05TIHwgdHJhbnNsYXRlfX1cIiBtYXQtaWNvbi1idXR0b24gW21hdE1lbnVUcmlnZ2VyRm9yXT1cIm1lbnVcIiAqbmdJZj1cImdsb2JhbEFjdGlvbnNMaXN0Lmxlbmd0aCA+IDBcIj5tb3JlX3ZlcnQ8L21hdC1pY29uPlxuICAgICAgICAgICAgICA8bWF0LW1lbnUgI21lbnU9XCJtYXRNZW51XCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInt7YWN0aW9uLmxhYmVsICsgJ19idG4nfX0nXCIgKm5nRm9yPVwibGV0IGFjdGlvbiBvZiBnbG9iYWxBY3Rpb25zTGlzdFwiICBbZGlzYWJsZWRdPVwiIWFjdGlvbi5hbHdheXNFbmFibGVkICYmIHNlbGVjdGVkSXRlbXMuc2l6ZT09PTBcIiBtYXQtbWVudS1pdGVtIChjbGljayk9XCJzZXRHbG9iYWxBY3Rpb24oYWN0aW9uKVwiPlxuICAgICAgICAgICAgICAgICAge3thY3Rpb24ubGFiZWwgfCB0cmFuc2xhdGV9fVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L21hdC1tZW51PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInJlc3VsdGxpc3RfX3Rvb2xzLS1zZXBhcmF0b3JcIj58PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyZXN1bHRsaXN0X190b29scy0tc29ydC1jb250YWluZXJcIiBpZD1cInJlc3VsdGxpc3Rfc29ydFwiPlxuICAgICAgICAgIDxtYXQtc2xpZGUtdG9nZ2xlICpuZ0lmPVwiaXNHZW9Tb3J0RW5hYmxlZFwiIGNsYXNzPVwicmVzdWx0bGlzdF9fdG9vbHMtLWdlb3NvcnRcIlxuICAgICAgICAgICAgW2Rpc2FibGVSaXBwbGVdPVwidHJ1ZVwiIFtjaGVja2VkXT1cImlzR2VvU29ydEFjdGl2YXRlZFwiIFtsYWJlbFBvc2l0aW9uXT1cIidiZWZvcmUnXCJcbiAgICAgICAgICAgIG1hdFRvb2x0aXA9XCJ7e0dFT1NPUlRfQUNUSU9OIHwgdHJhbnNsYXRlfX1cIiAoY2hhbmdlKT1cInNldEdlb1NvcnRBY3Rpb24oKVwiIFtoaWRlSWNvbl09XCJ0cnVlXCI+XG4gICAgICAgICAgICB7e0dFT1NPUlRfQlVUVE9OIHwgdHJhbnNsYXRlfX08L21hdC1zbGlkZS10b2dnbGU+XG4gICAgICAgICAgPG1hdC1zZWxlY3QgY2xhc3M9XCJyZXN1bHRsaXN0X190b29scy0tc29ydFwiIFtwYW5lbENsYXNzXT1cIidyZXN1bHRsaXN0X190b29scy0tc29ydCdcIlxuICAgICAgICAgICAgW2NvbXBhcmVXaXRoXT1cImJ5RmllbGROYW1lXCIgKHNlbGVjdGlvbkNoYW5nZSk9XCJzZXRTb3J0ZWRDb2x1bW4oJGV2ZW50KVwiXG4gICAgICAgICAgICBbbmdNb2RlbF09XCJzb3J0ZWRDb2x1bW5cIiBwbGFjZWhvbGRlcj1cInt7J1NvcnQgb24nIHwgdHJhbnNsYXRlfX1cIj5cbiAgICAgICAgICAgICAgPG1hdC1zZWxlY3QtdHJpZ2dlcj5cbiAgICAgICAgICAgICAgICBAaWYgKHNvcnRlZENvbHVtbj8uZmllbGROYW1lKSB7XG4gICAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAge3tzb3J0ZWRDb2x1bW4uY29sdW1uTmFtZSB8IHRyYW5zbGF0ZX19XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICA8L21hdC1zZWxlY3QtdHJpZ2dlcj5cbiAgICAgICAgICAgICAgPG1hdC1vcHRpb24gW3ZhbHVlXT1cIlwiIGNsYXNzPVwicmVzdWx0bGlzdF9fdG9vbHMtLXNvcnQtb3B0aW9uXCI+IC0gLSA8L21hdC1vcHRpb24+XG4gICAgICAgICAgICAgIEBmb3IgKGNvbHVtbiBvZiBjb2x1bW5zOyB0cmFjayBjb2x1bW4uZmllbGROYW1lKSB7XG4gICAgICAgICAgICAgICAgQGlmICghY29sdW1uLmlzSWRGaWVsZCAmJiAhY29sdW1uLmlzVG9nZ2xlRmllbGQpIHtcbiAgICAgICAgICAgICAgICAgIDxtYXQtb3B0aW9uIFt2YWx1ZV09XCJjb2x1bW5cIiBjbGFzcz1cInJlc3VsdGxpc3RfX3Rvb2xzLS1zb3J0LW9wdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICB7e2NvbHVtbi5jb2x1bW5OYW1lIHwgdHJhbnNsYXRlfX1cbiAgICAgICAgICAgICAgICAgIDwvbWF0LW9wdGlvbj5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICA8L21hdC1zZWxlY3Q+XG4gICAgICAgICAgQGlmIChzb3J0ZWRDb2x1bW4/LmZpZWxkTmFtZSkge1xuICAgICAgICAgICAgPG1hdC1idXR0b24gbWF0LWljb24tYnV0dG9uIGNsYXNzPVwicmVzdWx0bGlzdF9fdG9vbHMtLXNvcnQtZGlyZWN0aW9uXCIgKGNsaWNrKT1cInNldERpcmVjdGlvbigkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAoa2V5ZG93bik9XCJzZXREaXJlY3Rpb24oJGV2ZW50KVwiIFttYXRUb29sdGlwXT1cIidDaGFuZ2Ugc29ydCBkaXJlY3Rpb24nIHwgdHJhbnNsYXRlXCI+XG4gICAgICAgICAgICAgIDxtYXQtaWNvbiBbY2xhc3MucmV2ZXJzZWRdPVwic29ydGVkQ29sdW1uLnNvcnREaXJlY3Rpb24gPT09IFNvcnRFbnVtLmFzY1wiPnRyZW5kaW5nX2ZsYXQ8L21hdC1pY29uPlxuICAgICAgICAgICAgPC9tYXQtYnV0dG9uPlxuICAgICAgICAgIH1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJoYXNHcmlkTW9kZVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJyZXN1bHRsaXN0X190b29scy0tc2VwYXJhdG9yXCI+fDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJyZXN1bHRsaXN0X190b29scy0tbW9kZVwiIGlkPVwicmVzdWx0bGlzdF9tb2RlXCI+XG4gICAgICAgICAgICA8bWF0LWJ1dHRvbi10b2dnbGUtZ3JvdXAgW25hbWVdPVwiJ21vZGVHcm91cCdcIiAoY2hhbmdlKT1cIndoaWNoTW9kZSgkZXZlbnQpXCIgW2hpZGVTaW5nbGVTZWxlY3Rpb25JbmRpY2F0b3JdPVwidHJ1ZVwiPlxuICAgICAgICAgICAgICA8bWF0LWJ1dHRvbi10b2dnbGUgaWQ9XCJsaXN0X21vZGVfYnRuXCIgbWF0VG9vbHRpcD1cInt7TElTVF9NT0RFIHwgdHJhbnNsYXRlfX1cIiB2YWx1ZT1cInt7TW9kZUVudW0ubGlzdH19XCJcbiAgICAgICAgICAgICAgICBbY2hlY2tlZF09XCJyZXN1bHRNb2RlPT1Nb2RlRW51bS5saXN0XCI+XG4gICAgICAgICAgICAgICAgPG1hdC1pY29uPmxpc3Q8L21hdC1pY29uPlxuICAgICAgICAgICAgICA8L21hdC1idXR0b24tdG9nZ2xlPlxuICAgICAgICAgICAgICA8bWF0LWJ1dHRvbi10b2dnbGUgaWQ9XCJncmlkX21vZGVfYnRuXCIgbWF0VG9vbHRpcD1cInt7R1JJRF9NT0RFIHwgdHJhbnNsYXRlfX1cIiB2YWx1ZT1cInt7TW9kZUVudW0uZ3JpZH19XCJcbiAgICAgICAgICAgICAgICBbY2hlY2tlZF09XCJyZXN1bHRNb2RlPT1Nb2RlRW51bS5ncmlkXCI+XG4gICAgICAgICAgICAgICAgPG1hdC1pY29uPmdyaWRfdmlldzwvbWF0LWljb24+XG4gICAgICAgICAgICAgIDwvbWF0LWJ1dHRvbi10b2dnbGU+XG4gICAgICAgICAgICA8L21hdC1idXR0b24tdG9nZ2xlLWdyb3VwPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgIDwvdGQ+XG4gICAgPC90cj5cbiAgICA8dHIgY2xhc3M9XCJyZXN1bHRsaXN0X19oZWFkZXIgcmVzdWx0bGlzdF9fdGhlYWRfX3RyXCIgKm5nSWY9XCJyZXN1bHRNb2RlICE9PSBNb2RlRW51bS5ncmlkXCI+XG4gICAgICA8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCBjb2x1bW4gb2YgY29sdW1uc1wiPlxuICAgICAgICA8dGggKm5nSWY9XCJjb2x1bW4uaXNJZEZpZWxkXCIgW3N0eWxlLm1heC13aWR0aC5weF09XCJjb2x1bW4ud2lkdGhcIiBbc3R5bGUubWluLXdpZHRoLnB4XT1cImNvbHVtbi53aWR0aFwiXG4gICAgICAgICAgY2xhc3M9XCJyZXN1bHRsaXN0X19oZWFkZXItLWNvbHVtbnNcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInJlc3VsdGxpc3RfX2hlYWRlci0tY29sdW1ucy0taGlkZGVuXCI+PC9zcGFuPlxuICAgICAgICA8L3RoPlxuICAgICAgICA8dGggKm5nSWY9XCIhY29sdW1uLmlzSWRGaWVsZCAmJiAhY29sdW1uLmlzVG9nZ2xlRmllbGRcIiBbc3R5bGUubWF4LXdpZHRoLnB4XT1cImNvbHVtbi53aWR0aFwiXG4gICAgICAgICAgW3N0eWxlLm1pbi13aWR0aC5weF09XCJjb2x1bW4ud2lkdGhcIiBjbGFzcz1cInJlc3VsdGxpc3RfX2hlYWRlci0tY29sdW1uc1wiXG4gICAgICAgICAgW21hdFRvb2x0aXBdPVwiKGNvbHVtbi5jb2x1bW5OYW1lIHwgdHJhbnNsYXRlKSArICghIWNvbHVtbi5kYXRhVHlwZSA/ICcoJyArIGNvbHVtbi5kYXRhVHlwZSArICcpJyA6ICcnKVwiPlxuICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAge3tjb2x1bW4uY29sdW1uTmFtZSB8IHRyYW5zbGF0ZX19e3tjb2x1bW4uZGF0YVR5cGUgPyAnICgnICsgY29sdW1uLmRhdGFUeXBlICsgJyknOiAnJ319XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICA8L3RoPlxuICAgICAgICA8dGggKm5nSWY9XCJjb2x1bW4uaXNUb2dnbGVGaWVsZFwiIGNsYXNzPVwicmVzdWx0bGlzdF9faGVhZGVyLS1jb2x1bW5zXCIgW3N0eWxlLm1heC13aWR0aC5weF09XCJjb2x1bW4ud2lkdGhcIlxuICAgICAgICAgIFtzdHlsZS5taW4td2lkdGgucHhdPVwiY29sdW1uLndpZHRoXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJyZXN1bHRsaXN0X19oZWFkZXItLWNvbHVtbnMtLWhpZGRlblwiPlxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPC90aD5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuICAgIDwvdHI+XG4gICAgPHRyIGNsYXNzPVwicmVzdWx0bGlzdF9fZ3JpZC1kZXRhaWwgcmVzdWx0bGlzdF9fdGhlYWRfX3RyXCJcbiAgICAgICpuZ0lmPVwic2VsZWN0ZWRHcmlkSXRlbSAhPT0gbnVsbCAmJiByZXN1bHRNb2RlID09PSBNb2RlRW51bS5ncmlkICYmIGlzRGV0YWlsbGVkR3JpZE9wZW5cIj5cbiAgICAgIDx0ZCBjbGFzcz1cInJlc3VsdGxpc3RfX2dyaWQtZGV0YWlsLS10ZFwiIFtjb2xTcGFuXT1cImNvbHVtbnM/Lmxlbmd0aFwiPlxuICAgICAgICA8YXJsYXMtcmVzdWx0LWRldGFpbGVkLWdyaWQgW2dyaWRUaWxlXT1cInNlbGVjdGVkR3JpZEl0ZW1cIiBbZGV0YWlsV2lkdGhdPVwidGFibGVXaWR0aFwiXG4gICAgICAgICAgW2FjdGl2YXRlZEFjdGlvbnNQZXJJdGVtXT1cImFjdGl2YXRlZEFjdGlvbnNQZXJJdGVtXCJcbiAgICAgICAgICBbZGV0YWlsSGVpZ2h0XT1cImRldGFpbGVkR3JpZEhlaWdodFwiIFtpZEZpZWxkTmFtZV09XCJmaWVsZHNDb25maWd1cmF0aW9uLmlkRmllbGROYW1lXCJcbiAgICAgICAgICBbaXNEZXRhaWxTaG93ZWRdPVwiaXNEZXRhaWxsZWRHcmlkT3BlblwiIChhY3Rpb25Pbkl0ZW1FdmVudCk9XCJ0cmlnZ2VyQWN0aW9uT25JdGVtKCRldmVudClcIlxuICAgICAgICAgIFtzaG93RW1wdHlHcm91cF09XCJzaG93RW1wdHlHcm91cFwiIFt1c2VIdHRwXT1cImZpZWxkc0NvbmZpZ3VyYXRpb24udXNlSHR0cFF1aWNrbG9va3NcIlxuICAgICAgICAgIChjbG9zZURldGFpbCk9XCJjbG9zZURldGFpbCgkZXZlbnQpXCI+XG4gICAgICAgIDwvYXJsYXMtcmVzdWx0LWRldGFpbGVkLWdyaWQ+XG4gICAgICA8L3RkPlxuICAgIDwvdHI+XG4gIDwvdGhlYWQ+XG4gIDxkaXYgKm5nSWY9XCJpc1ByZXZpb3VzUGFnZVJlcXVlc3RlZFwiIGNsYXNzPVwicmVzdWx0bGlzdF9fbG9hZGluZyByZXN1bHRsaXN0X190b3BfbG9hZGluZ1wiXG4gICAgW3N0eWxlLndpZHRoLnB4XT1cInRhYmxlV2lkdGhcIj5cbiAgICA8bmd4LWxvYWRpbmcgW3Nob3ddPVwiaXNQcmV2aW91c1BhZ2VSZXF1ZXN0ZWRcIiBbY29uZmlnXT1cImxvYWRBbmltYXRpb25Db25maWdcIj48L25neC1sb2FkaW5nPlxuICA8L2Rpdj5cbiAgPHRib2R5IGNsYXNzPVwicmVzdWx0bGlzdF9fdGJvZHlcIiBhcmxhc1Jlc3VsdFNjcm9sbCAqbmdJZj1cIiFpc0JvZHlIaWRkZW5cIiBbc3R5bGUub3ZlcmZsb3ctYW5jaG9yXT1cIidub25lJ1wiXG4gICAgW3N0eWxlLmhlaWdodC5weF09XCJ0Ym9keUhlaWdodFwiIFtzY3JvbGxPcHRpb25zXT1cInNjcm9sbE9wdGlvbnNcIiBbaXRlbXNdPVwiaXRlbXNcIiBbc3R5bGUucG9zaXRpb25dPVwiJ3JlbGF0aXZlJ1wiXG4gICAgW25iR3JpZENvbHVtbnNdPVwibmJHcmlkQ29sdW1uc1wiXG4gICAgW25iTGluZXNCZWZvcmVGZXRjaF09XCIobmJMaW5lc0JlZm9yZUZldGNoICE9PSB1bmRlZmluZWQpID8gbmJMaW5lc0JlZm9yZUZldGNoOm5MYXN0TGluZXNcIiBbZmV0Y2hTdGF0ZV09XCJmZXRjaFN0YXRlXCJcbiAgICBbcmVzdWx0TW9kZV09XCJyZXN1bHRNb2RlXCIgKHZpc2libGVJdGVtcyk9XCJlbWl0VmlzaWJsZUl0ZW1zKCRldmVudClcIlxuICAgIChuZXh0RGF0YUV2ZW50KT1cInBhZ2luYXRlKCRldmVudCwgUGFnZUVudW0ubmV4dClcIiAocHJldmlvdXNEYXRhRXZlbnQpPVwicGFnaW5hdGUoJGV2ZW50LCBQYWdlRW51bS5wcmV2aW91cylcIj5cbiAgICA8bWF0LWdyaWQtbGlzdCBjb2xzPVwie3tuYkdyaWRDb2x1bW5zfX1cIiByb3dIZWlnaHQ9XCIxOjFcIiBbc3R5bGUuZGlzcGxheV09XCJkaXNwbGF5TGlzdEdyaWRcIj5cbiAgICAgIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IHJvd0l0ZW0gb2YgaXRlbXM7IGluZGV4IGFzIGlcIj5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cInJlc3VsdE1vZGUgPT09IE1vZGVFbnVtLmxpc3Q7IGVsc2UgZ3JpZF9tb2RlXCI+XG4gICAgICAgICAgPHRyIGFybGFzLXJlc3VsdC1pdGVtIFthY3RpdmF0ZWRBY3Rpb25zUGVySXRlbV09XCJhY3RpdmF0ZWRBY3Rpb25zUGVySXRlbVwiIGlkPVwie3tyb3dJdGVtLmlkZW50aWZpZXJ9fVwiIGNsYXNzPVwicmVzdWx0bGlzdF9fYm9keS0taXRlbS1ob3Zlci17e3Jvd0l0ZW0uaXNoaWdoTGlnaHR9fVwiXG4gICAgICAgICAgICBbb3B0aW9uc109XCJvcHRpb25zXCIgKG1vdXNlZW50ZXIpPVwib25FbnRlckl0ZW0ocm93SXRlbSlcIiAobW91c2VsZWF2ZSk9XCJvbkxlYXZlSXRlbShyb3dJdGVtKVwiXG4gICAgICAgICAgICAoY2xpY2spPVwib25DbGlja0l0ZW0ocm93SXRlbSlcIiBbaWRGaWVsZE5hbWVdPVwiZmllbGRzQ29uZmlndXJhdGlvbi5pZEZpZWxkTmFtZVwiIFt0YWJsZVdpZHRoXT1cInRhYmxlV2lkdGhcIlxuICAgICAgICAgICAgW3Jvd0l0ZW1dPVwicm93SXRlbVwiIFt1c2VDb2xvclNlcnZpY2VdPVwidXNlQ29sb3JTZXJ2aWNlXCIgW2NlbGxCYWNrZ3JvdW5kU3R5bGVdPVwiY2VsbEJhY2tncm91bmRTdHlsZVwiXG4gICAgICAgICAgICBba2V5c1RvQ29sb3JzXT1cImtleXNUb0NvbG9yc1wiIFtjb2xvcnNTYXR1cmF0aW9uV2VpZ2h0XT1cImNvbG9yc1NhdHVyYXRpb25XZWlnaHRcIlxuICAgICAgICAgICAgW2RldGFpbGVkRGF0YVJldHJpZXZlcl09XCJkZXRhaWxlZERhdGFSZXRyaWV2ZXJcIiBbc2VsZWN0ZWRJdGVtc109XCJzZWxlY3RlZEl0ZW1zXCJcbiAgICAgICAgICAgIChzZWxlY3RlZEl0ZW1zRXZlbnQpPVwic2V0U2VsZWN0ZWRJdGVtcygkZXZlbnQpXCIgKGJvcmRlclN0eWxlRXZlbnQpPVwic2V0Qm9yZGVyU3R5bGUoJGV2ZW50KVwiXG4gICAgICAgICAgICBbc3R5bGUuYm9yZGVyLWJvdHRvbS1zdHlsZV09XCJib3JkZXJTdHlsZVwiIChhY3Rpb25Pbkl0ZW1FdmVudCk9XCJ0cmlnZ2VyQWN0aW9uT25JdGVtKCRldmVudClcIlxuICAgICAgICAgICA+XG4gICAgICAgICAgPC90cj5cbiAgICAgICAgICA8dHIgYXJsYXMtcmVzdWx0LWRldGFpbGVkLWl0ZW0gKm5nSWY9XCJyb3dJdGVtLmlzRGV0YWlsVG9nZ2xlZFwiIGNsYXNzPVwicmVzdWx0bGlzdF9fYm9keS0tZGV0YWlsZWQtaXRlbVwiXG4gICAgICAgICAgICAobW91c2VlbnRlcik9XCJvbkVudGVySXRlbShyb3dJdGVtKVwiIChtb3VzZWxlYXZlKT1cIm9uTGVhdmVJdGVtKHJvd0l0ZW0pXCJcbiAgICAgICAgICAgIFtkZXRhaWxlZERhdGFSZXRyaWV2ZXJdPVwiZGV0YWlsZWREYXRhUmV0cmlldmVyXCJcbiAgICAgICAgICAgIFthY3RpdmF0ZWRBY3Rpb25zUGVySXRlbV09XCJhY3RpdmF0ZWRBY3Rpb25zUGVySXRlbVwiXG4gICAgICAgICAgICBbZGV0YWlsQ29sc3Bhbl09XCJyb3dJdGVtLmNvbHVtbnMubGVuZ3RoXCIgW3Jvd0l0ZW1dPVwicm93SXRlbVwiIFtzaG93RW1wdHlHcm91cF09c2hvd0VtcHR5R3JvdXBcbiAgICAgICAgICAgIFtpZEZpZWxkTmFtZV09XCJmaWVsZHNDb25maWd1cmF0aW9uLmlkRmllbGROYW1lXCIgKGFjdGlvbk9uSXRlbUV2ZW50KT1cInRyaWdnZXJBY3Rpb25Pbkl0ZW0oJGV2ZW50KVwiPlxuICAgICAgICAgIDwvdHI+XG5cbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSAjZ3JpZF9tb2RlPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJkaXYtZ3JpZC10aWxlXCIgKG1vdXNlZW50ZXIpPVwib25FbnRlckl0ZW0ocm93SXRlbSlcIiAobW91c2VsZWF2ZSk9XCJvbkxlYXZlSXRlbShyb3dJdGVtKVwiID5cbiAgICAgICAgICAgIDxtYXQtZ3JpZC10aWxlICpuZ0lmPVwicmVzdWx0TW9kZSA9PT0gTW9kZUVudW0uZ3JpZFwiIGNsYXNzPVwicmVzdWx0bGlzdF9fbWQtZ3JpZC10aWxlXCI+XG4gICAgICAgICAgICAgIDxhcmxhcy1yZXN1bHQtZ3JpZC10aWxlXG4gICAgICAgICAgICAgICAgW2FjdGl2YXRlZEFjdGlvbnNQZXJJdGVtXT1cImFjdGl2YXRlZEFjdGlvbnNQZXJJdGVtXCJcbiAgICAgICAgICAgICAgICBbZGlzcGxheUluZm9JY29uXT1cInJvd0l0ZW0uaWRlbnRpZmllciA9PT0gc2VsZWN0ZWRHcmlkSXRlbT8uaWRlbnRpZmllciAmJiBpc0RldGFpbGxlZEdyaWRPcGVuXCJcbiAgICAgICAgICAgICAgICBbdGh1bWJuYWlsRml0XT1cInRodW1ibmFpbEZpdFwiXG4gICAgICAgICAgICAgICAgaWQ9XCJ7e3Jvd0l0ZW0uaWRlbnRpZmllcn19XCIgY2xhc3M9XCJyZXN1bHRsaXN0X19ncmlkLXRpbGVcIiBbb3B0aW9uc109XCJvcHRpb25zXCIgW2dyaWRUaWxlXT1cInJvd0l0ZW1cIlxuICAgICAgICAgICAgICAgIFtzZWxlY3RlZEl0ZW1zXT1cInNlbGVjdGVkSXRlbXNcIiBbZGV0YWlsZWREYXRhUmV0cmlldmVyXT1cImRldGFpbGVkRGF0YVJldHJpZXZlclwiXG4gICAgICAgICAgICAgICAgKHNlbGVjdGVkSXRlbXNFdmVudCk9XCJzZXRTZWxlY3RlZEl0ZW1zKCRldmVudClcIiAoY2xpY2tlZE9uSXRlbUV2ZW50KT1cInNldFNlbGVjdGVkR3JpZEl0ZW0oJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgW2lkRmllbGROYW1lXT1cImZpZWxkc0NvbmZpZ3VyYXRpb24uaWRGaWVsZE5hbWVcIiAoYWN0aW9uT25JdGVtRXZlbnQpPVwidHJpZ2dlckFjdGlvbk9uSXRlbSgkZXZlbnQpXCI+XG4gICAgICAgICAgICAgIDwvYXJsYXMtcmVzdWx0LWdyaWQtdGlsZT5cbiAgICAgICAgICAgIDwvbWF0LWdyaWQtdGlsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuICAgIDwvbWF0LWdyaWQtbGlzdD5cbiAgPC90Ym9keT5cbiAgPGRpdiAqbmdJZj1cInJlc3VsdE1vZGUgPT09IE1vZGVFbnVtLmdyaWRcIiBjbGFzcz1cInJlc3VsdGxpc3QtdGh1bWJuYWlscy1maXRcIj5cbiAgICA8bWF0LWJ1dHRvbi10b2dnbGUtZ3JvdXAgW25hbWVdPVwiJ3RodW1ibmFpbEZpdEdyb3VwJ1wiIChjaGFuZ2UpPVwiZW1pdFRodW1ibmFpbHNGaXRTdGF0dXMoJGV2ZW50KVwiXG4gICAgICAgIGNsYXNzPVwiZml0LWdyb3VwXCIgW2hpZGVTaW5nbGVTZWxlY3Rpb25JbmRpY2F0b3JdPVwidHJ1ZVwiPlxuICAgICAgPG1hdC1idXR0b24tdG9nZ2xlIG1hdFRvb2x0aXA9XCJ7e1dJRFRIX0ZJVCB8IHRyYW5zbGF0ZX19XCIgdmFsdWU9XCJ7e1RodW1ibmFpbEZpdEVudW0ud2lkdGh9fVwiXG4gICAgICAgIFtjaGVja2VkXT1cInRodW1ibmFpbEZpdD09VGh1bWJuYWlsRml0RW51bS53aWR0aFwiPlxuICAgICAgICA8bWF0LWljb24gc3R5bGU9XCJ0cmFuc2Zvcm06IHJvdGF0ZSgtOTBkZWcpXCIgY2xhc3M9XCJmaXQtaWNvblwiPmV4cGFuZDwvbWF0LWljb24+XG4gICAgICA8L21hdC1idXR0b24tdG9nZ2xlPlxuICAgICAgPG1hdC1idXR0b24tdG9nZ2xlIG1hdFRvb2x0aXA9XCJ7e0NPTlRBSU5fRklUIHwgdHJhbnNsYXRlfX1cIiB2YWx1ZT1cInt7VGh1bWJuYWlsRml0RW51bS5jb250YWlufX1cIlxuICAgICAgICBbY2hlY2tlZF09XCJ0aHVtYm5haWxGaXQ9PVRodW1ibmFpbEZpdEVudW0uY29udGFpblwiIGNsYXNzPVwiY29udGFpbi1pY29uLXdyYXBwZXJcIj5cbiAgICAgICAgPG1hdC1pY29uIGNsYXNzPVwiY29udGFpbi1pY29uIGZpdC1pY29uXCI+ZXhwYW5kPC9tYXQtaWNvbj5cbiAgICAgICAgPG1hdC1pY29uIGNsYXNzPVwiZml0LWljb25cIj5leHBhbmQ8L21hdC1pY29uPlxuICAgICAgPC9tYXQtYnV0dG9uLXRvZ2dsZT5cbiAgICAgIDxtYXQtYnV0dG9uLXRvZ2dsZSBtYXRUb29sdGlwPVwie3tIRUlHSFRfRklUIHwgdHJhbnNsYXRlfX1cIiB2YWx1ZT1cInt7VGh1bWJuYWlsRml0RW51bS5oZWlnaHR9fVwiXG4gICAgICAgIFtjaGVja2VkXT1cInRodW1ibmFpbEZpdD09VGh1bWJuYWlsRml0RW51bS5oZWlnaHRcIj5cbiAgICAgICAgPG1hdC1pY29uIGNsYXNzPVwiZml0LWljb25cIj5leHBhbmQ8L21hdC1pY29uPlxuICAgICAgPC9tYXQtYnV0dG9uLXRvZ2dsZT5cbiAgICA8L21hdC1idXR0b24tdG9nZ2xlLWdyb3VwPlxuICA8L2Rpdj5cbiAgPGRpdiAqbmdJZj1cImlzTmV4dFBhZ2VSZXF1ZXN0ZWRcIiBjbGFzcz1cInJlc3VsdGxpc3RfX2xvYWRpbmcgcmVzdWx0bGlzdF9fYm90dG9tX2xvYWRpbmdcIiBbc3R5bGUud2lkdGgucHhdPVwidGFibGVXaWR0aFwiPlxuICAgIDxuZ3gtbG9hZGluZyBbc2hvd109XCJpc05leHRQYWdlUmVxdWVzdGVkXCIgW2NvbmZpZ109XCJsb2FkQW5pbWF0aW9uQ29uZmlnXCI+PC9uZ3gtbG9hZGluZz5cbiAgPC9kaXY+XG48L3RhYmxlPlxuIl19