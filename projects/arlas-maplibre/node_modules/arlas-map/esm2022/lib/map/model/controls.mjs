/*
 * Licensed to Gisaïa under one or more contributor
 * license agreements. See the NOTICE.txt file distributed with
 * this work for additional information regarding copyright
 * ownership. Gisaïa licenses this file to you under
 * the Apache License, Version 2.0 (the "License"); you may
 * not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
import { marker } from '@colsen1991/ngx-translate-extract-marker';
export class PitchToggle {
    constructor(bearing, pitch, minpitchzoom) {
        this.image3D = 'url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzM' +
            'CI+ICAgIDx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBkeT0iLjM1ZW0iIHN0eWxlPSJmb250LXNpemU6IDE0cHg7IGZvbnQtZmFtaWx5OiAnSGVsdmV0aWNhIE5ldWUnLEFya' +
            'WFsLEhlbHZldGljYSxzYW5zLXNlcmlmOyBmb250LXdlaWdodDogYm9sZDsgdGV4dC1hbmNob3I6IG1pZGRsZTsiPjNEPC90ZXh0Pjwvc3ZnPg==)';
        this.image2D = 'url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzM' +
            'CI+ICAgIDx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBkeT0iLjM1ZW0iIHN0eWxlPSJmb250LXNpemU6IDE0cHg7IGZvbnQtZmFtaWx5OiAnSGVsdmV0aWNhIE5ldWUnLEFyaWF' +
            'sLEhlbHZldGljYSxzYW5zLXNlcmlmOyBmb250LXdlaWdodDogYm9sZDsgdGV4dC1hbmNob3I6IG1pZGRsZTsiPjJEPC90ZXh0Pjwvc3ZnPg==)';
        this.btnClasses = [];
        this.containerClasses = [];
        this.bearing = bearing;
        this.pitch = pitch;
        this.minpitchzoom = minpitchzoom;
        this._buildClasses();
    }
    _buildClasses() {
        this.btnClasses = [];
        this.containerClasses = [];
    }
    onAdd(map) {
        this.map = map;
        this.btn = document.createElement('button');
        this.btn.className = this.btnClasses.join(' ');
        this.btn.style.backgroundImage = this.image3D;
        this.btn.type = 'button';
        this.btn['aria-label'] = marker('Toggle Pitch');
        this.btn.onclick = () => {
            if (map.getPitch() === 0) {
                const options = { pitch: this.pitch, bearing: this.bearing, minpitchzoom: null };
                if (this.minpitchzoom && map.getZoom() > this.minpitchzoom) {
                    options.minpitchzoom = this.minpitchzoom;
                }
                map.easeTo(options);
                this.btn.style.backgroundImage = this.image2D;
            }
            else {
                map.easeTo({ pitch: 0, bearing: 0 });
                this.btn.style.backgroundImage = this.image3D;
            }
        };
        this.container = document.createElement('div');
        this.container.className = this.containerClasses.join(' ');
        this.container.appendChild(this.btn);
        return this.container;
    }
    onRemove() {
        this.container.parentNode.removeChild(this.container);
        this.map = undefined;
    }
}
export class ControlButton {
    constructor(name, tooltip) {
        this.btnClasses = [];
        this.containerClasses = [];
        this.name = name;
        this.tooltip = tooltip;
        this._buildClasses();
    }
    _buildClasses() {
        this.btnClasses = [];
        this.containerClasses = [];
    }
    onAdd(map) {
        this.map = map;
        this.btn = document.createElement('button');
        this.btn.className = this.btnClasses.join(' ');
        this.btn.type = 'button';
        this.btn.id = 'layers_switcher_btn';
        this.container = document.createElement('div');
        this.container.className = this.containerClasses.join(' ');
        this.container.setAttribute('title', this.tooltip);
        this.container.appendChild(this.btn);
        return this.container;
    }
    onRemove() {
        this.container.parentNode.removeChild(this.container);
        this.map = undefined;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udHJvbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9hcmxhcy1tYXAvc3JjL2xpYi9tYXAvbW9kZWwvY29udHJvbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBaUJHO0FBRUgsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLDBDQUEwQyxDQUFDO0FBNkNsRSxNQUFNLE9BQU8sV0FBVztJQWtCdEIsWUFBbUIsT0FBTyxFQUFFLEtBQUssRUFBRSxZQUFZO1FBVnhDLFlBQU8sR0FBRyxpSEFBaUg7WUFDaEksa0lBQWtJO1lBQ2xJLGtIQUFrSCxDQUFDO1FBQzlHLFlBQU8sR0FBRyxpSEFBaUg7WUFDaEksb0lBQW9JO1lBQ3BJLGdIQUFnSCxDQUFDO1FBRTVHLGVBQVUsR0FBYSxFQUFFLENBQUM7UUFDMUIscUJBQWdCLEdBQWEsRUFBRSxDQUFDO1FBR3JDLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ25CLElBQUksQ0FBQyxZQUFZLEdBQUcsWUFBWSxDQUFDO1FBQ2pDLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN2QixDQUFDO0lBRVMsYUFBYTtRQUNyQixJQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztRQUNyQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsRUFBRSxDQUFDO0lBQzdCLENBQUM7SUFFTSxLQUFLLENBQUMsR0FBRztRQUNkLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ2YsSUFBSSxDQUFDLEdBQUcsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzVDLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQy9DLElBQUksQ0FB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cEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQy9DLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNuRCxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDckMsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQ3hCLENBQUM7SUFDTSxRQUFRO1FBQ2IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUN0RCxJQUFJLENBQUMsR0FBRyxHQUFHLFNBQVMsQ0FBQztJQUN2QixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogTGljZW5zZWQgdG8gR2lzYcOvYSB1bmRlciBvbmUgb3IgbW9yZSBjb250cmlidXRvclxuICogbGljZW5zZSBhZ3JlZW1lbnRzLiBTZWUgdGhlIE5PVElDRS50eHQgZmlsZSBkaXN0cmlidXRlZCB3aXRoXG4gKiB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gcmVnYXJkaW5nIGNvcHlyaWdodFxuICogb3duZXJzaGlwLiBHaXNhw69hIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXJcbiAqIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXlcbiAqIG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgbWFya2VyIH0gZnJvbSAnQGNvbHNlbjE5OTEvbmd4LXRyYW5zbGF0ZS1leHRyYWN0LW1hcmtlcic7XG5cblxuLyoqIEFsbCB0aGUgbWFwIGNvbnRyb2xzIGNvbmZpZ3VyYXRpb25cbiAqIFRoZXNlIGludGVyZmFjZXMgYXJlIGdlbmVyaWMuXG4gKi9cblxuZXhwb3J0IHR5cGUgQ29udHJvbFBvc2l0aW9uID0gJ3RvcC1yaWdodCcgfCAndG9wLWxlZnQnIHwgJ2JvdHRvbS1yaWdodCcgfCAnYm90dG9tLWxlZnQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEljb25Db25maWcge1xuICBwYXRoOiBzdHJpbmc7XG4gIHJlY29sb3JhYmxlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb25maWdDb250cm9scyB7XG4gIGVuYWJsZTogYm9vbGVhbjtcbiAgcG9zaXRpb24/OiBDb250cm9sUG9zaXRpb247XG4gIGNvbmZpZz86IGFueTtcbiAgb3ZlcnJpZGVFdmVudD86IHsgZXZlbnQ6IGFueTsgZm46IChlKSA9PiB2b2lkOyB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBpdGNoVG9nZ2xlQ29uZmlnQ29udHJvbHMgZXh0ZW5kcyBDb25maWdDb250cm9scyB7XG4gIGVuYWJsZTogYm9vbGVhbjtcbiAgcG9zaXRpb24/OiBDb250cm9sUG9zaXRpb247XG4gIGNvbmZpZzogeyBiZWFyaW5nOiBudW1iZXI7IHBpdGNoOiBudW1iZXI7IG1pbnBpdGNoem9vbTogbnVtYmVyOyB9O1xuICBvdmVycmlkZUV2ZW50PzogeyBldmVudDogYW55OyBmbjogKGU/KSA9PiB2b2lkOyB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbnRyb2xzT3B0aW9uIHtcbiAgbWFwQXR0cmlidXRpb24/OiBDb25maWdDb250cm9scztcbiAgc2NhbGU/OiBDb25maWdDb250cm9scztcbiAgcGl0Y2hUb2dnbGU/OiBQaXRjaFRvZ2dsZUNvbmZpZ0NvbnRyb2xzO1xuICBuYXZpZ2F0aW9uQ29udHJvbD86IENvbmZpZ0NvbnRyb2xzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERyYXdDb25maWdDb250cm9sIGV4dGVuZHMgQ29uZmlnQ29udHJvbHMge1xuICBuYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERyYXdDb250cm9sc09wdGlvbiB7XG4gIGRyYXc6IHsgY29udHJvbDogYW55OyBwb3NpdGlvbj86IENvbnRyb2xQb3NpdGlvbjsgfTtcbiAgYWRkR2VvQm94OiBEcmF3Q29uZmlnQ29udHJvbDtcbiAgcmVtb3ZlQW9pczogRHJhd0NvbmZpZ0NvbnRyb2w7XG59XG5cbmV4cG9ydCBjbGFzcyBQaXRjaFRvZ2dsZSB7XG4gIHB1YmxpYyBiZWFyaW5nOiBudW1iZXI7XG4gIHB1YmxpYyBwaXRjaDogbnVtYmVyO1xuICBwdWJsaWMgbWlucGl0Y2h6b29tOiBudW1iZXI7XG4gIHB1YmxpYyBtYXA6IGFueTtcbiAgcHVibGljIGJ0bjogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIHB1YmxpYyBjb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xuXG4gIHB1YmxpYyBpbWFnZTNEID0gJ3VybChkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGRwWkhSb1BTSXpNQ0lnYUdWcFoyaDBQU0l6TScgK1xuICAgICdDSStJQ0FnSUR4MFpYaDBJSGc5SWpVd0pTSWdlVDBpTlRBbElpQmtlVDBpTGpNMVpXMGlJSE4wZVd4bFBTSm1iMjUwTFhOcGVtVTZJREUwY0hnN0lHWnZiblF0Wm1GdGFXeDVPaUFuU0dWc2RtVjBhV05oSUU1bGRXVW5MRUZ5YScgK1xuICAgICdXRnNMRWhsYkhabGRHbGpZU3h6WVc1ekxYTmxjbWxtT3lCbWIyNTBMWGRsYVdkb2REb2dZbTlzWkRzZ2RHVjRkQzFoYm1Ob2IzSTZJRzFwWkdSc1pUc2lQak5FUEM5MFpYaDBQand2YzNablBnPT0pJztcbiAgcHVibGljIGltYWdlMkQgPSAndXJsKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIZHBaSFJvUFNJek1DSWdhR1ZwWjJoMFBTSXpNJyArXG4gICAgJ0NJK0lDQWdJRHgwWlhoMElIZzlJalV3SlNJZ2VUMGlOVEFsSWlCa2VUMGlMak0xWlcwaUlITjBlV3hsUFNKbWIyNTBMWE5wZW1VNklERTBjSGc3SUdadmJuUXRabUZ0YVd4NU9pQW5TR1ZzZG1WMGFXTmhJRTVsZFdVbkxFRnlhV0YnICtcbiAgICAnc0xFaGxiSFpsZEdsallTeHpZVzV6TFhObGNtbG1PeUJtYjI1MExYZGxhV2RvZERvZ1ltOXNaRHNnZEdWNGRDMWhibU5vYjNJNklHMXBaR1JzWlRzaVBqSkVQQzkwWlhoMFBqd3ZjM1puUGc9PSknO1xuXG4gIHB1YmxpYyBidG5DbGFzc2VzOiBzdHJpbmdbXSA9IFtdO1xuICBwdWJsaWMgY29udGFpbmVyQ2xhc3Nlczogc3RyaW5nW10gPSBbXTtcblxuICBwdWJsaWMgY29uc3RydWN0b3IoYmVhcmluZywgcGl0Y2gsIG1pbnBpdGNoem9vbSkge1xuICAgIHRoaXMuYmVhcmluZyA9IGJlYXJpbmc7XG4gICAgdGhpcy5waXRjaCA9IHBpdGNoO1xuICAgIHRoaXMubWlucGl0Y2h6b29tID0gbWlucGl0Y2h6b29tO1xuICAgIHRoaXMuX2J1aWxkQ2xhc3NlcygpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9idWlsZENsYXNzZXMoKSB7XG4gICAgdGhpcy5idG5DbGFzc2VzID0gW107XG4gICAgdGhpcy5jb250YWluZXJDbGFzc2VzID0gW107XG4gIH1cblxuICBwdWJsaWMgb25BZGQobWFwKSB7XG4gICAgdGhpcy5tYXAgPSBtYXA7XG4gICAgdGhpcy5idG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICB0aGlzLmJ0bi5jbGFzc05hbWUgPSB0aGlzLmJ0bkNsYXNzZXMuam9pbignICcpO1xuICAgIHRoaXMuYnRuLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IHRoaXMuaW1hZ2UzRDtcbiAgICB0aGlzLmJ0bi50eXBlID0gJ2J1dHRvbic7XG4gICAgdGhpcy5idG5bJ2FyaWEtbGFiZWwnXSA9IG1hcmtlcignVG9nZ2xlIFBpdGNoJyk7XG4gICAgdGhpcy5idG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgIGlmIChtYXAuZ2V0UGl0Y2goKSA9PT0gMCkge1xuICAgICAgICBjb25zdCBvcHRpb25zID0geyBwaXRjaDogdGhpcy5waXRjaCwgYmVhcmluZzogdGhpcy5iZWFyaW5nLCBtaW5waXRjaHpvb206IG51bGwgfTtcbiAgICAgICAgaWYgKHRoaXMubWlucGl0Y2h6b29tICYmIG1hcC5nZXRab29tKCkgPiB0aGlzLm1pbnBpdGNoem9vbSkge1xuICAgICAgICAgIG9wdGlvbnMubWlucGl0Y2h6b29tID0gdGhpcy5taW5waXRjaHpvb207XG4gICAgICAgIH1cbiAgICAgICAgbWFwLmVhc2VUbyhvcHRpb25zKTtcbiAgICAgICAgdGhpcy5idG4uc3R5bGUuYmFja2dyb3VuZEltYWdlID0gdGhpcy5pbWFnZTJEO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWFwLmVhc2VUbyh7IHBpdGNoOiAwLCBiZWFyaW5nOiAwIH0pO1xuICAgICAgICB0aGlzLmJ0bi5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSB0aGlzLmltYWdlM0Q7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTmFtZSA9IHRoaXMuY29udGFpbmVyQ2xhc3Nlcy5qb2luKCcgJyk7XG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5idG4pO1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxuXG4gIHB1YmxpYyBvblJlbW92ZSgpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuY29udGFpbmVyKTtcbiAgICB0aGlzLm1hcCA9IHVuZGVmaW5lZDtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29udHJvbEJ1dHRvbiB7XG4gIHB1YmxpYyBtYXA6IGFueTtcbiAgcHVibGljIGJ0bjogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIHB1YmxpYyBjb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xuICBwdWJsaWMgaWNvbjtcbiAgcHVibGljIG5hbWU7XG4gIHByaXZhdGUgdG9vbHRpcDtcbiAgcHVibGljIGJ0bkNsYXNzZXM6IHN0cmluZ1tdID0gW107XG4gIHB1YmxpYyBjb250YWluZXJDbGFzc2VzOiBzdHJpbmdbXSA9IFtdO1xuICBwdWJsaWMgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCB0b29sdGlwPzogc3RyaW5nKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLnRvb2x0aXAgPSB0b29sdGlwO1xuICAgIHRoaXMuX2J1aWxkQ2xhc3NlcygpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9idWlsZENsYXNzZXMoKSB7XG4gICAgdGhpcy5idG5DbGFzc2VzID0gW107XG4gICAgdGhpcy5jb250YWluZXJDbGFzc2VzID0gW107XG4gIH1cbiAgcHVibGljIG9uQWRkKG1hcCkge1xuICAgIHRoaXMubWFwID0gbWFwO1xuICAgIHRoaXMuYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgdGhpcy5idG4uY2xhc3NOYW1lID0gdGhpcy5idG5DbGFzc2VzLmpvaW4oJyAnKTtcbiAgICB0aGlzLmJ0bi50eXBlID0gJ2J1dHRvbic7XG4gICAgdGhpcy5idG4uaWQgPSAnbGF5ZXJzX3N3aXRjaGVyX2J0bic7XG4gICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc05hbWUgPSB0aGlzLmNvbnRhaW5lckNsYXNzZXMuam9pbignICcpO1xuICAgIHRoaXMuY29udGFpbmVyLnNldEF0dHJpYnV0ZSgndGl0bGUnLCB0aGlzLnRvb2x0aXApO1xuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuYnRuKTtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cbiAgcHVibGljIG9uUmVtb3ZlKCkge1xuICAgIHRoaXMuY29udGFpbmVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5jb250YWluZXIpO1xuICAgIHRoaXMubWFwID0gdW5kZWZpbmVkO1xuICB9XG59XG4iXX0=