/*
 * Licensed to Gisaïa under one or more contributor
 * license agreements. See the NOTICE.txt file distributed with
 * this work for additional information regarding copyright
 * ownership. Gisaïa licenses this file to you under
 * the Apache License, Version 2.0 (the "License"); you may
 * not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
import { ChangeDetectorRef, Component, Inject } from '@angular/core';
import { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';
import { BboxFormGroup } from './bbox-generator.utils';
import { marker } from '@colsen1991/ngx-translate-extract-marker';
import { MapboxAoiDrawService } from '../draw/draw.service';
import * as i0 from "@angular/core";
import * as i1 from "../draw/draw.service";
import * as i2 from "@angular/material/dialog";
import * as i3 from "@angular/common";
import * as i4 from "@angular/forms";
import * as i5 from "@angular/material/form-field";
import * as i6 from "@angular/material/icon";
import * as i7 from "@angular/material/button";
import * as i8 from "@angular/material/input";
import * as i9 from "@ngx-translate/core";
import * as i10 from "./bbox-form-error.pipe";
export class BboxGeneratorComponent {
    constructor(drawService, cdr, data, dialogRef) {
        this.drawService = drawService;
        this.cdr = cdr;
        this.data = data;
        this.dialogRef = dialogRef;
        /**
         * @constant
         */
        this.DESCRIPTION = marker('Enter coordinates in decimal or sexagesimal degrees');
        /**
         * @constant
         */
        this.placeHolder = marker('Decimal: 1.1 or Sexagesimal 1°6\'3" coordinate');
    }
    ngOnInit() {
        if (!!this.data && !this.data.initCorner) {
            this.data.initCorner = {
                lat: 0,
                lng: 0
            };
        }
        this.bboxForm = new BboxFormGroup(this.data.initCorner);
    }
    ngAfterViewInit() {
        this.cdr.detectChanges();
    }
    ngOnDestroy() {
        this.bboxForm.subscriptions.forEach(s => s.unsubscribe());
    }
    close() {
        this.dialogRef.close();
    }
    generateBbox() {
        this.drawService.drawBbox(this.bboxForm.getFirstCorner(), this.bboxForm.getSecondCorner());
        this.dialogRef.close();
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: BboxGeneratorComponent, deps: [{ token: i1.MapboxAoiDrawService }, { token: i0.ChangeDetectorRef }, { token: MAT_DIALOG_DATA }, { token: i2.MatDialogRef }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "18.2.13", type: BboxGeneratorComponent, selector: "arlas-bbox-generator", ngImport: i0, template: "<div class=\"wrapper\">\n    <div class=\"title-wrapper\">\n        <span>{{'BBox generator' | translate}}</span>\n        <mat-icon class=\"clear\" (click)=\"close()\" (keyDown)=\"close()\">clear</mat-icon>\n    </div>\n    <div class=\"content\">\n        <div class=\"description\">\n            <mat-icon>info</mat-icon>\n            <span>{{DESCRIPTION | translate}}</span>\n        </div>\n        <div class=\"section\" *ngIf=\"bboxForm?.firstCorner\" [formGroup]=\"bboxForm?.firstCorner\">\n            <div class=\"title\">{{'First corner' | translate}}</div>\n            <div class=\"coordinate\">\n                <mat-form-field appearance=\"outline\" >\n                    <mat-label>{{'Latitude' |translate}}</mat-label>\n                    <input class=\"input\"  matInput [formControl]=\"bboxForm.firstCorner.latitude\" [placeholder]=\"placeHolder | translate\">\n                    <mat-error *ngIf=\"bboxForm.firstCorner.latitude.invalid\">{{bboxForm.firstCorner.latitude | bboxFormError | translate}}</mat-error>\n                </mat-form-field>\n            </div>\n            <div class=\"coordinate\">\n                <mat-form-field appearance=\"outline\">\n                    <mat-label>{{'Longitude'|translate }}</mat-label>\n                    <input class=\"input\"  matInput [formControl]=\"bboxForm.firstCorner.longitude\" [placeholder]=\"placeHolder | translate\">\n                    <mat-error *ngIf=\"bboxForm.firstCorner.longitude.invalid\">{{bboxForm.firstCorner.longitude | bboxFormError | translate}}</mat-error>\n                </mat-form-field>\n            </div>\n        </div>\n        <div class=\"section\" *ngIf=\"bboxForm?.secondCorner\" [formGroup]=\"bboxForm?.secondCorner\">\n            <div class=\"title\">{{'Second corner' | translate}}</div>\n            <div class=\"coordinate\">\n                <mat-form-field appearance=\"outline\" >\n                    <mat-label>{{'Latitude' | translate}}</mat-label>\n                    <input class=\"input\"  matInput [formControl]=\"bboxForm.secondCorner.latitude\" [placeholder]=\"placeHolder | translate\">\n                    <mat-error *ngIf=\"bboxForm.secondCorner.latitude.invalid\">{{bboxForm.secondCorner.latitude | bboxFormError | translate}} </mat-error>\n                </mat-form-field>\n            </div>\n            <div class=\"coordinate\">\n                <mat-form-field appearance=\"outline\">\n                    <mat-label>{{'Longitude' | translate}}</mat-label>\n                    <input class=\"input\"  matInput [formControl]=\"bboxForm.secondCorner.longitude\" [placeholder]=\"placeHolder | translate\">\n                    <mat-error *ngIf=\"bboxForm.secondCorner.longitude.invalid\">{{bboxForm.secondCorner.longitude | bboxFormError | translate}}</mat-error>\n                </mat-form-field>\n            </div>\n\n\n        </div>\n        <div class=\"errors\" *ngIf=\"bboxForm.latitudeErrors\">\n            <mat-icon>report</mat-icon>\n            <mat-error>{{bboxForm | bboxFormError | translate}}</mat-error>\n        </div>\n    </div>\n    <div class=\"actions\">\n        <button mat-button [mat-dialog-close]=\"null\">{{'Close' | translate}}\n        </button>\n        <button class=\"create-action\" mat-stroked-button (click)=\"generateBbox()\"\n            [disabled]=\"bboxForm.invalid || bboxForm.latitudeErrors\">\n            <span class=\"label\">{{'Generate AOI' | translate}}</span>\n        </button>\n    </div>\n</div>", styles: ["@charset \"UTF-8\";.wrapper{padding:5px;border-radius:4px;background-color:#fff;font-size:16px;min-width:365px}.wrapper .title-wrapper{display:flex;justify-content:space-between;align-items:center;font-weight:600}.wrapper .title-wrapper .clear{cursor:pointer}.wrapper .content{display:flex;flex-direction:column}.wrapper .content .description{margin:5px 0;display:flex;align-items:center;font-size:14px;color:#929292}.wrapper .content .description mat-icon{font-size:18px;height:18px;width:18px;margin-right:5px}.wrapper .content .section{display:flex;flex-direction:column}.wrapper .content .section .title{margin-bottom:5px}.wrapper .content .section .coordinate{width:100%}.wrapper .content .section .coordinate mat-form-field{width:100%}.wrapper .content .section .coordinate .input{font-size:14px}.wrapper .content .section .coordinate ::ng-deep .mat-mdc-form-field-infix{padding-left:10px;padding-bottom:10px;padding-top:10px;font-size:14px;display:flex}.wrapper .content .section .coordinate ::ng-deep .mat-mdc-form-field{padding:7px 0;width:130px}.wrapper .content .section .coordinate ::ng-deep .mat-mdc-form-field-subscript-wrapper{display:none}.wrapper .content .errors{margin-bottom:10px;display:flex;align-items:center;font-size:12px}.wrapper .content .errors mat-icon{font-size:16px;height:16px;width:16px;margin-right:5px;color:#f44336}.wrapper .actions{display:flex;justify-content:flex-end}.wrapper .actions .create-action{margin-left:5px}\n"], dependencies: [{ kind: "directive", type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i4.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i4.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i4.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i2.MatDialogClose, selector: "[mat-dialog-close], [matDialogClose]", inputs: ["aria-label", "type", "mat-dialog-close", "matDialogClose"], exportAs: ["matDialogClose"] }, { kind: "component", type: i5.MatFormField, selector: "mat-form-field", inputs: ["hideRequiredMarker", "color", "floatLabel", "appearance", "subscriptSizing", "hintLabel"], exportAs: ["matFormField"] }, { kind: "directive", type: i5.MatLabel, selector: "mat-label" }, { kind: "directive", type: i5.MatError, selector: "mat-error, [matError]", inputs: ["id"] }, { kind: "component", type: i6.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "component", type: i7.MatButton, selector: "    button[mat-button], button[mat-raised-button], button[mat-flat-button],    button[mat-stroked-button]  ", exportAs: ["matButton"] }, { kind: "directive", type: i8.MatInput, selector: "input[matInput], textarea[matInput], select[matNativeControl],      input[matNativeControl], textarea[matNativeControl]", inputs: ["disabled", "id", "placeholder", "name", "required", "type", "errorStateMatcher", "aria-describedby", "value", "readonly"], exportAs: ["matInput"] }, { kind: "directive", type: i4.FormControlDirective, selector: "[formControl]", inputs: ["formControl", "disabled", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { kind: "directive", type: i4.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { kind: "pipe", type: i9.TranslatePipe, name: "translate" }, { kind: "pipe", type: i10.BboxFormErrorPipe, name: "bboxFormError" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: BboxGeneratorComponent, decorators: [{
            type: Component,
            args: [{ selector: 'arlas-bbox-generator', template: "<div class=\"wrapper\">\n    <div class=\"title-wrapper\">\n        <span>{{'BBox generator' | translate}}</span>\n        <mat-icon class=\"clear\" (click)=\"close()\" (keyDown)=\"close()\">clear</mat-icon>\n    </div>\n    <div class=\"content\">\n        <div class=\"description\">\n            <mat-icon>info</mat-icon>\n            <span>{{DESCRIPTION | translate}}</span>\n        </div>\n        <div class=\"section\" *ngIf=\"bboxForm?.firstCorner\" [formGroup]=\"bboxForm?.firstCorner\">\n            <div class=\"title\">{{'First corner' | translate}}</div>\n            <div class=\"coordinate\">\n                <mat-form-field appearance=\"outline\" >\n                    <mat-label>{{'Latitude' |translate}}</mat-label>\n                    <input class=\"input\"  matInput [formControl]=\"bboxForm.firstCorner.latitude\" [placeholder]=\"placeHolder | translate\">\n                    <mat-error *ngIf=\"bboxForm.firstCorner.latitude.invalid\">{{bboxForm.firstCorner.latitude | bboxFormError | translate}}</mat-error>\n                </mat-form-field>\n            </div>\n            <div class=\"coordinate\">\n                <mat-form-field appearance=\"outline\">\n                    <mat-label>{{'Longitude'|translate }}</mat-label>\n                    <input class=\"input\"  matInput [formControl]=\"bboxForm.firstCorner.longitude\" [placeholder]=\"placeHolder | translate\">\n                    <mat-error *ngIf=\"bboxForm.firstCorner.longitude.invalid\">{{bboxForm.firstCorner.longitude | bboxFormError | translate}}</mat-error>\n                </mat-form-field>\n            </div>\n        </div>\n        <div class=\"section\" *ngIf=\"bboxForm?.secondCorner\" [formGroup]=\"bboxForm?.secondCorner\">\n            <div class=\"title\">{{'Second corner' | translate}}</div>\n            <div class=\"coordinate\">\n                <mat-form-field appearance=\"outline\" >\n                    <mat-label>{{'Latitude' | translate}}</mat-label>\n                    <input class=\"input\"  matInput [formControl]=\"bboxForm.secondCorner.latitude\" [placeholder]=\"placeHolder | translate\">\n                    <mat-error *ngIf=\"bboxForm.secondCorner.latitude.invalid\">{{bboxForm.secondCorner.latitude | bboxFormError | translate}} </mat-error>\n                </mat-form-field>\n            </div>\n            <div class=\"coordinate\">\n                <mat-form-field appearance=\"outline\">\n                    <mat-label>{{'Longitude' | translate}}</mat-label>\n                    <input class=\"input\"  matInput [formControl]=\"bboxForm.secondCorner.longitude\" [placeholder]=\"placeHolder | translate\">\n                    <mat-error *ngIf=\"bboxForm.secondCorner.longitude.invalid\">{{bboxForm.secondCorner.longitude | bboxFormError | translate}}</mat-error>\n                </mat-form-field>\n            </div>\n\n\n        </div>\n        <div class=\"errors\" *ngIf=\"bboxForm.latitudeErrors\">\n            <mat-icon>report</mat-icon>\n            <mat-error>{{bboxForm | bboxFormError | translate}}</mat-error>\n        </div>\n    </div>\n    <div class=\"actions\">\n        <button mat-button [mat-dialog-close]=\"null\">{{'Close' | translate}}\n        </button>\n        <button class=\"create-action\" mat-stroked-button (click)=\"generateBbox()\"\n            [disabled]=\"bboxForm.invalid || bboxForm.latitudeErrors\">\n            <span class=\"label\">{{'Generate AOI' | translate}}</span>\n        </button>\n    </div>\n</div>", styles: ["@charset \"UTF-8\";.wrapper{padding:5px;border-radius:4px;background-color:#fff;font-size:16px;min-width:365px}.wrapper .title-wrapper{display:flex;justify-content:space-between;align-items:center;font-weight:600}.wrapper .title-wrapper .clear{cursor:pointer}.wrapper .content{display:flex;flex-direction:column}.wrapper .content .description{margin:5px 0;display:flex;align-items:center;font-size:14px;color:#929292}.wrapper .content .description mat-icon{font-size:18px;height:18px;width:18px;margin-right:5px}.wrapper .content .section{display:flex;flex-direction:column}.wrapper .content .section .title{margin-bottom:5px}.wrapper .content .section .coordinate{width:100%}.wrapper .content .section .coordinate mat-form-field{width:100%}.wrapper .content .section .coordinate .input{font-size:14px}.wrapper .content .section .coordinate ::ng-deep .mat-mdc-form-field-infix{padding-left:10px;padding-bottom:10px;padding-top:10px;font-size:14px;display:flex}.wrapper .content .section .coordinate ::ng-deep .mat-mdc-form-field{padding:7px 0;width:130px}.wrapper .content .section .coordinate ::ng-deep .mat-mdc-form-field-subscript-wrapper{display:none}.wrapper .content .errors{margin-bottom:10px;display:flex;align-items:center;font-size:12px}.wrapper .content .errors mat-icon{font-size:16px;height:16px;width:16px;margin-right:5px;color:#f44336}.wrapper .actions{display:flex;justify-content:flex-end}.wrapper .actions .create-action{margin-left:5px}\n"] }]
        }], ctorParameters: () => [{ type: i1.MapboxAoiDrawService }, { type: i0.ChangeDetectorRef }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [MAT_DIALOG_DATA]
                }] }, { type: i2.MatDialogRef }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmJveC1nZW5lcmF0b3IuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvYXJsYXMtbWFwL3NyYy9saWIvYmJveC1nZW5lcmF0b3IvYmJveC1nZW5lcmF0b3IuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvYXJsYXMtbWFwL3NyYy9saWIvYmJveC1nZW5lcmF0b3IvYmJveC1nZW5lcmF0b3IuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBaUJHO0FBRUgsT0FBTyxFQUFpQixpQkFBaUIsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFxQixNQUFNLGVBQWUsQ0FBQztBQUN2RyxPQUFPLEVBQUUsZUFBZSxFQUFFLFlBQVksRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ3pFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUN2RCxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sMENBQTBDLENBQUM7QUFDbEUsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7Ozs7Ozs7Ozs7OztBQVE1RCxNQUFNLE9BQU8sc0JBQXNCO0lBVWpDLFlBQ1UsV0FBaUMsRUFDakMsR0FBc0IsRUFDRSxJQUUvQixFQUNNLFNBQStDO1FBTDlDLGdCQUFXLEdBQVgsV0FBVyxDQUFzQjtRQUNqQyxRQUFHLEdBQUgsR0FBRyxDQUFtQjtRQUNFLFNBQUksR0FBSixJQUFJLENBRW5DO1FBQ00sY0FBUyxHQUFULFNBQVMsQ0FBc0M7UUFmeEQ7O1dBRUc7UUFDSSxnQkFBVyxHQUFHLE1BQU0sQ0FBQyxxREFBcUQsQ0FBQyxDQUFDO1FBRW5GOztXQUVHO1FBQ0ksZ0JBQVcsR0FBRyxNQUFNLENBQUMsZ0RBQWdELENBQUMsQ0FBQztJQVE5RSxDQUFDO0lBRU0sUUFBUTtRQUNiLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ3pDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxHQUFHO2dCQUNyQixHQUFHLEVBQUUsQ0FBQztnQkFDTixHQUFHLEVBQUUsQ0FBQzthQUNQLENBQUM7UUFDSixDQUFDO1FBQ0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQzFELENBQUM7SUFDTSxlQUFlO1FBQ3BCLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDM0IsQ0FBQztJQUVNLFdBQVc7UUFDaEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUM7SUFDNUQsQ0FBQztJQUVNLEtBQUs7UUFDVixJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3pCLENBQUM7SUFFTSxZQUFZO1FBQ2pCLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsY0FBYyxFQUFFLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxDQUFDO1FBQzNGLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDekIsQ0FBQzsrR0EzQ1Usc0JBQXNCLHVGQWF2QixlQUFlO21HQWJkLHNCQUFzQiw0REMvQm5DLDA2R0EyRE07OzRGRDVCTyxzQkFBc0I7a0JBTGxDLFNBQVM7K0JBQ0Usc0JBQXNCOzswQkFpQjdCLE1BQU07MkJBQUMsZUFBZSIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBMaWNlbnNlZCB0byBHaXNhw69hIHVuZGVyIG9uZSBvciBtb3JlIGNvbnRyaWJ1dG9yXG4gKiBsaWNlbnNlIGFncmVlbWVudHMuIFNlZSB0aGUgTk9USUNFLnR4dCBmaWxlIGRpc3RyaWJ1dGVkIHdpdGhcbiAqIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiByZWdhcmRpbmcgY29weXJpZ2h0XG4gKiBvd25lcnNoaXAuIEdpc2HDr2EgbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlclxuICogdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heVxuICogbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBBZnRlclZpZXdJbml0LCBDaGFuZ2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBJbmplY3QsIE9uRGVzdHJveSwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNQVRfRElBTE9HX0RBVEEsIE1hdERpYWxvZ1JlZiB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2RpYWxvZyc7XG5pbXBvcnQgeyBCYm94Rm9ybUdyb3VwIH0gZnJvbSAnLi9iYm94LWdlbmVyYXRvci51dGlscyc7XG5pbXBvcnQgeyBtYXJrZXIgfSBmcm9tICdAY29sc2VuMTk5MS9uZ3gtdHJhbnNsYXRlLWV4dHJhY3QtbWFya2VyJztcbmltcG9ydCB7IE1hcGJveEFvaURyYXdTZXJ2aWNlIH0gZnJvbSAnLi4vZHJhdy9kcmF3LnNlcnZpY2UnO1xuaW1wb3J0IHsgQ29ybmVyIH0gZnJvbSAnLi4vZHJhdy9kcmF3Lm1vZGVscyc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2FybGFzLWJib3gtZ2VuZXJhdG9yJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2Jib3gtZ2VuZXJhdG9yLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vYmJveC1nZW5lcmF0b3IuY29tcG9uZW50LnNjc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBCYm94R2VuZXJhdG9yQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3kge1xuICAvKipcbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBwdWJsaWMgREVTQ1JJUFRJT04gPSBtYXJrZXIoJ0VudGVyIGNvb3JkaW5hdGVzIGluIGRlY2ltYWwgb3Igc2V4YWdlc2ltYWwgZGVncmVlcycpO1xuICBwdWJsaWMgYmJveEZvcm06IEJib3hGb3JtR3JvdXA7XG4gIC8qKlxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIHB1YmxpYyBwbGFjZUhvbGRlciA9IG1hcmtlcignRGVjaW1hbDogMS4xIG9yIFNleGFnZXNpbWFsIDHCsDZcXCczXCIgY29vcmRpbmF0ZScpO1xuICBwdWJsaWMgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBkcmF3U2VydmljZTogTWFwYm94QW9pRHJhd1NlcnZpY2UsXG4gICAgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxuICAgIEBJbmplY3QoTUFUX0RJQUxPR19EQVRBKSBwdWJsaWMgZGF0YToge1xuICAgICAgaW5pdENvcm5lcjogQ29ybmVyO1xuICAgIH0sXG4gICAgcHVibGljIGRpYWxvZ1JlZjogTWF0RGlhbG9nUmVmPEJib3hHZW5lcmF0b3JDb21wb25lbnQ+LCkge1xuICB9XG5cbiAgcHVibGljIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIGlmICghIXRoaXMuZGF0YSAmJiAhdGhpcy5kYXRhLmluaXRDb3JuZXIpIHtcbiAgICAgIHRoaXMuZGF0YS5pbml0Q29ybmVyID0ge1xuICAgICAgICBsYXQ6IDAsXG4gICAgICAgIGxuZzogMFxuICAgICAgfTtcbiAgICB9XG4gICAgdGhpcy5iYm94Rm9ybSA9IG5ldyBCYm94Rm9ybUdyb3VwKHRoaXMuZGF0YS5pbml0Q29ybmVyKTtcbiAgfVxuICBwdWJsaWMgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xuICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcbiAgfVxuXG4gIHB1YmxpYyBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICB0aGlzLmJib3hGb3JtLnN1YnNjcmlwdGlvbnMuZm9yRWFjaChzID0+IHMudW5zdWJzY3JpYmUoKSk7XG4gIH1cblxuICBwdWJsaWMgY2xvc2UoKSB7XG4gICAgdGhpcy5kaWFsb2dSZWYuY2xvc2UoKTtcbiAgfVxuXG4gIHB1YmxpYyBnZW5lcmF0ZUJib3goKSB7XG4gICAgdGhpcy5kcmF3U2VydmljZS5kcmF3QmJveCh0aGlzLmJib3hGb3JtLmdldEZpcnN0Q29ybmVyKCksIHRoaXMuYmJveEZvcm0uZ2V0U2Vjb25kQ29ybmVyKCkpO1xuICAgIHRoaXMuZGlhbG9nUmVmLmNsb3NlKCk7XG4gIH1cblxufVxuIiwiPGRpdiBjbGFzcz1cIndyYXBwZXJcIj5cbiAgICA8ZGl2IGNsYXNzPVwidGl0bGUtd3JhcHBlclwiPlxuICAgICAgICA8c3Bhbj57eydCQm94IGdlbmVyYXRvcicgfCB0cmFuc2xhdGV9fTwvc3Bhbj5cbiAgICAgICAgPG1hdC1pY29uIGNsYXNzPVwiY2xlYXJcIiAoY2xpY2spPVwiY2xvc2UoKVwiIChrZXlEb3duKT1cImNsb3NlKClcIj5jbGVhcjwvbWF0LWljb24+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRlc2NyaXB0aW9uXCI+XG4gICAgICAgICAgICA8bWF0LWljb24+aW5mbzwvbWF0LWljb24+XG4gICAgICAgICAgICA8c3Bhbj57e0RFU0NSSVBUSU9OIHwgdHJhbnNsYXRlfX08L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwic2VjdGlvblwiICpuZ0lmPVwiYmJveEZvcm0/LmZpcnN0Q29ybmVyXCIgW2Zvcm1Hcm91cF09XCJiYm94Rm9ybT8uZmlyc3RDb3JuZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aXRsZVwiPnt7J0ZpcnN0IGNvcm5lcicgfCB0cmFuc2xhdGV9fTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvb3JkaW5hdGVcIj5cbiAgICAgICAgICAgICAgICA8bWF0LWZvcm0tZmllbGQgYXBwZWFyYW5jZT1cIm91dGxpbmVcIiA+XG4gICAgICAgICAgICAgICAgICAgIDxtYXQtbGFiZWw+e3snTGF0aXR1ZGUnIHx0cmFuc2xhdGV9fTwvbWF0LWxhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJpbnB1dFwiICBtYXRJbnB1dCBbZm9ybUNvbnRyb2xdPVwiYmJveEZvcm0uZmlyc3RDb3JuZXIubGF0aXR1ZGVcIiBbcGxhY2Vob2xkZXJdPVwicGxhY2VIb2xkZXIgfCB0cmFuc2xhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgPG1hdC1lcnJvciAqbmdJZj1cImJib3hGb3JtLmZpcnN0Q29ybmVyLmxhdGl0dWRlLmludmFsaWRcIj57e2Jib3hGb3JtLmZpcnN0Q29ybmVyLmxhdGl0dWRlIHwgYmJveEZvcm1FcnJvciB8IHRyYW5zbGF0ZX19PC9tYXQtZXJyb3I+XG4gICAgICAgICAgICAgICAgPC9tYXQtZm9ybS1maWVsZD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvb3JkaW5hdGVcIj5cbiAgICAgICAgICAgICAgICA8bWF0LWZvcm0tZmllbGQgYXBwZWFyYW5jZT1cIm91dGxpbmVcIj5cbiAgICAgICAgICAgICAgICAgICAgPG1hdC1sYWJlbD57eydMb25naXR1ZGUnfHRyYW5zbGF0ZSB9fTwvbWF0LWxhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJpbnB1dFwiICBtYXRJbnB1dCBbZm9ybUNvbnRyb2xdPVwiYmJveEZvcm0uZmlyc3RDb3JuZXIubG9uZ2l0dWRlXCIgW3BsYWNlaG9sZGVyXT1cInBsYWNlSG9sZGVyIHwgdHJhbnNsYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgIDxtYXQtZXJyb3IgKm5nSWY9XCJiYm94Rm9ybS5maXJzdENvcm5lci5sb25naXR1ZGUuaW52YWxpZFwiPnt7YmJveEZvcm0uZmlyc3RDb3JuZXIubG9uZ2l0dWRlIHwgYmJveEZvcm1FcnJvciB8IHRyYW5zbGF0ZX19PC9tYXQtZXJyb3I+XG4gICAgICAgICAgICAgICAgPC9tYXQtZm9ybS1maWVsZD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInNlY3Rpb25cIiAqbmdJZj1cImJib3hGb3JtPy5zZWNvbmRDb3JuZXJcIiBbZm9ybUdyb3VwXT1cImJib3hGb3JtPy5zZWNvbmRDb3JuZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aXRsZVwiPnt7J1NlY29uZCBjb3JuZXInIHwgdHJhbnNsYXRlfX08L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb29yZGluYXRlXCI+XG4gICAgICAgICAgICAgICAgPG1hdC1mb3JtLWZpZWxkIGFwcGVhcmFuY2U9XCJvdXRsaW5lXCIgPlxuICAgICAgICAgICAgICAgICAgICA8bWF0LWxhYmVsPnt7J0xhdGl0dWRlJyB8IHRyYW5zbGF0ZX19PC9tYXQtbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImlucHV0XCIgIG1hdElucHV0IFtmb3JtQ29udHJvbF09XCJiYm94Rm9ybS5zZWNvbmRDb3JuZXIubGF0aXR1ZGVcIiBbcGxhY2Vob2xkZXJdPVwicGxhY2VIb2xkZXIgfCB0cmFuc2xhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgPG1hdC1lcnJvciAqbmdJZj1cImJib3hGb3JtLnNlY29uZENvcm5lci5sYXRpdHVkZS5pbnZhbGlkXCI+e3tiYm94Rm9ybS5zZWNvbmRDb3JuZXIubGF0aXR1ZGUgfCBiYm94Rm9ybUVycm9yIHwgdHJhbnNsYXRlfX0gPC9tYXQtZXJyb3I+XG4gICAgICAgICAgICAgICAgPC9tYXQtZm9ybS1maWVsZD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvb3JkaW5hdGVcIj5cbiAgICAgICAgICAgICAgICA8bWF0LWZvcm0tZmllbGQgYXBwZWFyYW5jZT1cIm91dGxpbmVcIj5cbiAgICAgICAgICAgICAgICAgICAgPG1hdC1sYWJlbD57eydMb25naXR1ZGUnIHwgdHJhbnNsYXRlfX08L21hdC1sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiaW5wdXRcIiAgbWF0SW5wdXQgW2Zvcm1Db250cm9sXT1cImJib3hGb3JtLnNlY29uZENvcm5lci5sb25naXR1ZGVcIiBbcGxhY2Vob2xkZXJdPVwicGxhY2VIb2xkZXIgfCB0cmFuc2xhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgPG1hdC1lcnJvciAqbmdJZj1cImJib3hGb3JtLnNlY29uZENvcm5lci5sb25naXR1ZGUuaW52YWxpZFwiPnt7YmJveEZvcm0uc2Vjb25kQ29ybmVyLmxvbmdpdHVkZSB8IGJib3hGb3JtRXJyb3IgfCB0cmFuc2xhdGV9fTwvbWF0LWVycm9yPlxuICAgICAgICAgICAgICAgIDwvbWF0LWZvcm0tZmllbGQ+XG4gICAgICAgICAgICA8L2Rpdj5cblxuXG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZXJyb3JzXCIgKm5nSWY9XCJiYm94Rm9ybS5sYXRpdHVkZUVycm9yc1wiPlxuICAgICAgICAgICAgPG1hdC1pY29uPnJlcG9ydDwvbWF0LWljb24+XG4gICAgICAgICAgICA8bWF0LWVycm9yPnt7YmJveEZvcm0gfCBiYm94Rm9ybUVycm9yIHwgdHJhbnNsYXRlfX08L21hdC1lcnJvcj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImFjdGlvbnNcIj5cbiAgICAgICAgPGJ1dHRvbiBtYXQtYnV0dG9uIFttYXQtZGlhbG9nLWNsb3NlXT1cIm51bGxcIj57eydDbG9zZScgfCB0cmFuc2xhdGV9fVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImNyZWF0ZS1hY3Rpb25cIiBtYXQtc3Ryb2tlZC1idXR0b24gKGNsaWNrKT1cImdlbmVyYXRlQmJveCgpXCJcbiAgICAgICAgICAgIFtkaXNhYmxlZF09XCJiYm94Rm9ybS5pbnZhbGlkIHx8IGJib3hGb3JtLmxhdGl0dWRlRXJyb3JzXCI+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImxhYmVsXCI+e3snR2VuZXJhdGUgQU9JJyB8IHRyYW5zbGF0ZX19PC9zcGFuPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbjwvZGl2PiJdfQ==