/*
 * Licensed to Gisaïa under one or more contributor
 * license agreements. See the NOTICE.txt file distributed with
 * this work for additional information regarding copyright
 * ownership. Gisaïa licenses this file to you under
 * the Apache License, Version 2.0 (the "License"); you may
 * not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
import { Component, ViewChild, ElementRef, Input } from '@angular/core';
import { select } from 'd3-selection';
import { PROPERTY_SELECTOR_SOURCE } from '../legend.config';
import * as i0 from "@angular/core";
export class LayerIconComponent {
    constructor() {
        this.colorLegend = {};
        this.strokeColorLegend = {};
        this.widthLegend = {};
        this.radiusLegend = {};
    }
    ngAfterViewInit() {
        if (this.layer) {
            this.drawIcons();
        }
    }
    ngOnChanges(changes) {
        if (changes['layer'] !== undefined) {
            if (this.layer && this.layerIconElement) {
                this.drawIcons();
            }
        }
    }
    drawIcons() {
        const type = this.layer.type;
        const source = this.layer.source;
        switch (type) {
            case 'circle':
            case 'circle-heatmap': {
                if (source.startsWith('feature-metric')) {
                    drawFeatureCircleIcon(this.layerIconElement.nativeElement, this.colorLegend, this.strokeColorLegend, true);
                }
                else if (source.startsWith('feature')) {
                    drawFeatureCircleIcon(this.layerIconElement.nativeElement, this.colorLegend, this.strokeColorLegend);
                }
                else if (source.startsWith('cluster')) {
                    const addBlur = type === 'circle-heatmap';
                    drawClusterCircleIcon(this.layerIconElement.nativeElement, this.colorLegend, this.strokeColorLegend, addBlur);
                }
                break;
            }
            case 'line': {
                if (source.startsWith('feature-metric')) {
                    drawLineIcon(this.layerIconElement.nativeElement, this.colorLegend, this.lineDasharray, true);
                }
                else {
                    drawLineIcon(this.layerIconElement.nativeElement, this.colorLegend, this.lineDasharray);
                }
                break;
            }
            case 'fill': {
                if (source.startsWith('cluster')) {
                    drawClusterFillIcon(this.layerIconElement.nativeElement, this.colorLegend, this.strokeColorLegend);
                }
                else if (source.startsWith('feature-metric')) {
                    drawFeatureFillIcon(this.layerIconElement.nativeElement, this.colorLegend, this.strokeColorLegend, true);
                }
                else {
                    drawFeatureFillIcon(this.layerIconElement.nativeElement, this.colorLegend, this.strokeColorLegend);
                }
                break;
            }
            case 'heatmap': {
                drawHeatmapIcon(this.layerIconElement.nativeElement, this.colorLegend, this.layer.source.toString().startsWith('feature-metric'));
                break;
            }
            case 'symbol': {
                const l = (this.layer.layout);
                if (l['text-field']) {
                    drawTextIcon(this.layerIconElement.nativeElement, this.colorLegend);
                }
            }
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: LayerIconComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "18.2.13", type: LayerIconComponent, selector: "arlas-layer-icon", inputs: { layer: "layer", colorLegend: "colorLegend", strokeColorLegend: "strokeColorLegend", widthLegend: "widthLegend", radiusLegend: "radiusLegend", lineDasharray: "lineDasharray" }, viewQueries: [{ propertyName: "layerIconElement", first: true, predicate: ["layer_icon"], descendants: true, read: ElementRef }], usesOnChanges: true, ngImport: i0, template: "<div class=\"legend-icon\">\n  <svg #layer_icon class=\"legend-icon__svg\"></svg>\n</div>\n", styles: ["@charset \"UTF-8\";.legend-icon{width:20px;height:20px}.legend-icon__svg{height:100%;width:100%}\n"] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: LayerIconComponent, decorators: [{
            type: Component,
            args: [{ selector: 'arlas-layer-icon', template: "<div class=\"legend-icon\">\n  <svg #layer_icon class=\"legend-icon__svg\"></svg>\n</div>\n", styles: ["@charset \"UTF-8\";.legend-icon{width:20px;height:20px}.legend-icon__svg{height:100%;width:100%}\n"] }]
        }], ctorParameters: () => [], propDecorators: { layer: [{
                type: Input
            }], colorLegend: [{
                type: Input
            }], strokeColorLegend: [{
                type: Input
            }], widthLegend: [{
                type: Input
            }], radiusLegend: [{
                type: Input
            }], lineDasharray: [{
                type: Input
            }], layerIconElement: [{
                type: ViewChild,
                args: ['layer_icon', { read: ElementRef, static: false }]
            }] } });
/**
 * Draws the rectangles icon for cluster mode
 * @param svgNode SVG element on which we append the rectangles using d3.
 * @param colorLegend Color legend, to give the drawn icons rectangles the same color on the map
 * @param strokeColorLegend Color legend, to give the drawn icons rectangles the same stroke color on the map
 */
export function drawClusterFillIcon(svgNode, colorLegend, strokeColorLegend) {
    const fillFourColors = getClusterFillColors(colorLegend);
    let strokeFourColors = fillFourColors;
    if (strokeColorLegend) {
        strokeFourColors = getClusterFillColors(strokeColorLegend);
    }
    const svg = select(svgNode);
    svg.selectAll('g').remove();
    svg.append('g').append('rect')
        .attr('height', 7).attr('width', 7)
        .attr('fill', fillFourColors[0]).attr('fill-opacity', 0.8)
        .attr('stroke', strokeFourColors[0]).attr('stroke-width', 0.6)
        .attr('y', 3).attr('x', 3);
    svg.append('g').append('rect')
        .attr('height', 7).attr('width', 7)
        .attr('fill', fillFourColors[1]).attr('fill-opacity', 0.6)
        .attr('stroke', strokeFourColors[1]).attr('stroke-width', 0.6)
        .attr('y', 10).attr('x', 3);
    svg.append('g').append('rect')
        .attr('height', 7).attr('width', 7)
        .attr('fill', fillFourColors[2]).attr('fill-opacity', 0.6)
        .attr('stroke', strokeFourColors[2]).attr('stroke-width', 0.6)
        .attr('y', 10).attr('x', 10);
    svg.append('g').append('rect')
        .attr('height', 7).attr('width', 7)
        .attr('fill', fillFourColors[3]).attr('fill-opacity', 0.6)
        .attr('stroke', strokeFourColors[3]).attr('stroke-width', 0.6)
        .attr('y', 3).attr('x', 10);
}
/**
 * Draws the rectangles icon for feature and feature-metric modes
 * @param svgNode SVG element on which we append the rectangles using d3.
 * @param colorLegend Color legend, to give the drawn icons rectangles the same color on the map
 * @param strokeColorLegend Color legend, to give the drawn icons rectangles the same stroke color on the map
 * @param [isMetric=false] Whether the layer depends on a metric
 */
export function drawFeatureFillIcon(svgNode, colorLegend, strokeColorLegend, isMetric = false) {
    const fillColor = getOneColor(colorLegend);
    let strokeColor = fillColor;
    if (strokeColorLegend) {
        strokeColor = getOneColor(strokeColorLegend);
    }
    const polygon = [
        { 'x': 0, 'y': 2 },
        { 'x': 18, 'y': 2 },
        { 'x': 13, 'y': 18 },
        { 'x': 1, 'y': 18 },
        { 'x': 8, 'y': 9 },
        { 'x': 0, 'y': 2 }
    ];
    const svg = select(svgNode);
    svg.selectAll('g').remove();
    svg.append('g').selectAll('polygon')
        .data([polygon])
        .enter().append('polygon')
        .attr('points', (d) => d.map(d => [d.x, d.y].join(',')).join(' ')).attr('fill', fillColor)
        .attr('fill-opacity', 0.5)
        .attr('stroke', strokeColor)
        .attr('stroke-width', 0.9);
    if (isMetric) {
        svg.append('g').append('text').text('∑')
            .attr('x', 14).attr('y', 14).attr('font-size', '0.5em').attr('font-weight', 'bold').attr('fill', colorLegend.fixValue);
    }
}
export function getOneColor(legend) {
    let color = '';
    if (legend.type === PROPERTY_SELECTOR_SOURCE.interpolated) {
        const iv = legend.interpolatedValues;
        color = iv[0] + '';
    }
    else if (legend.type === PROPERTY_SELECTOR_SOURCE.fix) {
        color = legend.fixValue + '';
    }
    else if (legend.type === PROPERTY_SELECTOR_SOURCE.manual || legend.type === PROPERTY_SELECTOR_SOURCE.generated
        || legend.type === PROPERTY_SELECTOR_SOURCE.provided) {
        const mv = legend.manualValues;
        color = mv.values().next().value;
    }
    return color;
}
export function drawTextIcon(svgNode, colorLegend) {
    const svg = select(svgNode);
    svg.selectAll('g').remove();
    svg.append('g').append('text').text(' T ').attr('transform', ' translate(5 0)')
        .attr('y', 14).attr('font-size', '0.9em').attr('font-family', 'Garamond').attr('fill', colorLegend.fixValue);
}
/**
 * draws the heatmap icon for cluster mode
 * @param svgNode SVG element on which we append the heamap circles using d3.
 * @param colorLegend Color legend, to give the drawn icons circles the same color on the map
 * @param small Whether to create a small version of the icon
 */
export function drawHeatmapIcon(svgNode, colorLegend, small) {
    const heatmapColors = [];
    if (colorLegend.type === PROPERTY_SELECTOR_SOURCE.interpolated) {
        const iv = colorLegend.interpolatedValues;
        if (iv) {
            if (iv.length === 1) {
                heatmapColors.push(iv[0], iv[0], iv[0]);
            }
            else if (iv.length === 2) {
                heatmapColors.push(iv[0], iv[0], iv[1]);
            }
            else if (iv.length === 3) {
                heatmapColors.push(iv[1], iv[Math.trunc(iv.length / 2)], iv[iv.length - 1]);
            }
            else if (iv.length >= 4) {
                heatmapColors.push(iv[1], iv[Math.trunc(iv.length / 3)], iv[Math.trunc(2 * iv.length / 3)], iv[iv.length - 1]);
            }
        }
    }
    const svg = select(svgNode);
    svg.selectAll('defs').remove();
    svg.append('defs')
        .append('filter').attr('id', 'blur')
        .append('feGaussianBlur').attr('stdDeviation', 0.8);
    if (small) {
        svg.selectAll('g').remove();
        svg.append('g')
            .append('circle')
            .attr('cx', 10).attr('cy', 10)
            .attr('r', 7)
            .style('fill', heatmapColors[0])
            .attr('filter', 'url(#blur)');
    }
    else {
        svg.selectAll('circle').remove();
        svg.selectAll('circle')
            .data(heatmapColors).enter()
            .append('circle')
            .attr('cx', 10).attr('cy', 10)
            .attr('r', (d, i) => {
            if (i === 0) {
                return 10;
            }
            if (i === 1) {
                return 8;
            }
            if (i === 2) {
                return 6;
            }
            if (i === 3) {
                return 3;
            }
        })
            .style('fill', (d, i) => d)
            .attr('filter', 'url(#blur)');
    }
}
/**
 * Draws the line icon for feature mode
 * @param svgNode SVG element on which we append the line using d3.
 * @param colorLegend Color legend, to give the drawn icons line the same color on the map
 * @param dashArray Array representing the dash pattern
 * @param [isMetric=false] Whether the layer depends on a metric
 */
export function drawLineIcon(svgNode, colorLegend, dashArray, isMetric = false) {
    let lineColor = '';
    if (colorLegend.type === PROPERTY_SELECTOR_SOURCE.fix) {
        lineColor = colorLegend.fixValue + '';
    }
    else if (colorLegend.type === PROPERTY_SELECTOR_SOURCE.interpolated) {
        const iv = colorLegend.interpolatedValues;
        if (iv) {
            lineColor = iv[0] + '';
        }
        else {
            lineColor = '#2da4ff';
        }
    }
    else if (colorLegend.type === PROPERTY_SELECTOR_SOURCE.manual || colorLegend.type === PROPERTY_SELECTOR_SOURCE.generated
        || colorLegend.type === PROPERTY_SELECTOR_SOURCE.provided) {
        const mv = colorLegend.manualValues;
        lineColor = mv.values().next().value;
    }
    let svgDashArray = '0';
    if (!!dashArray && dashArray.length > 1) {
        const joinedDashArray = dashArray.join(',');
        if (joinedDashArray === '2,5') {
            svgDashArray = '0, 2, 3';
        }
        else if (joinedDashArray === '0.1,5') {
            svgDashArray = '1,2.5';
        }
        else {
            svgDashArray = '4,2,1';
        }
    }
    const svg = select(svgNode);
    svg.selectAll('g').remove();
    svg.append('g').append('line')
        .attr('x1', 0).attr('y1', 18)
        .attr('x2', 6).attr('y2', 10)
        .attr('cx', 2).attr('cy', 2)
        .attr('stroke', lineColor).attr('stroke-width', 1.5).attr('stroke-dasharray', svgDashArray);
    svg.append('g').append('line')
        .attr('x1', 6).attr('y1', 10)
        .attr('x2', 12).attr('y2', 4)
        .attr('cx', 2).attr('cy', 2)
        .attr('stroke', lineColor).attr('stroke-width', 1.5).attr('stroke-dasharray', svgDashArray);
    svg.append('g').append('line')
        .attr('x1', 12).attr('y1', 4)
        .attr('x2', 18).attr('y2', 0)
        .attr('cx', 2).attr('cy', 2)
        .attr('stroke', lineColor).attr('stroke-width', 1.5).attr('stroke-dasharray', svgDashArray);
    if (isMetric) {
        svg.append('g').append('text').text('∑')
            .attr('x', 10).attr('y', 16).attr('font-size', '0.5em').attr('font-weight', 'bold').attr('fill', colorLegend.fixValue);
    }
}
/**
 * Draws the circle icon for feature mode
 * @param svgNode SVG element on which we append the circles using d3.
 * @param colorLegend Color legend, to give the drawn icons circles the same color on the map
 * @param strokeColorLegend Color legend, to give the drawn icons circles the same stroke color on the map
 * @param [isMetric=false] Whether the layer depends on a metric
 */
export function drawFeatureCircleIcon(svgNode, colorLegend, strokeColorLegend, isMetric = false) {
    const colorsList = [];
    const strokeColorsList = [];
    populateListFromLegend(colorsList, colorLegend);
    populateListFromLegend(strokeColorsList, strokeColorLegend);
    const svg = select(svgNode);
    svg.selectAll('circle').remove();
    svg.selectAll('g').remove();
    svg.selectAll('circle')
        .data(colorsList).enter()
        .append('circle')
        .attr('cx', (d, i) => {
        if (colorsList.length === 1) {
            return 10;
        }
        else {
            if (i === 0) {
                return 6;
            }
            if (i === 1) {
                return 12;
            }
            if (i === 2) {
                return 5;
            }
        }
    })
        .attr('cy', (d, i) => {
        if (colorsList.length === 1) {
            return 10;
        }
        else {
            if (i === 0) {
                return 5;
            }
            if (i === 1) {
                return 10;
            }
            if (i === 2) {
                return 15;
            }
        }
    })
        .attr('r', (d, i) => {
        if (colorsList.length === 1) {
            return 7;
        }
        else {
            return 3;
        }
    })
        .style('fill', (d, i) => d).style('fill-opacity', colorsList.length === 1 ? 0.6 : 0.8)
        .style('stroke', (d, i) => strokeColorsList[i]).style('stroke-width', 0.5);
    if (isMetric) {
        svg.append('g').append('text').text('∑')
            .attr('x', 10).attr('y', 16).attr('font-size', '0.5em').attr('font-weight', 'bold').attr('fill', colorLegend.fixValue);
    }
}
/**
 * draws the circle icon for cluster mode
 * @param svgNode SVG element on which we append the circles using d3.
 * @param colorLegend Color legend, to give the drawn icons circles the same color on the map
 * @param strokeColorLegend Color legend, to give the drawn icons circles the same stroke color on the map
 * @param addBlur Whether to add blur to the drawn circles
 */
export function drawClusterCircleIcon(svgNode, colorLegend, strokeColorLegend, addBlur = false) {
    // todo include radius legend in drawing icons
    const colorsList = [];
    const strokeColorsList = [];
    populateListFromLegend(colorsList, colorLegend);
    populateListFromLegend(strokeColorsList, strokeColorLegend);
    const svg = select(svgNode);
    svg.selectAll('circle').remove();
    svg.append('defs')
        .append('filter')
        .attr('id', 'blurHeatmapCircle')
        .attr('x', '-10%')
        .attr('y', '-40%')
        .attr('width', '160%')
        .attr('height', '160%')
        .append('feGaussianBlur').attr('stdDeviation', 1.9);
    svg.selectAll('circle')
        .data(colorsList).enter()
        .append('circle')
        .attr('cx', (d, i) => {
        if (i === 0) {
            return 12;
        }
        if (i === 1) {
            return 6;
        }
        if (i === 2) {
            return 10;
        }
    })
        .attr('cy', (d, i) => {
        if (i === 0) {
            return 7;
        }
        if (i === 1) {
            return 11;
        }
        if (i === 2) {
            return 15;
        }
    })
        .attr('r', (d, i) => {
        if (i === 0) {
            return 6;
        }
        if (i === 1) {
            return 5;
        }
        if (i === 2) {
            return 3;
        }
    })
        .style('fill', (d, i) => d).style('fill-opacity', 0.7)
        .style('stroke', (d, i) => strokeColorsList[i]).style('stroke-width', 0.8);
    if (addBlur) {
        svg.selectAll('circle').attr('filter', 'url(#blurHeatmapCircle)');
    }
}
export function populateListFromLegend(list, legend) {
    if (legend.type === PROPERTY_SELECTOR_SOURCE.fix) {
        list.push(legend.fixValue);
        list.push(legend.fixValue);
        list.push(legend.fixValue);
    }
    else if (legend.type === PROPERTY_SELECTOR_SOURCE.interpolated) {
        const iv = legend.interpolatedValues;
        if (iv?.length === 1) {
            list.push(iv[0], iv[0], iv[0]);
        }
        else if (iv.length === 2) {
            list.push(iv[0], iv[0], iv[1]);
        }
        else if (iv.length >= 3) {
            list.push(iv[0], iv[Math.trunc(iv.length / 2)], iv[iv.length - 1]);
        }
    }
    else if (legend.type === PROPERTY_SELECTOR_SOURCE.manual || legend.type === PROPERTY_SELECTOR_SOURCE.generated
        || legend.type === PROPERTY_SELECTOR_SOURCE.provided) {
        const iv = legend.manualValues;
        if (iv) {
            if (iv.size === 1) {
                const color = iv.values().next().value;
                list.push(color, color, color);
            }
            else if (iv.size === 2) {
                list.push(Array.from(iv.values())[0], Array.from(iv.values())[0], Array.from(iv.values())[1]);
            }
            else if (iv.size >= 3) {
                list.push(Array.from(iv.values())[0], Array.from(iv.values())[Math.trunc(Array.from(iv.keys()).length / 2)], Array.from(iv.values())[Array.from(iv.keys()).length - 1]);
            }
        }
        else if (!iv || iv.size === 0) {
            list.push('#eee', '#eee', '#eee');
        }
    }
}
export function getClusterFillColors(colorLegend) {
    const fourColors = [];
    if (colorLegend.type === PROPERTY_SELECTOR_SOURCE.interpolated) {
        const iv = colorLegend.interpolatedValues;
        if (iv) {
            if (iv.length === 1) {
                for (let i = 0; i < 4; i++) {
                    fourColors.push(iv[0]);
                }
            }
            else if (iv.length === 2) {
                fourColors.push(iv[0]);
                fourColors.push(iv[1]);
                fourColors.push(iv[0]);
                fourColors.push(iv[1]);
            }
            else if (iv.length >= 3) {
                fourColors.push(iv[0]);
                fourColors.push(iv[Math.trunc(2 * iv.length / 3)]);
                fourColors.push(iv[iv.length - 1]);
                fourColors.push(iv[Math.trunc(iv.length / 3)]);
            }
        }
    }
    else if (colorLegend.type === PROPERTY_SELECTOR_SOURCE.fix) {
        const c = colorLegend.fixValue;
        fourColors.push(c, c, c, c);
    }
    return fourColors;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGF5ZXItaWNvbi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9hcmxhcy1tYXAvc3JjL2xpYi9sZWdlbmQvbGVnZW5kLWljb24vbGF5ZXItaWNvbi5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9hcmxhcy1tYXAvc3JjL2xpYi9sZWdlbmQvbGVnZW5kLWljb24vbGF5ZXItaWNvbi5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FpQkc7QUFFSCxPQUFPLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUEyQyxNQUFNLGVBQWUsQ0FBQztBQUNqSCxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBQ3RDLE9BQU8sRUFBVSx3QkFBd0IsRUFBRSxNQUFNLGtCQUFrQixDQUFDOztBQU9wRSxNQUFNLE9BQU8sa0JBQWtCO0lBUzdCO1FBUGdCLGdCQUFXLEdBQVcsRUFBRSxDQUFDO1FBQ3pCLHNCQUFpQixHQUFXLEVBQUUsQ0FBQztRQUMvQixnQkFBVyxHQUFXLEVBQUUsQ0FBQztRQUN6QixpQkFBWSxHQUFXLEVBQUUsQ0FBQztJQUsxQyxDQUFDO0lBRU0sZUFBZTtRQUNwQixJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUNmLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUNuQixDQUFDO0lBQ0gsQ0FBQztJQUVNLFdBQVcsQ0FBQyxPQUFzQjtRQUN2QyxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsS0FBSyxTQUFTLEVBQUUsQ0FBQztZQUNuQyxJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7Z0JBQ3hDLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUNuQixDQUFDO1FBQ0gsQ0FBQztJQUNILENB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WUFBWSxDQUFDLENBQUM7SUFDOUYsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO1NBQzNCLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUM7U0FDNUIsSUFBSSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztTQUM1QixJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1NBQzNCLElBQUksQ0FBQyxRQUFRLEVBQUUsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsWUFBWSxDQUFDLENBQUM7SUFDOUYsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO1NBQzNCLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7U0FDNUIsSUFBSSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztTQUM1QixJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1NBQzNCLElBQUksQ0FBQyxRQUFRLEVBQUUsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsWUFBWSxDQUFDLENBQUM7SUFDOUYsSUFBSSxRQUFRLEVBQUUsQ0FBQztRQUNiLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7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QyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDbkQsVUFBVSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNuQyxVQUFVLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2pELENBQUM7UUFDSCxDQUFDO0lBQ0gsQ0FBQztTQUFNLElBQUksV0FBVyxDQUFDLElBQUksS0FBSyx3QkFBd0IsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUM3RCxNQUFNLENBQUMsR0FBRyxXQUFXLENBQUMsUUFBUSxDQUFDO1FBQy9CLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUNELE9BQU8sVUFBVSxDQUFDO0FBQ3BCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogTGljZW5zZWQgdG8gR2lzYcOvYSB1bmRlciBvbmUgb3IgbW9yZSBjb250cmlidXRvclxuICogbGljZW5zZSBhZ3JlZW1lbnRzLiBTZWUgdGhlIE5PVElDRS50eHQgZmlsZSBkaXN0cmlidXRlZCB3aXRoXG4gKiB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gcmVnYXJkaW5nIGNvcHlyaWdodFxuICogb3duZXJzaGlwLiBHaXNhw69hIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXJcbiAqIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXlcbiAqIG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50LCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYsIElucHV0LCBBZnRlclZpZXdJbml0LCBTaW1wbGVDaGFuZ2VzLCBPbkNoYW5nZXMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IHNlbGVjdCB9IGZyb20gJ2QzLXNlbGVjdGlvbic7XG5pbXBvcnQgeyBMZWdlbmQsIFBST1BFUlRZX1NFTEVDVE9SX1NPVVJDRSB9IGZyb20gJy4uL2xlZ2VuZC5jb25maWcnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdhcmxhcy1sYXllci1pY29uJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2xheWVyLWljb24uY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9sYXllci1pY29uLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgTGF5ZXJJY29uQ29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgT25DaGFuZ2VzIHtcbiAgQElucHV0KCkgcHVibGljIGxheWVyOiBhbnk7XG4gIEBJbnB1dCgpIHB1YmxpYyBjb2xvckxlZ2VuZDogTGVnZW5kID0ge307XG4gIEBJbnB1dCgpIHB1YmxpYyBzdHJva2VDb2xvckxlZ2VuZDogTGVnZW5kID0ge307XG4gIEBJbnB1dCgpIHB1YmxpYyB3aWR0aExlZ2VuZDogTGVnZW5kID0ge307XG4gIEBJbnB1dCgpIHB1YmxpYyByYWRpdXNMZWdlbmQ6IExlZ2VuZCA9IHt9O1xuICBASW5wdXQoKSBwdWJsaWMgbGluZURhc2hhcnJheTogQXJyYXk8bnVtYmVyPjtcbiAgQFZpZXdDaGlsZCgnbGF5ZXJfaWNvbicsIHsgcmVhZDogRWxlbWVudFJlZiwgc3RhdGljOiBmYWxzZSB9KSBwdWJsaWMgbGF5ZXJJY29uRWxlbWVudDogRWxlbWVudFJlZjtcblxuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gIH1cblxuICBwdWJsaWMgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIGlmICh0aGlzLmxheWVyKSB7XG4gICAgICB0aGlzLmRyYXdJY29ucygpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgaWYgKGNoYW5nZXNbJ2xheWVyJ10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHRoaXMubGF5ZXIgJiYgdGhpcy5sYXllckljb25FbGVtZW50KSB7XG4gICAgICAgIHRoaXMuZHJhd0ljb25zKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBkcmF3SWNvbnMoKTogdm9pZCB7XG4gICAgY29uc3QgdHlwZSA9IHRoaXMubGF5ZXIudHlwZTtcbiAgICBjb25zdCBzb3VyY2U6IHN0cmluZyA9IHRoaXMubGF5ZXIuc291cmNlIGFzIHN0cmluZztcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ2NpcmNsZSc6XG4gICAgICBjYXNlICdjaXJjbGUtaGVhdG1hcCc6IHtcbiAgICAgICAgaWYgKHNvdXJjZS5zdGFydHNXaXRoKCdmZWF0dXJlLW1ldHJpYycpKSB7XG4gICAgICAgICAgZHJhd0ZlYXR1cmVDaXJjbGVJY29uKHRoaXMubGF5ZXJJY29uRWxlbWVudC5uYXRpdmVFbGVtZW50LCB0aGlzLmNvbG9yTGVnZW5kLCB0aGlzLnN0cm9rZUNvbG9yTGVnZW5kLCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChzb3VyY2Uuc3RhcnRzV2l0aCgnZmVhdHVyZScpKSB7XG4gICAgICAgICAgZHJhd0ZlYXR1cmVDaXJjbGVJY29uKHRoaXMubGF5ZXJJY29uRWxlbWVudC5uYXRpdmVFbGVtZW50LCB0aGlzLmNvbG9yTGVnZW5kLCB0aGlzLnN0cm9rZUNvbG9yTGVnZW5kKTtcbiAgICAgICAgfSBlbHNlIGlmIChzb3VyY2Uuc3RhcnRzV2l0aCgnY2x1c3RlcicpKSB7XG4gICAgICAgICAgY29uc3QgYWRkQmx1ciA9IHR5cGUgPT09ICdjaXJjbGUtaGVhdG1hcCc7XG4gICAgICAgICAgZHJhd0NsdXN0ZXJDaXJjbGVJY29uKHRoaXMubGF5ZXJJY29uRWxlbWVudC5uYXRpdmVFbGVtZW50LCB0aGlzLmNvbG9yTGVnZW5kLCB0aGlzLnN0cm9rZUNvbG9yTGVnZW5kLCBhZGRCbHVyKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2xpbmUnOiB7XG4gICAgICAgIGlmIChzb3VyY2Uuc3RhcnRzV2l0aCgnZmVhdHVyZS1tZXRyaWMnKSkge1xuICAgICAgICAgIGRyYXdMaW5lSWNvbih0aGlzLmxheWVySWNvbkVsZW1lbnQubmF0aXZlRWxlbWVudCwgdGhpcy5jb2xvckxlZ2VuZCwgdGhpcy5saW5lRGFzaGFycmF5LCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkcmF3TGluZUljb24odGhpcy5sYXllckljb25FbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIHRoaXMuY29sb3JMZWdlbmQsIHRoaXMubGluZURhc2hhcnJheSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdmaWxsJzoge1xuICAgICAgICBpZiAoc291cmNlLnN0YXJ0c1dpdGgoJ2NsdXN0ZXInKSkge1xuICAgICAgICAgIGRyYXdDbHVzdGVyRmlsbEljb24odGhpcy5sYXllckljb25FbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIHRoaXMuY29sb3JMZWdlbmQsIHRoaXMuc3Ryb2tlQ29sb3JMZWdlbmQpO1xuICAgICAgICB9IGVsc2UgaWYgKHNvdXJjZS5zdGFydHNXaXRoKCdmZWF0dXJlLW1ldHJpYycpKSB7XG4gICAgICAgICAgZHJhd0ZlYXR1cmVGaWxsSWNvbih0aGlzLmxheWVySWNvbkVsZW1lbnQubmF0aXZlRWxlbWVudCwgdGhpcy5jb2xvckxlZ2VuZCwgdGhpcy5zdHJva2VDb2xvckxlZ2VuZCwgdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZHJhd0ZlYXR1cmVGaWxsSWNvbih0aGlzLmxheWVySWNvbkVsZW1lbnQubmF0aXZlRWxlbWVudCwgdGhpcy5jb2xvckxlZ2VuZCwgdGhpcy5zdHJva2VDb2xvckxlZ2VuZCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdoZWF0bWFwJzoge1xuICAgICAgICBkcmF3SGVhdG1hcEljb24odGhpcy5sYXllckljb25FbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIHRoaXMuY29sb3JMZWdlbmQsIHRoaXMubGF5ZXIuc291cmNlLnRvU3RyaW5nKCkuc3RhcnRzV2l0aCgnZmVhdHVyZS1tZXRyaWMnKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAnc3ltYm9sJzoge1xuICAgICAgICBjb25zdCBsOiBhbnkgPSAodGhpcy5sYXllci5sYXlvdXQpO1xuICAgICAgICBpZiAobFsndGV4dC1maWVsZCddKSB7XG4gICAgICAgICAgZHJhd1RleHRJY29uKHRoaXMubGF5ZXJJY29uRWxlbWVudC5uYXRpdmVFbGVtZW50LCB0aGlzLmNvbG9yTGVnZW5kKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG59XG5cbi8qKlxuICogRHJhd3MgdGhlIHJlY3RhbmdsZXMgaWNvbiBmb3IgY2x1c3RlciBtb2RlXG4gKiBAcGFyYW0gc3ZnTm9kZSBTVkcgZWxlbWVudCBvbiB3aGljaCB3ZSBhcHBlbmQgdGhlIHJlY3RhbmdsZXMgdXNpbmcgZDMuXG4gKiBAcGFyYW0gY29sb3JMZWdlbmQgQ29sb3IgbGVnZW5kLCB0byBnaXZlIHRoZSBkcmF3biBpY29ucyByZWN0YW5nbGVzIHRoZSBzYW1lIGNvbG9yIG9uIHRoZSBtYXBcbiAqIEBwYXJhbSBzdHJva2VDb2xvckxlZ2VuZCBDb2xvciBsZWdlbmQsIHRvIGdpdmUgdGhlIGRyYXduIGljb25zIHJlY3RhbmdsZXMgdGhlIHNhbWUgc3Ryb2tlIGNvbG9yIG9uIHRoZSBtYXBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRyYXdDbHVzdGVyRmlsbEljb24oc3ZnTm9kZTogU1ZHRWxlbWVudCwgY29sb3JMZWdlbmQ6IExlZ2VuZCwgc3Ryb2tlQ29sb3JMZWdlbmQ6IExlZ2VuZCkge1xuICBjb25zdCBmaWxsRm91ckNvbG9ycyA9IGdldENsdXN0ZXJGaWxsQ29sb3JzKGNvbG9yTGVnZW5kKTtcbiAgbGV0IHN0cm9rZUZvdXJDb2xvcnMgPSBmaWxsRm91ckNvbG9ycztcbiAgaWYgKHN0cm9rZUNvbG9yTGVnZW5kKSB7XG4gICAgc3Ryb2tlRm91ckNvbG9ycyA9IGdldENsdXN0ZXJGaWxsQ29sb3JzKHN0cm9rZUNvbG9yTGVnZW5kKTtcbiAgfVxuICBjb25zdCBzdmcgPSBzZWxlY3Qoc3ZnTm9kZSk7XG4gIHN2Zy5zZWxlY3RBbGwoJ2cnKS5yZW1vdmUoKTtcbiAgc3ZnLmFwcGVuZCgnZycpLmFwcGVuZCgncmVjdCcpXG4gICAgLmF0dHIoJ2hlaWdodCcsIDcpLmF0dHIoJ3dpZHRoJywgNylcbiAgICAuYXR0cignZmlsbCcsIGZpbGxGb3VyQ29sb3JzWzBdKS5hdHRyKCdmaWxsLW9wYWNpdHknLCAwLjgpXG4gICAgLmF0dHIoJ3N0cm9rZScsIHN0cm9rZUZvdXJDb2xvcnNbMF0pLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDAuNilcbiAgICAuYXR0cigneScsIDMpLmF0dHIoJ3gnLCAzKTtcbiAgc3ZnLmFwcGVuZCgnZycpLmFwcGVuZCgncmVjdCcpXG4gICAgLmF0dHIoJ2hlaWdodCcsIDcpLmF0dHIoJ3dpZHRoJywgNylcbiAgICAuYXR0cignZmlsbCcsIGZpbGxGb3VyQ29sb3JzWzFdKS5hdHRyKCdmaWxsLW9wYWNpdHknLCAwLjYpXG4gICAgLmF0dHIoJ3N0cm9rZScsIHN0cm9rZUZvdXJDb2xvcnNbMV0pLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDAuNilcbiAgICAuYXR0cigneScsIDEwKS5hdHRyKCd4JywgMyk7XG4gIHN2Zy5hcHBlbmQoJ2cnKS5hcHBlbmQoJ3JlY3QnKVxuICAgIC5hdHRyKCdoZWlnaHQnLCA3KS5hdHRyKCd3aWR0aCcsIDcpXG4gICAgLmF0dHIoJ2ZpbGwnLCBmaWxsRm91ckNvbG9yc1syXSkuYXR0cignZmlsbC1vcGFjaXR5JywgMC42KVxuICAgIC5hdHRyKCdzdHJva2UnLCBzdHJva2VGb3VyQ29sb3JzWzJdKS5hdHRyKCdzdHJva2Utd2lkdGgnLCAwLjYpXG4gICAgLmF0dHIoJ3knLCAxMCkuYXR0cigneCcsIDEwKTtcbiAgc3ZnLmFwcGVuZCgnZycpLmFwcGVuZCgncmVjdCcpXG4gICAgLmF0dHIoJ2hlaWdodCcsIDcpLmF0dHIoJ3dpZHRoJywgNylcbiAgICAuYXR0cignZmlsbCcsIGZpbGxGb3VyQ29sb3JzWzNdKS5hdHRyKCdmaWxsLW9wYWNpdHknLCAwLjYpXG4gICAgLmF0dHIoJ3N0cm9rZScsIHN0cm9rZUZvdXJDb2xvcnNbM10pLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDAuNilcbiAgICAuYXR0cigneScsIDMpLmF0dHIoJ3gnLCAxMCk7XG59XG5cbi8qKlxuICogRHJhd3MgdGhlIHJlY3RhbmdsZXMgaWNvbiBmb3IgZmVhdHVyZSBhbmQgZmVhdHVyZS1tZXRyaWMgbW9kZXNcbiAqIEBwYXJhbSBzdmdOb2RlIFNWRyBlbGVtZW50IG9uIHdoaWNoIHdlIGFwcGVuZCB0aGUgcmVjdGFuZ2xlcyB1c2luZyBkMy5cbiAqIEBwYXJhbSBjb2xvckxlZ2VuZCBDb2xvciBsZWdlbmQsIHRvIGdpdmUgdGhlIGRyYXduIGljb25zIHJlY3RhbmdsZXMgdGhlIHNhbWUgY29sb3Igb24gdGhlIG1hcFxuICogQHBhcmFtIHN0cm9rZUNvbG9yTGVnZW5kIENvbG9yIGxlZ2VuZCwgdG8gZ2l2ZSB0aGUgZHJhd24gaWNvbnMgcmVjdGFuZ2xlcyB0aGUgc2FtZSBzdHJva2UgY29sb3Igb24gdGhlIG1hcFxuICogQHBhcmFtIFtpc01ldHJpYz1mYWxzZV0gV2hldGhlciB0aGUgbGF5ZXIgZGVwZW5kcyBvbiBhIG1ldHJpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gZHJhd0ZlYXR1cmVGaWxsSWNvbihzdmdOb2RlOiBTVkdFbGVtZW50LCBjb2xvckxlZ2VuZDogTGVnZW5kLCBzdHJva2VDb2xvckxlZ2VuZDogTGVnZW5kLCBpc01ldHJpYyA9IGZhbHNlKSB7XG4gIGNvbnN0IGZpbGxDb2xvciA9IGdldE9uZUNvbG9yKGNvbG9yTGVnZW5kKTtcbiAgbGV0IHN0cm9rZUNvbG9yID0gZmlsbENvbG9yO1xuICBpZiAoc3Ryb2tlQ29sb3JMZWdlbmQpIHtcbiAgICBzdHJva2VDb2xvciA9IGdldE9uZUNvbG9yKHN0cm9rZUNvbG9yTGVnZW5kKTtcbiAgfVxuICBjb25zdCBwb2x5Z29uID0gW1xuICAgIHsgJ3gnOiAwLCAneSc6IDIgfSxcbiAgICB7ICd4JzogMTgsICd5JzogMiB9LFxuICAgIHsgJ3gnOiAxMywgJ3knOiAxOCB9LFxuICAgIHsgJ3gnOiAxLCAneSc6IDE4IH0sXG4gICAgeyAneCc6IDgsICd5JzogOSB9LFxuICAgIHsgJ3gnOiAwLCAneSc6IDIgfV07XG4gIGNvbnN0IHN2ZyA9IHNlbGVjdChzdmdOb2RlKTtcbiAgc3ZnLnNlbGVjdEFsbCgnZycpLnJlbW92ZSgpO1xuICBzdmcuYXBwZW5kKCdnJykuc2VsZWN0QWxsKCdwb2x5Z29uJylcbiAgICAuZGF0YShbcG9seWdvbl0pXG4gICAgLmVudGVyKCkuYXBwZW5kKCdwb2x5Z29uJylcbiAgICAuYXR0cigncG9pbnRzJywgKGQpID0+IGQubWFwKGQgPT4gW2QueCwgZC55XS5qb2luKCcsJykpLmpvaW4oJyAnKSkuYXR0cignZmlsbCcsIGZpbGxDb2xvcilcbiAgICAuYXR0cignZmlsbC1vcGFjaXR5JywgMC41KVxuICAgIC5hdHRyKCdzdHJva2UnLCBzdHJva2VDb2xvcilcbiAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgMC45KTtcbiAgaWYgKGlzTWV0cmljKSB7XG4gICAgc3ZnLmFwcGVuZCgnZycpLmFwcGVuZCgndGV4dCcpLnRleHQoJ+KIkScpXG4gICAgICAuYXR0cigneCcsIDE0KS5hdHRyKCd5JywgMTQpLmF0dHIoJ2ZvbnQtc2l6ZScsICcwLjVlbScpLmF0dHIoJ2ZvbnQtd2VpZ2h0JywgJ2JvbGQnKS5hdHRyKCdmaWxsJywgY29sb3JMZWdlbmQuZml4VmFsdWUpO1xuICB9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE9uZUNvbG9yKGxlZ2VuZDogTGVnZW5kKTogc3RyaW5nIHtcbiAgbGV0IGNvbG9yID0gJyc7XG4gIGlmIChsZWdlbmQudHlwZSA9PT0gUFJPUEVSVFlfU0VMRUNUT1JfU09VUkNFLmludGVycG9sYXRlZCkge1xuICAgIGNvbnN0IGl2ID0gbGVnZW5kLmludGVycG9sYXRlZFZhbHVlcztcbiAgICBjb2xvciA9IGl2WzBdICsgJyc7XG4gIH0gZWxzZSBpZiAobGVnZW5kLnR5cGUgPT09IFBST1BFUlRZX1NFTEVDVE9SX1NPVVJDRS5maXgpIHtcbiAgICBjb2xvciA9IGxlZ2VuZC5maXhWYWx1ZSArICcnO1xuICB9IGVsc2UgaWYgKGxlZ2VuZC50eXBlID09PSBQUk9QRVJUWV9TRUxFQ1RPUl9TT1VSQ0UubWFudWFsIHx8IGxlZ2VuZC50eXBlID09PSBQUk9QRVJUWV9TRUxFQ1RPUl9TT1VSQ0UuZ2VuZXJhdGVkXG4gICAgfHwgbGVnZW5kLnR5cGUgPT09IFBST1BFUlRZX1NFTEVDVE9SX1NPVVJDRS5wcm92aWRlZCkge1xuICAgIGNvbnN0IG12ID0gbGVnZW5kLm1hbnVhbFZhbHVlcyBhcyBNYXA8c3RyaW5nLCBzdHJpbmc+O1xuICAgIGNvbG9yID0gbXYudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuICB9XG4gIHJldHVybiBjb2xvcjtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZHJhd1RleHRJY29uKHN2Z05vZGU6IFNWR0VsZW1lbnQsIGNvbG9yTGVnZW5kOiBMZWdlbmQpIHtcbiAgY29uc3Qgc3ZnID0gc2VsZWN0KHN2Z05vZGUpO1xuICBzdmcuc2VsZWN0QWxsKCdnJykucmVtb3ZlKCk7XG4gIHN2Zy5hcHBlbmQoJ2cnKS5hcHBlbmQoJ3RleHQnKS50ZXh0KCcgVCAnKS5hdHRyKCd0cmFuc2Zvcm0nLCAnIHRyYW5zbGF0ZSg1IDApJylcbiAgICAuYXR0cigneScsIDE0KS5hdHRyKCdmb250LXNpemUnLCAnMC45ZW0nKS5hdHRyKCdmb250LWZhbWlseScsICdHYXJhbW9uZCcpLmF0dHIoJ2ZpbGwnLCBjb2xvckxlZ2VuZC5maXhWYWx1ZSk7XG59XG5cbi8qKlxuICogZHJhd3MgdGhlIGhlYXRtYXAgaWNvbiBmb3IgY2x1c3RlciBtb2RlXG4gKiBAcGFyYW0gc3ZnTm9kZSBTVkcgZWxlbWVudCBvbiB3aGljaCB3ZSBhcHBlbmQgdGhlIGhlYW1hcCBjaXJjbGVzIHVzaW5nIGQzLlxuICogQHBhcmFtIGNvbG9yTGVnZW5kIENvbG9yIGxlZ2VuZCwgdG8gZ2l2ZSB0aGUgZHJhd24gaWNvbnMgY2lyY2xlcyB0aGUgc2FtZSBjb2xvciBvbiB0aGUgbWFwXG4gKiBAcGFyYW0gc21hbGwgV2hldGhlciB0byBjcmVhdGUgYSBzbWFsbCB2ZXJzaW9uIG9mIHRoZSBpY29uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkcmF3SGVhdG1hcEljb24oc3ZnTm9kZTogU1ZHRWxlbWVudCwgY29sb3JMZWdlbmQ6IExlZ2VuZCwgc21hbGw6IGJvb2xlYW4pIHtcbiAgY29uc3QgaGVhdG1hcENvbG9ycyA9IFtdO1xuICBpZiAoY29sb3JMZWdlbmQudHlwZSA9PT0gUFJPUEVSVFlfU0VMRUNUT1JfU09VUkNFLmludGVycG9sYXRlZCkge1xuICAgIGNvbnN0IGl2ID0gY29sb3JMZWdlbmQuaW50ZXJwb2xhdGVkVmFsdWVzO1xuICAgIGlmIChpdikge1xuICAgICAgaWYgKGl2Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBoZWF0bWFwQ29sb3JzLnB1c2goaXZbMF0sIGl2WzBdLCBpdlswXSk7XG4gICAgICB9IGVsc2UgaWYgKGl2Lmxlbmd0aCA9PT0gMikge1xuICAgICAgICBoZWF0bWFwQ29sb3JzLnB1c2goaXZbMF0sIGl2WzBdLCBpdlsxXSk7XG4gICAgICB9IGVsc2UgaWYgKGl2Lmxlbmd0aCA9PT0gMykge1xuICAgICAgICBoZWF0bWFwQ29sb3JzLnB1c2goaXZbMV0sIGl2W01hdGgudHJ1bmMoaXYubGVuZ3RoIC8gMildLCBpdltpdi5sZW5ndGggLSAxXSk7XG4gICAgICB9IGVsc2UgaWYgKGl2Lmxlbmd0aCA+PSA0KSB7XG4gICAgICAgIGhlYXRtYXBDb2xvcnMucHVzaChpdlsxXSwgaXZbTWF0aC50cnVuYyhpdi5sZW5ndGggLyAzKV0sIGl2W01hdGgudHJ1bmMoMiAqIGl2Lmxlbmd0aCAvIDMpXSwgaXZbaXYubGVuZ3RoIC0gMV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBjb25zdCBzdmcgPSBzZWxlY3Qoc3ZnTm9kZSk7XG4gIHN2Zy5zZWxlY3RBbGwoJ2RlZnMnKS5yZW1vdmUoKTtcbiAgc3ZnLmFwcGVuZCgnZGVmcycpXG4gICAgLmFwcGVuZCgnZmlsdGVyJykuYXR0cignaWQnLCAnYmx1cicpXG4gICAgLmFwcGVuZCgnZmVHYXVzc2lhbkJsdXInKS5hdHRyKCdzdGREZXZpYXRpb24nLCAwLjgpO1xuICBpZiAoc21hbGwpIHtcbiAgICBzdmcuc2VsZWN0QWxsKCdnJykucmVtb3ZlKCk7XG4gICAgc3ZnLmFwcGVuZCgnZycpXG4gICAgICAuYXBwZW5kKCdjaXJjbGUnKVxuICAgICAgLmF0dHIoJ2N4JywgMTApLmF0dHIoJ2N5JywgMTApXG4gICAgICAuYXR0cigncicsIDcpXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCBoZWF0bWFwQ29sb3JzWzBdKVxuICAgICAgLmF0dHIoJ2ZpbHRlcicsICd1cmwoI2JsdXIpJyk7XG4gIH0gZWxzZSB7XG4gICAgc3ZnLnNlbGVjdEFsbCgnY2lyY2xlJykucmVtb3ZlKCk7XG4gICAgc3ZnLnNlbGVjdEFsbCgnY2lyY2xlJylcbiAgICAgIC5kYXRhKGhlYXRtYXBDb2xvcnMpLmVudGVyKClcbiAgICAgIC5hcHBlbmQoJ2NpcmNsZScpXG4gICAgICAuYXR0cignY3gnLCAxMCkuYXR0cignY3knLCAxMClcbiAgICAgIC5hdHRyKCdyJywgKGQsIGkpID0+IHtcbiAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gMTA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPT09IDEpIHtcbiAgICAgICAgICByZXR1cm4gODtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaSA9PT0gMikge1xuICAgICAgICAgIHJldHVybiA2O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpID09PSAzKSB7XG4gICAgICAgICAgcmV0dXJuIDM7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCAoZCwgaSkgPT4gZClcbiAgICAgIC5hdHRyKCdmaWx0ZXInLCAndXJsKCNibHVyKScpO1xuICB9XG59XG5cbi8qKlxuICogRHJhd3MgdGhlIGxpbmUgaWNvbiBmb3IgZmVhdHVyZSBtb2RlXG4gKiBAcGFyYW0gc3ZnTm9kZSBTVkcgZWxlbWVudCBvbiB3aGljaCB3ZSBhcHBlbmQgdGhlIGxpbmUgdXNpbmcgZDMuXG4gKiBAcGFyYW0gY29sb3JMZWdlbmQgQ29sb3IgbGVnZW5kLCB0byBnaXZlIHRoZSBkcmF3biBpY29ucyBsaW5lIHRoZSBzYW1lIGNvbG9yIG9uIHRoZSBtYXBcbiAqIEBwYXJhbSBkYXNoQXJyYXkgQXJyYXkgcmVwcmVzZW50aW5nIHRoZSBkYXNoIHBhdHRlcm5cbiAqIEBwYXJhbSBbaXNNZXRyaWM9ZmFsc2VdIFdoZXRoZXIgdGhlIGxheWVyIGRlcGVuZHMgb24gYSBtZXRyaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRyYXdMaW5lSWNvbihzdmdOb2RlOiBTVkdFbGVtZW50LCBjb2xvckxlZ2VuZDogTGVnZW5kLCBkYXNoQXJyYXk6IEFycmF5PG51bWJlcj4sIGlzTWV0cmljID0gZmFsc2UpIHtcbiAgbGV0IGxpbmVDb2xvciA9ICcnO1xuICBpZiAoY29sb3JMZWdlbmQudHlwZSA9PT0gUFJPUEVSVFlfU0VMRUNUT1JfU09VUkNFLmZpeCkge1xuICAgIGxpbmVDb2xvciA9IGNvbG9yTGVnZW5kLmZpeFZhbHVlICsgJyc7XG4gIH0gZWxzZSBpZiAoY29sb3JMZWdlbmQudHlwZSA9PT0gUFJPUEVSVFlfU0VMRUNUT1JfU09VUkNFLmludGVycG9sYXRlZCkge1xuICAgIGNvbnN0IGl2ID0gY29sb3JMZWdlbmQuaW50ZXJwb2xhdGVkVmFsdWVzO1xuICAgIGlmIChpdikge1xuICAgICAgbGluZUNvbG9yID0gaXZbMF0gKyAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgbGluZUNvbG9yID0gJyMyZGE0ZmYnO1xuICAgIH1cbiAgfSBlbHNlIGlmIChjb2xvckxlZ2VuZC50eXBlID09PSBQUk9QRVJUWV9TRUxFQ1RPUl9TT1VSQ0UubWFudWFsIHx8IGNvbG9yTGVnZW5kLnR5cGUgPT09IFBST1BFUlRZX1NFTEVDVE9SX1NPVVJDRS5nZW5lcmF0ZWRcbiAgICB8fCBjb2xvckxlZ2VuZC50eXBlID09PSBQUk9QRVJUWV9TRUxFQ1RPUl9TT1VSQ0UucHJvdmlkZWQpIHtcbiAgICBjb25zdCBtdiA9IGNvbG9yTGVnZW5kLm1hbnVhbFZhbHVlcyBhcyBNYXA8c3RyaW5nLCBzdHJpbmc+O1xuICAgIGxpbmVDb2xvciA9IG12LnZhbHVlcygpLm5leHQoKS52YWx1ZTtcbiAgfVxuICBsZXQgc3ZnRGFzaEFycmF5ID0gJzAnO1xuICBpZiAoISFkYXNoQXJyYXkgJiYgZGFzaEFycmF5Lmxlbmd0aCA+IDEpIHtcbiAgICBjb25zdCBqb2luZWREYXNoQXJyYXkgPSBkYXNoQXJyYXkuam9pbignLCcpO1xuICAgIGlmIChqb2luZWREYXNoQXJyYXkgPT09ICcyLDUnKSB7XG4gICAgICBzdmdEYXNoQXJyYXkgPSAnMCwgMiwgMyc7XG4gICAgfSBlbHNlIGlmIChqb2luZWREYXNoQXJyYXkgPT09ICcwLjEsNScpIHtcbiAgICAgIHN2Z0Rhc2hBcnJheSA9ICcxLDIuNSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN2Z0Rhc2hBcnJheSA9ICc0LDIsMSc7XG4gICAgfVxuICB9XG4gIGNvbnN0IHN2ZyA9IHNlbGVjdChzdmdOb2RlKTtcbiAgc3ZnLnNlbGVjdEFsbCgnZycpLnJlbW92ZSgpO1xuICBzdmcuYXBwZW5kKCdnJykuYXBwZW5kKCdsaW5lJylcbiAgICAuYXR0cigneDEnLCAwKS5hdHRyKCd5MScsIDE4KVxuICAgIC5hdHRyKCd4MicsIDYpLmF0dHIoJ3kyJywgMTApXG4gICAgLmF0dHIoJ2N4JywgMikuYXR0cignY3knLCAyKVxuICAgIC5hdHRyKCdzdHJva2UnLCBsaW5lQ29sb3IpLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDEuNSkuYXR0cignc3Ryb2tlLWRhc2hhcnJheScsIHN2Z0Rhc2hBcnJheSk7XG4gIHN2Zy5hcHBlbmQoJ2cnKS5hcHBlbmQoJ2xpbmUnKVxuICAgIC5hdHRyKCd4MScsIDYpLmF0dHIoJ3kxJywgMTApXG4gICAgLmF0dHIoJ3gyJywgMTIpLmF0dHIoJ3kyJywgNClcbiAgICAuYXR0cignY3gnLCAyKS5hdHRyKCdjeScsIDIpXG4gICAgLmF0dHIoJ3N0cm9rZScsIGxpbmVDb2xvcikuYXR0cignc3Ryb2tlLXdpZHRoJywgMS41KS5hdHRyKCdzdHJva2UtZGFzaGFycmF5Jywgc3ZnRGFzaEFycmF5KTtcbiAgc3ZnLmFwcGVuZCgnZycpLmFwcGVuZCgnbGluZScpXG4gICAgLmF0dHIoJ3gxJywgMTIpLmF0dHIoJ3kxJywgNClcbiAgICAuYXR0cigneDInLCAxOCkuYXR0cigneTInLCAwKVxuICAgIC5hdHRyKCdjeCcsIDIpLmF0dHIoJ2N5JywgMilcbiAgICAuYXR0cignc3Ryb2tlJywgbGluZUNvbG9yKS5hdHRyKCdzdHJva2Utd2lkdGgnLCAxLjUpLmF0dHIoJ3N0cm9rZS1kYXNoYXJyYXknLCBzdmdEYXNoQXJyYXkpO1xuICBpZiAoaXNNZXRyaWMpIHtcbiAgICBzdmcuYXBwZW5kKCdnJykuYXBwZW5kKCd0ZXh0JykudGV4dCgn4oiRJylcbiAgICAgIC5hdHRyKCd4JywgMTApLmF0dHIoJ3knLCAxNikuYXR0cignZm9udC1zaXplJywgJzAuNWVtJykuYXR0cignZm9udC13ZWlnaHQnLCAnYm9sZCcpLmF0dHIoJ2ZpbGwnLCBjb2xvckxlZ2VuZC5maXhWYWx1ZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBEcmF3cyB0aGUgY2lyY2xlIGljb24gZm9yIGZlYXR1cmUgbW9kZVxuICogQHBhcmFtIHN2Z05vZGUgU1ZHIGVsZW1lbnQgb24gd2hpY2ggd2UgYXBwZW5kIHRoZSBjaXJjbGVzIHVzaW5nIGQzLlxuICogQHBhcmFtIGNvbG9yTGVnZW5kIENvbG9yIGxlZ2VuZCwgdG8gZ2l2ZSB0aGUgZHJhd24gaWNvbnMgY2lyY2xlcyB0aGUgc2FtZSBjb2xvciBvbiB0aGUgbWFwXG4gKiBAcGFyYW0gc3Ryb2tlQ29sb3JMZWdlbmQgQ29sb3IgbGVnZW5kLCB0byBnaXZlIHRoZSBkcmF3biBpY29ucyBjaXJjbGVzIHRoZSBzYW1lIHN0cm9rZSBjb2xvciBvbiB0aGUgbWFwXG4gKiBAcGFyYW0gW2lzTWV0cmljPWZhbHNlXSBXaGV0aGVyIHRoZSBsYXllciBkZXBlbmRzIG9uIGEgbWV0cmljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkcmF3RmVhdHVyZUNpcmNsZUljb24oc3ZnTm9kZTogU1ZHRWxlbWVudCwgY29sb3JMZWdlbmQ6IExlZ2VuZCwgc3Ryb2tlQ29sb3JMZWdlbmQ6IExlZ2VuZCwgaXNNZXRyaWMgPSBmYWxzZSkge1xuICBjb25zdCBjb2xvcnNMaXN0ID0gW107XG4gIGNvbnN0IHN0cm9rZUNvbG9yc0xpc3QgPSBbXTtcbiAgcG9wdWxhdGVMaXN0RnJvbUxlZ2VuZChjb2xvcnNMaXN0LCBjb2xvckxlZ2VuZCk7XG4gIHBvcHVsYXRlTGlzdEZyb21MZWdlbmQoc3Ryb2tlQ29sb3JzTGlzdCwgc3Ryb2tlQ29sb3JMZWdlbmQpO1xuXG4gIGNvbnN0IHN2ZyA9IHNlbGVjdChzdmdOb2RlKTtcbiAgc3ZnLnNlbGVjdEFsbCgnY2lyY2xlJykucmVtb3ZlKCk7XG4gIHN2Zy5zZWxlY3RBbGwoJ2cnKS5yZW1vdmUoKTtcbiAgc3ZnLnNlbGVjdEFsbCgnY2lyY2xlJylcbiAgICAuZGF0YShjb2xvcnNMaXN0KS5lbnRlcigpXG4gICAgLmFwcGVuZCgnY2lyY2xlJylcbiAgICAuYXR0cignY3gnLCAoZCwgaSkgPT4ge1xuICAgICAgaWYgKGNvbG9yc0xpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiAxMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIDY7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPT09IDEpIHtcbiAgICAgICAgICByZXR1cm4gMTI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPT09IDIpIHtcbiAgICAgICAgICByZXR1cm4gNTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLmF0dHIoJ2N5JywgKGQsIGkpID0+IHtcbiAgICAgIGlmIChjb2xvcnNMaXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gMTA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiA1O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpID09PSAxKSB7XG4gICAgICAgICAgcmV0dXJuIDEwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpID09PSAyKSB7XG4gICAgICAgICAgcmV0dXJuIDE1O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuYXR0cigncicsIChkLCBpKSA9PiB7XG4gICAgICBpZiAoY29sb3JzTGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIDc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gMztcbiAgICAgIH1cbiAgICB9KVxuICAgIC5zdHlsZSgnZmlsbCcsIChkLCBpKSA9PiBkKS5zdHlsZSgnZmlsbC1vcGFjaXR5JywgY29sb3JzTGlzdC5sZW5ndGggPT09IDEgPyAwLjYgOiAwLjgpXG4gICAgLnN0eWxlKCdzdHJva2UnLCAoZCwgaSkgPT4gc3Ryb2tlQ29sb3JzTGlzdFtpXSkuc3R5bGUoJ3N0cm9rZS13aWR0aCcsIDAuNSk7XG5cbiAgaWYgKGlzTWV0cmljKSB7XG4gICAgc3ZnLmFwcGVuZCgnZycpLmFwcGVuZCgndGV4dCcpLnRleHQoJ+KIkScpXG4gICAgICAuYXR0cigneCcsIDEwKS5hdHRyKCd5JywgMTYpLmF0dHIoJ2ZvbnQtc2l6ZScsICcwLjVlbScpLmF0dHIoJ2ZvbnQtd2VpZ2h0JywgJ2JvbGQnKS5hdHRyKCdmaWxsJywgY29sb3JMZWdlbmQuZml4VmFsdWUpO1xuICB9XG59XG5cblxuLyoqXG4gKiBkcmF3cyB0aGUgY2lyY2xlIGljb24gZm9yIGNsdXN0ZXIgbW9kZVxuICogQHBhcmFtIHN2Z05vZGUgU1ZHIGVsZW1lbnQgb24gd2hpY2ggd2UgYXBwZW5kIHRoZSBjaXJjbGVzIHVzaW5nIGQzLlxuICogQHBhcmFtIGNvbG9yTGVnZW5kIENvbG9yIGxlZ2VuZCwgdG8gZ2l2ZSB0aGUgZHJhd24gaWNvbnMgY2lyY2xlcyB0aGUgc2FtZSBjb2xvciBvbiB0aGUgbWFwXG4gKiBAcGFyYW0gc3Ryb2tlQ29sb3JMZWdlbmQgQ29sb3IgbGVnZW5kLCB0byBnaXZlIHRoZSBkcmF3biBpY29ucyBjaXJjbGVzIHRoZSBzYW1lIHN0cm9rZSBjb2xvciBvbiB0aGUgbWFwXG4gKiBAcGFyYW0gYWRkQmx1ciBXaGV0aGVyIHRvIGFkZCBibHVyIHRvIHRoZSBkcmF3biBjaXJjbGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkcmF3Q2x1c3RlckNpcmNsZUljb24oc3ZnTm9kZTogU1ZHRWxlbWVudCwgY29sb3JMZWdlbmQ6IExlZ2VuZCwgc3Ryb2tlQ29sb3JMZWdlbmQ6IExlZ2VuZCwgYWRkQmx1ciA9IGZhbHNlKSB7XG4gIC8vIHRvZG8gaW5jbHVkZSByYWRpdXMgbGVnZW5kIGluIGRyYXdpbmcgaWNvbnNcbiAgY29uc3QgY29sb3JzTGlzdCA9IFtdO1xuICBjb25zdCBzdHJva2VDb2xvcnNMaXN0ID0gW107XG4gIHBvcHVsYXRlTGlzdEZyb21MZWdlbmQoY29sb3JzTGlzdCwgY29sb3JMZWdlbmQpO1xuICBwb3B1bGF0ZUxpc3RGcm9tTGVnZW5kKHN0cm9rZUNvbG9yc0xpc3QsIHN0cm9rZUNvbG9yTGVnZW5kKTtcbiAgY29uc3Qgc3ZnID0gc2VsZWN0KHN2Z05vZGUpO1xuICBzdmcuc2VsZWN0QWxsKCdjaXJjbGUnKS5yZW1vdmUoKTtcbiAgc3ZnLmFwcGVuZCgnZGVmcycpXG4gICAgLmFwcGVuZCgnZmlsdGVyJylcbiAgICAuYXR0cignaWQnLCAnYmx1ckhlYXRtYXBDaXJjbGUnKVxuICAgIC5hdHRyKCd4JywgJy0xMCUnKVxuICAgIC5hdHRyKCd5JywgJy00MCUnKVxuICAgIC5hdHRyKCd3aWR0aCcsICcxNjAlJylcbiAgICAuYXR0cignaGVpZ2h0JywgJzE2MCUnKVxuICAgIC5hcHBlbmQoJ2ZlR2F1c3NpYW5CbHVyJykuYXR0cignc3RkRGV2aWF0aW9uJywgMS45KTtcbiAgc3ZnLnNlbGVjdEFsbCgnY2lyY2xlJylcbiAgICAuZGF0YShjb2xvcnNMaXN0KS5lbnRlcigpXG4gICAgLmFwcGVuZCgnY2lyY2xlJylcbiAgICAuYXR0cignY3gnLCAoZCwgaSkgPT4ge1xuICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIDEyO1xuICAgICAgfVxuICAgICAgaWYgKGkgPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIDY7XG4gICAgICB9XG4gICAgICBpZiAoaSA9PT0gMikge1xuICAgICAgICByZXR1cm4gMTA7XG4gICAgICB9XG4gICAgfSlcbiAgICAuYXR0cignY3knLCAoZCwgaSkgPT4ge1xuICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIDc7XG4gICAgICB9XG4gICAgICBpZiAoaSA9PT0gMSkge1xuICAgICAgICByZXR1cm4gMTE7XG4gICAgICB9XG4gICAgICBpZiAoaSA9PT0gMikge1xuICAgICAgICByZXR1cm4gMTU7XG4gICAgICB9XG4gICAgfSlcbiAgICAuYXR0cigncicsIChkLCBpKSA9PiB7XG4gICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gNjtcbiAgICAgIH1cbiAgICAgIGlmIChpID09PSAxKSB7XG4gICAgICAgIHJldHVybiA1O1xuICAgICAgfVxuICAgICAgaWYgKGkgPT09IDIpIHtcbiAgICAgICAgcmV0dXJuIDM7XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3R5bGUoJ2ZpbGwnLCAoZCwgaSkgPT4gZCkuc3R5bGUoJ2ZpbGwtb3BhY2l0eScsIDAuNylcbiAgICAuc3R5bGUoJ3N0cm9rZScsIChkLCBpKSA9PiBzdHJva2VDb2xvcnNMaXN0W2ldKS5zdHlsZSgnc3Ryb2tlLXdpZHRoJywgMC44KTtcblxuICBpZiAoYWRkQmx1cikge1xuICAgIHN2Zy5zZWxlY3RBbGwoJ2NpcmNsZScpLmF0dHIoJ2ZpbHRlcicsICd1cmwoI2JsdXJIZWF0bWFwQ2lyY2xlKScpO1xuICB9XG5cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gcG9wdWxhdGVMaXN0RnJvbUxlZ2VuZChsaXN0OiBBcnJheTxzdHJpbmcgfCBudW1iZXI+LCBsZWdlbmQ6IExlZ2VuZCkge1xuICBpZiAobGVnZW5kLnR5cGUgPT09IFBST1BFUlRZX1NFTEVDVE9SX1NPVVJDRS5maXgpIHtcbiAgICBsaXN0LnB1c2gobGVnZW5kLmZpeFZhbHVlKTtcbiAgICBsaXN0LnB1c2gobGVnZW5kLmZpeFZhbHVlKTtcbiAgICBsaXN0LnB1c2gobGVnZW5kLmZpeFZhbHVlKTtcbiAgfSBlbHNlIGlmIChsZWdlbmQudHlwZSA9PT0gUFJPUEVSVFlfU0VMRUNUT1JfU09VUkNFLmludGVycG9sYXRlZCkge1xuICAgIGNvbnN0IGl2ID0gbGVnZW5kLmludGVycG9sYXRlZFZhbHVlcztcbiAgICBpZiAoaXY/Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgbGlzdC5wdXNoKGl2WzBdLCBpdlswXSwgaXZbMF0pO1xuICAgIH0gZWxzZSBpZiAoaXYubGVuZ3RoID09PSAyKSB7XG4gICAgICBsaXN0LnB1c2goaXZbMF0sIGl2WzBdLCBpdlsxXSk7XG4gICAgfSBlbHNlIGlmIChpdi5sZW5ndGggPj0gMykge1xuICAgICAgbGlzdC5wdXNoKGl2WzBdLCBpdltNYXRoLnRydW5jKGl2Lmxlbmd0aCAvIDIpXSwgaXZbaXYubGVuZ3RoIC0gMV0pO1xuICAgIH1cbiAgfSBlbHNlIGlmIChsZWdlbmQudHlwZSA9PT0gUFJPUEVSVFlfU0VMRUNUT1JfU09VUkNFLm1hbnVhbCB8fCBsZWdlbmQudHlwZSA9PT0gUFJPUEVSVFlfU0VMRUNUT1JfU09VUkNFLmdlbmVyYXRlZFxuICAgIHx8IGxlZ2VuZC50eXBlID09PSBQUk9QRVJUWV9TRUxFQ1RPUl9TT1VSQ0UucHJvdmlkZWQpIHtcbiAgICBjb25zdCBpdiA9IGxlZ2VuZC5tYW51YWxWYWx1ZXMgYXMgTWFwPHN0cmluZywgc3RyaW5nPjtcbiAgICBpZiAoaXYpIHtcbiAgICAgIGlmIChpdi5zaXplID09PSAxKSB7XG4gICAgICAgIGNvbnN0IGNvbG9yID0gaXYudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuICAgICAgICBsaXN0LnB1c2goY29sb3IsIGNvbG9yLCBjb2xvcik7XG4gICAgICB9IGVsc2UgaWYgKGl2LnNpemUgPT09IDIpIHtcbiAgICAgICAgbGlzdC5wdXNoKEFycmF5LmZyb20oaXYudmFsdWVzKCkpWzBdLCBBcnJheS5mcm9tKGl2LnZhbHVlcygpKVswXSwgQXJyYXkuZnJvbShpdi52YWx1ZXMoKSlbMV0pO1xuICAgICAgfSBlbHNlIGlmIChpdi5zaXplID49IDMpIHtcbiAgICAgICAgbGlzdC5wdXNoKEFycmF5LmZyb20oaXYudmFsdWVzKCkpWzBdLCBBcnJheS5mcm9tKGl2LnZhbHVlcygpKVtNYXRoLnRydW5jKEFycmF5LmZyb20oaXYua2V5cygpKS5sZW5ndGggLyAyKV0sXG4gICAgICAgICAgQXJyYXkuZnJvbShpdi52YWx1ZXMoKSlbQXJyYXkuZnJvbShpdi5rZXlzKCkpLmxlbmd0aCAtIDFdKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFpdiB8fCBpdi5zaXplID09PSAwKSB7XG4gICAgICBsaXN0LnB1c2goJyNlZWUnLCAnI2VlZScsICcjZWVlJyk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDbHVzdGVyRmlsbENvbG9ycyhjb2xvckxlZ2VuZDogTGVnZW5kKTogc3RyaW5nW10ge1xuICBjb25zdCBmb3VyQ29sb3JzID0gW107XG4gIGlmIChjb2xvckxlZ2VuZC50eXBlID09PSBQUk9QRVJUWV9TRUxFQ1RPUl9TT1VSQ0UuaW50ZXJwb2xhdGVkKSB7XG4gICAgY29uc3QgaXYgPSBjb2xvckxlZ2VuZC5pbnRlcnBvbGF0ZWRWYWx1ZXM7XG4gICAgaWYgKGl2KSB7XG4gICAgICBpZiAoaXYubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgICAgZm91ckNvbG9ycy5wdXNoKGl2WzBdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpdi5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgZm91ckNvbG9ycy5wdXNoKGl2WzBdKTtcbiAgICAgICAgZm91ckNvbG9ycy5wdXNoKGl2WzFdKTtcbiAgICAgICAgZm91ckNvbG9ycy5wdXNoKGl2WzBdKTtcbiAgICAgICAgZm91ckNvbG9ycy5wdXNoKGl2WzFdKTtcbiAgICAgIH0gZWxzZSBpZiAoaXYubGVuZ3RoID49IDMpIHtcbiAgICAgICAgZm91ckNvbG9ycy5wdXNoKGl2WzBdKTtcbiAgICAgICAgZm91ckNvbG9ycy5wdXNoKGl2W01hdGgudHJ1bmMoMiAqIGl2Lmxlbmd0aCAvIDMpXSk7XG4gICAgICAgIGZvdXJDb2xvcnMucHVzaChpdltpdi5sZW5ndGggLSAxXSk7XG4gICAgICAgIGZvdXJDb2xvcnMucHVzaChpdltNYXRoLnRydW5jKGl2Lmxlbmd0aCAvIDMpXSk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGNvbG9yTGVnZW5kLnR5cGUgPT09IFBST1BFUlRZX1NFTEVDVE9SX1NPVVJDRS5maXgpIHtcbiAgICBjb25zdCBjID0gY29sb3JMZWdlbmQuZml4VmFsdWU7XG4gICAgZm91ckNvbG9ycy5wdXNoKGMsIGMsIGMsIGMpO1xuICB9XG4gIHJldHVybiBmb3VyQ29sb3JzO1xufVxuIiwiPGRpdiBjbGFzcz1cImxlZ2VuZC1pY29uXCI+XG4gIDxzdmcgI2xheWVyX2ljb24gY2xhc3M9XCJsZWdlbmQtaWNvbl9fc3ZnXCI+PC9zdmc+XG48L2Rpdj5cbiJdfQ==