/*
 * Licensed to Gisaïa under one or more contributor
 * license agreements. See the NOTICE.txt file distributed with
 * this work for additional information regarding copyright
 * ownership. Gisaïa licenses this file to you under
 * the Apache License, Version 2.0 (the "License"); you may
 * not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
import { ChangeDetectorRef, Component, ElementRef, Input, Output, ViewChild } from '@angular/core';
import { FullScreenViewer, ImageViewer } from 'iv-viewer';
import { Subject } from 'rxjs';
import { Item } from '../model/item';
import { PROTECTED_IMAGE_HEADER } from '../utils/results.utils';
import { HttpClient } from '@angular/common/http';
import { marker } from '@colsen1991/ngx-translate-extract-marker';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
import * as i2 from "@angular/common";
import * as i3 from "@angular/material/icon";
import * as i4 from "@angular/material/button";
import * as i5 from "@angular/material/tooltip";
import * as i6 from "@angular/material/progress-spinner";
import * as i7 from "../result-detailed-item/result-detailed-item.component";
import * as i8 from "@ngx-translate/core";
export class ResultDetailedGridComponent {
    constructor(changeDetectorRef, http) {
        this.changeDetectorRef = changeDetectorRef;
        this.http = http;
        /**
         * @constant
         */
        this.SHOW_DETAILS = marker('Show details');
        /**
         * @constant
         */
        this.VIEW_IMAGE = marker('View in full screen');
        /**
         * @constant
         */
        this.SHOW_IMAGE = marker('Show image');
        /**
         * @constant
         */
        this.CLOSE_DETAILS = marker('Close details');
        this.fullScreenViewer = new FullScreenViewer();
        /**
         * @Input
         * @description Whether display group with no detail.
         */
        this.showEmptyGroup = false;
        /**
         * @Input : Angular
         * @description Whether to use a http request to query detailed image instead of relying on img tag internal mechanism.
         */
        this.useHttp = false;
        /**
         * @Input : Angular
         * @description List of active actions per item.
        */
        this.activatedActionsPerItem = new Map();
        /**
         * @Output
         * @description Emits the event of applying the specified action on the specified item.
         */
        this.actionOnItemEvent = new Subject();
        /**
       * @Output
       * @description Emits the event of closing details.
       */
        this.closeDetail = new Subject();
        this.isDetailedDataShowed = false;
        /**
         * @description Whether the request for the image is being processed
         */
        this.isLoading = false;
        /**
         * @description In the case of multiple images, indicates which one is selected
         */
        this.currentImageIndex = 0;
        /**
         * @description Whether the viewer is in full screen mode
         */
        this.isFullScreen = false;
    }
    ngOnDestroy() {
        this.destroyViewer(true);
    }
    ngOnChanges(changes) {
        if (changes['gridTile']) {
            if (this.viewer) {
                this.viewer = this.viewer.destroy();
            }
            this.isFullScreen = false;
            this.currentImageIndex = 0;
            this.getImage();
        }
    }
    getImage() {
        this.imgSrc = undefined;
        if (!this.gridTile || (this.gridTile && (!this.gridTile.urlImages || this.gridTile.urlImages.length === 0))) {
            return;
        }
        if (this.useHttp) {
            this.isLoading = true;
            this.http.get(this.gridTile.urlImages[this.currentImageIndex], { headers: { [PROTECTED_IMAGE_HEADER]: 'true' }, responseType: 'blob' })
                .subscribe({
                next: (image) => {
                    const reader = new FileReader();
                    reader.addEventListener('load', () => {
                        this.imgSrc = reader.result;
                        this.gridTile.imageEnabled = true;
                        this.isLoading = false;
                        this.resetViewer();
                    }, false);
                    if (image) {
                        reader.readAsDataURL(image);
                    }
                }, error: (err) => {
                    console.error(err);
                    this.isLoading = false;
                }
            });
        }
        else {
            this.imgSrc = this.gridTile.urlImages[this.currentImageIndex];
            this.gridTile.imageEnabled = true;
            this.resetViewer();
        }
    }
    resetViewer() {
        if (this.viewer) {
            this.viewer = this.viewer.destroy();
        }
        setTimeout(() => {
            if (this.isFullScreen) {
                this.fullScreenViewer.show(this.imgSrc);
            }
            else {
                if (!!this.imageViewer && !this.viewer) {
                    this.viewer = new ImageViewer(this.imageViewer.nativeElement);
                }
            }
        }, 0);
    }
    destroyViewer(isComponentDestroy) {
        if (this.viewer) {
            this.viewer = this.viewer.destroy();
        }
        if (isComponentDestroy && this.fullScreenViewer) {
            this.fullScreenViewer.destroy();
        }
        // Add a delay to allow for the viewer to be destroyed properly
        // before removing it due to visibility rules in the template
        setTimeout(() => {
            this.imgSrc = undefined;
        }, 0);
    }
    showHideDetailedData() {
        this.isDetailedDataShowed = !this.isDetailedDataShowed;
        this.changeDetectorRef.detectChanges();
        this.resetViewer();
    }
    closeDetailedData() {
        this.isDetailShowed = false;
        this.closeDetail.next(true);
    }
    // Emits the action on this ResultDetailedItem to the parent (ResultList)
    triggerActionOnItem(actionOnItem) {
        this.actionOnItemEvent.next(actionOnItem);
    }
    showOverlay() {
        this.isFullScreen = true;
        this.resetViewer();
        let viewerContainer;
        const fullScreenContainer = document.querySelector('.iv-fullscreen-container');
        const actionsInfos = document.getElementsByClassName('viewer_actions-infos');
        if (!!actionsInfos && !!actionsInfos[0]) {
            viewerContainer = actionsInfos[0].parentElement;
            const elements = actionsInfos.length;
            for (let i = 0; i < elements; i++) {
                // The element is removed from the list once retrieved
                fullScreenContainer.appendChild(actionsInfos.item(0));
            }
        }
        document.querySelector('.iv-fullscreen-close').addEventListener('click', () => {
            this.isFullScreen = false;
            if (viewerContainer) {
                const actionsInfosFullScreen = fullScreenContainer.getElementsByClassName('viewer_actions-infos');
                const elements = actionsInfosFullScreen.length;
                for (let i = 0; i < elements; i++) {
                    // The element is removed from the list once retrieved
                    viewerContainer.appendChild(actionsInfosFullScreen.item(0));
                }
            }
            this.resetViewer();
        });
    }
    onPrevious() {
        this.currentImageIndex -= 1;
        if (this.currentImageIndex < 0) {
            this.currentImageIndex = this.gridTile.urlImages.length - 1;
        }
        this.getImage();
    }
    onNext() {
        this.currentImageIndex += 1;
        if (this.currentImageIndex >= this.gridTile.urlImages.length) {
            this.currentImageIndex = 0;
        }
        this.getImage();
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: ResultDetailedGridComponent, deps: [{ token: i0.ChangeDetectorRef }, { token: i1.HttpClient }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "18.2.13", type: ResultDetailedGridComponent, selector: "arlas-result-detailed-grid", inputs: { gridTile: "gridTile", detailWidth: "detailWidth", detailHeight: "detailHeight", idFieldName: "idFieldName", isDetailShowed: "isDetailShowed", showEmptyGroup: "showEmptyGroup", useHttp: "useHttp", activatedActionsPerItem: "activatedActionsPerItem", detailedDataRetriever: "detailedDataRetriever" }, outputs: { actionOnItemEvent: "actionOnItemEvent", closeDetail: "closeDetail" }, viewQueries: [{ propertyName: "imageViewer", first: true, predicate: ["image_detail"], descendants: true }], usesOnChanges: true, ngImport: i0, template: "<div class=\"resultgrid\" *ngIf=isDetailShowed>\n  <div class=\"resultgrid--container\">\n    <div [hidden]=\"isDetailedDataShowed\">\n      <div class=\"resultgrid__img\" [style.height.px]=\"detailHeight\" [style.width.px]=\"detailWidth\">\n        <img class=\"image_view\" #image_detail *ngIf=\"gridTile.imageEnabled\" src=\"{{imgSrc}}\" (error)=\"destroyViewer()\">\n        <img *ngIf=\"(!gridTile.imageEnabled || !imgSrc) && !isLoading\" src=\"{{noViewImg}}\">\n        <mat-progress-spinner *ngIf=\"isLoading\" [color]=\"'accent'\" [diameter]=\"detailHeight < detailWidth ? detailHeight / 2 : detailWidth / 2\" [mode]=\"'indeterminate'\"></mat-progress-spinner>\n      </div>\n\n      <button mat-icon-button class=\"viewer_actions-infos navigate-button previous\" *ngIf=\"gridTile.urlImages && gridTile.urlImages.length > 1\" matTooltip=\"{{'Previous image' | translate}}\" (click)=\"onPrevious()\">\n        <mat-icon>keyboard_arrow_left</mat-icon>\n      </button>\n      <div class=\"viewer_actions-infos description\" *ngIf=\"gridTile.descriptions\">{{ gridTile.descriptions[currentImageIndex] }}</div>\n      <button mat-icon-button class=\"viewer_actions-infos navigate-button next\" *ngIf=\"gridTile.urlImages && gridTile.urlImages.length > 1\" matTooltip=\"{{'Next image' | translate}}\" (click)=\"onNext()\">\n        <mat-icon>keyboard_arrow_right</mat-icon>\n      </button>\n\n      <div class=\"resultgrid__info-button\">\n        <button [disabled]=\"!gridTile.imageEnabled || isLoading\" id=\"view_image_gridmode_btn\" matTooltip=\"{{VIEW_IMAGE | translate}}\"\n          class=\"resultgrid__info-view-button\" mat-mini-fab (click)=\"showOverlay()\">\n          <mat-icon class=\"resultgrid__info_outline\">fit_screen</mat-icon>\n        </button>\n        <button id=\"show_details_gridmode_btn\" matTooltip=\"{{SHOW_DETAILS | translate}}\" class=\"resultgrid__info-show-button\" mat-mini-fab color=\"primary\" (click)=\"showHideDetailedData()\">\n          <mat-icon class=\"resultgrid__info_outline\">info_outline</mat-icon>\n        </button>\n        <button id=\"close_details_gridmode_btn\" matTooltip=\"{{CLOSE_DETAILS | translate}}\" class=\"resultgrid__info-close-button\" mat-mini-fab color=\"primary\" (click)=\"closeDetailedData()\">\n            <mat-icon class=\"resultgrid__close\">close</mat-icon>\n        </button>\n      </div>\n    </div>\n\n    <div [hidden]=\"!isDetailedDataShowed\">\n      <div class=\"resultgrid__info-button\">\n        <button id=\"show_image_gridmode_btn\" matTooltip=\"{{SHOW_IMAGE | translate}}\" class=\"resultgrid__info-show-button\" mat-mini-fab color=\"primary\" (click)=\"showHideDetailedData()\">\n          <mat-icon class=\"resultgrid__image\">image</mat-icon>\n        </button>\n        <button id=\"close_details_gridmode_btn\" matTooltip=\"{{CLOSE_DETAILS | translate}}\" class=\"resultgrid__info-close-button\" mat-mini-fab color=\"primary\" (click)=\"closeDetailedData()\">\n          <mat-icon class=\"resultgrid__close\">close</mat-icon>\n        </button>\n      </div>\n      <div arlas-result-detailed-item class=\"resultgrid--detailed-item\"\n        [rowItem]=\"gridTile\" [containerType]=\"'grid'\" [idFieldName]=\"idFieldName\"\n        [detailedDataRetriever]=\"detailedDataRetriever\"\n        [activatedActionsPerItem]=\"activatedActionsPerItem\"\n        [style.width.px]=\"detailWidth\" [style.height.px]=\"detailHeight\"\n        [showEmptyGroup]= \"showEmptyGroup\" (actionOnItemEvent)=\"triggerActionOnItem($event)\">\n      </div>\n    </div>\n  </div>\n</div>\n", styles: ["@charset \"UTF-8\";.resultgrid__img{overflow-y:hidden;overflow-x:hidden;text-align:center;vertical-align:middle;background-color:#000;display:flex;justify-content:center;align-items:center}.viewer_actions-infos{position:absolute;bottom:5px;z-index:999}.viewer_actions-infos.description{color:#fff;background-color:#6d6d6d99;padding:0 5px;left:50%;transform:translate(-50%)}.viewer_actions-infos.navigate-button{height:24px;width:24px;background-color:#fff;border:1px solid #a1a1a1;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:0}.viewer_actions-infos.navigate-button.previous{left:5px}.viewer_actions-infos.navigate-button.next{right:5px}.viewer_actions-infos.navigate-button ::ng-deep .mat-icon{overflow:unset}.resultgrid{width:100%;height:100%;font-family:Roboto,Helvetica Neue,sans-serif;text-align:left;vertical-align:middle}.resultgrid--container{width:100%;height:100%;position:relative}.resultgrid__info-button{position:absolute;top:5px;right:0;background-color:transparent;z-index:1}.resultgrid__info-button ::ng-deep .mat-mdc-mini-fab[disabled]{color:gray}.resultgrid__info-view-button,.resultgrid__info-show-button,.resultgrid__info-close-button{top:5px;right:15px;background-color:#fff;color:#000;width:24px;height:24px;margin-right:5px}.image_view{max-height:100%;max-width:100%;cursor:pointer}.full-screen{height:100vh;width:100vw}::ng-deep .iv-image-mode{display:flex;height:100%!important;width:100%!important}::-webkit-scrollbar{width:6px;height:6px;background-color:#fff}::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#fff}::-webkit-scrollbar-thumb{background-color:#555}.resultgrid__info_outline,.resultgrid__close,.resultgrid__image{font-size:20px;width:20px;height:20px}.resultgrid-overlay{width:100vw;height:100vh;position:absolute;top:0;left:0;background-color:#555;opacity:.5}\n"], dependencies: [{ kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i3.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "component", type: i4.MatIconButton, selector: "button[mat-icon-button]", exportAs: ["matButton"] }, { kind: "component", type: i4.MatMiniFabButton, selector: "button[mat-mini-fab]", exportAs: ["matButton"] }, { kind: "directive", type: i5.MatTooltip, selector: "[matTooltip]", inputs: ["matTooltipPosition", "matTooltipPositionAtOrigin", "matTooltipDisabled", "matTooltipShowDelay", "matTooltipHideDelay", "matTooltipTouchGestures", "matTooltip", "matTooltipClass"], exportAs: ["matTooltip"] }, { kind: "component", type: i6.MatProgressSpinner, selector: "mat-progress-spinner, mat-spinner", inputs: ["color", "mode", "value", "diameter", "strokeWidth"], exportAs: ["matProgressSpinner"] }, { kind: "component", type: i7.ResultDetailedItemComponent, selector: "[arlas-result-detailed-item]", inputs: ["detailColspan", "idFieldName", "containerType", "rowItem", "showEmptyGroup", "detailedDataRetriever", "activatedActionsPerItem"], outputs: ["actionOnItemEvent"] }, { kind: "pipe", type: i8.TranslatePipe, name: "translate" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: ResultDetailedGridComponent, decorators: [{
            type: Component,
            args: [{ selector: 'arlas-result-detailed-grid', template: "<div class=\"resultgrid\" *ngIf=isDetailShowed>\n  <div class=\"resultgrid--container\">\n    <div [hidden]=\"isDetailedDataShowed\">\n      <div class=\"resultgrid__img\" [style.height.px]=\"detailHeight\" [style.width.px]=\"detailWidth\">\n        <img class=\"image_view\" #image_detail *ngIf=\"gridTile.imageEnabled\" src=\"{{imgSrc}}\" (error)=\"destroyViewer()\">\n        <img *ngIf=\"(!gridTile.imageEnabled || !imgSrc) && !isLoading\" src=\"{{noViewImg}}\">\n        <mat-progress-spinner *ngIf=\"isLoading\" [color]=\"'accent'\" [diameter]=\"detailHeight < detailWidth ? detailHeight / 2 : detailWidth / 2\" [mode]=\"'indeterminate'\"></mat-progress-spinner>\n      </div>\n\n      <button mat-icon-button class=\"viewer_actions-infos navigate-button previous\" *ngIf=\"gridTile.urlImages && gridTile.urlImages.length > 1\" matTooltip=\"{{'Previous image' | translate}}\" (click)=\"onPrevious()\">\n        <mat-icon>keyboard_arrow_left</mat-icon>\n      </button>\n      <div class=\"viewer_actions-infos description\" *ngIf=\"gridTile.descriptions\">{{ gridTile.descriptions[currentImageIndex] }}</div>\n      <button mat-icon-button class=\"viewer_actions-infos navigate-button next\" *ngIf=\"gridTile.urlImages && gridTile.urlImages.length > 1\" matTooltip=\"{{'Next image' | translate}}\" (click)=\"onNext()\">\n        <mat-icon>keyboard_arrow_right</mat-icon>\n      </button>\n\n      <div class=\"resultgrid__info-button\">\n        <button [disabled]=\"!gridTile.imageEnabled || isLoading\" id=\"view_image_gridmode_btn\" matTooltip=\"{{VIEW_IMAGE | translate}}\"\n          class=\"resultgrid__info-view-button\" mat-mini-fab (click)=\"showOverlay()\">\n          <mat-icon class=\"resultgrid__info_outline\">fit_screen</mat-icon>\n        </button>\n        <button id=\"show_details_gridmode_btn\" matTooltip=\"{{SHOW_DETAILS | translate}}\" class=\"resultgrid__info-show-button\" mat-mini-fab color=\"primary\" (click)=\"showHideDetailedData()\">\n          <mat-icon class=\"resultgrid__info_outline\">info_outline</mat-icon>\n        </button>\n        <button id=\"close_details_gridmode_btn\" matTooltip=\"{{CLOSE_DETAILS | translate}}\" class=\"resultgrid__info-close-button\" mat-mini-fab color=\"primary\" (click)=\"closeDetailedData()\">\n            <mat-icon class=\"resultgrid__close\">close</mat-icon>\n        </button>\n      </div>\n    </div>\n\n    <div [hidden]=\"!isDetailedDataShowed\">\n      <div class=\"resultgrid__info-button\">\n        <button id=\"show_image_gridmode_btn\" matTooltip=\"{{SHOW_IMAGE | translate}}\" class=\"resultgrid__info-show-button\" mat-mini-fab color=\"primary\" (click)=\"showHideDetailedData()\">\n          <mat-icon class=\"resultgrid__image\">image</mat-icon>\n        </button>\n        <button id=\"close_details_gridmode_btn\" matTooltip=\"{{CLOSE_DETAILS | translate}}\" class=\"resultgrid__info-close-button\" mat-mini-fab color=\"primary\" (click)=\"closeDetailedData()\">\n          <mat-icon class=\"resultgrid__close\">close</mat-icon>\n        </button>\n      </div>\n      <div arlas-result-detailed-item class=\"resultgrid--detailed-item\"\n        [rowItem]=\"gridTile\" [containerType]=\"'grid'\" [idFieldName]=\"idFieldName\"\n        [detailedDataRetriever]=\"detailedDataRetriever\"\n        [activatedActionsPerItem]=\"activatedActionsPerItem\"\n        [style.width.px]=\"detailWidth\" [style.height.px]=\"detailHeight\"\n        [showEmptyGroup]= \"showEmptyGroup\" (actionOnItemEvent)=\"triggerActionOnItem($event)\">\n      </div>\n    </div>\n  </div>\n</div>\n", styles: ["@charset \"UTF-8\";.resultgrid__img{overflow-y:hidden;overflow-x:hidden;text-align:center;vertical-align:middle;background-color:#000;display:flex;justify-content:center;align-items:center}.viewer_actions-infos{position:absolute;bottom:5px;z-index:999}.viewer_actions-infos.description{color:#fff;background-color:#6d6d6d99;padding:0 5px;left:50%;transform:translate(-50%)}.viewer_actions-infos.navigate-button{height:24px;width:24px;background-color:#fff;border:1px solid #a1a1a1;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:0}.viewer_actions-infos.navigate-button.previous{left:5px}.viewer_actions-infos.navigate-button.next{right:5px}.viewer_actions-infos.navigate-button ::ng-deep .mat-icon{overflow:unset}.resultgrid{width:100%;height:100%;font-family:Roboto,Helvetica Neue,sans-serif;text-align:left;vertical-align:middle}.resultgrid--container{width:100%;height:100%;position:relative}.resultgrid__info-button{position:absolute;top:5px;right:0;background-color:transparent;z-index:1}.resultgrid__info-button ::ng-deep .mat-mdc-mini-fab[disabled]{color:gray}.resultgrid__info-view-button,.resultgrid__info-show-button,.resultgrid__info-close-button{top:5px;right:15px;background-color:#fff;color:#000;width:24px;height:24px;margin-right:5px}.image_view{max-height:100%;max-width:100%;cursor:pointer}.full-screen{height:100vh;width:100vw}::ng-deep .iv-image-mode{display:flex;height:100%!important;width:100%!important}::-webkit-scrollbar{width:6px;height:6px;background-color:#fff}::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#fff}::-webkit-scrollbar-thumb{background-color:#555}.resultgrid__info_outline,.resultgrid__close,.resultgrid__image{font-size:20px;width:20px;height:20px}.resultgrid-overlay{width:100vw;height:100vh;position:absolute;top:0;left:0;background-color:#555;opacity:.5}\n"] }]
        }], ctorParameters: () => [{ type: i0.ChangeDetectorRef }, { type: i1.HttpClient }], propDecorators: { gridTile: [{
                type: Input
            }], detailWidth: [{
                type: Input
            }], detailHeight: [{
                type: Input
            }], idFieldName: [{
                type: Input
            }], isDetailShowed: [{
                type: Input
            }], showEmptyGroup: [{
                type: Input
            }], useHttp: [{
                type: Input
            }], activatedActionsPerItem: [{
                type: Input
            }], detailedDataRetriever: [{
                type: Input
            }], actionOnItemEvent: [{
                type: Output
            }], closeDetail: [{
                type: Output
            }], imageViewer: [{
                type: ViewChild,
                args: ['image_detail', { static: false }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzdWx0LWRldGFpbGVkLWdyaWQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvYXJsYXMtY29tcG9uZW50cy9zcmMvbGliL2NvbXBvbmVudHMvcmVzdWx0cy9yZXN1bHQtZGV0YWlsZWQtZ3JpZC9yZXN1bHQtZGV0YWlsZWQtZ3JpZC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9hcmxhcy1jb21wb25lbnRzL3NyYy9saWIvY29tcG9uZW50cy9yZXN1bHRzL3Jlc3VsdC1kZXRhaWxlZC1ncmlkL3Jlc3VsdC1kZXRhaWxlZC1ncmlkLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7OztHQWlCRztBQUVILE9BQU8sRUFDTCxpQkFBaUIsRUFBRSxTQUFTLEVBQzVCLFVBQVUsRUFBRSxLQUFLLEVBQXdCLE1BQU0sRUFBaUIsU0FBUyxFQUMxRSxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsV0FBVyxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBQzFELE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDL0IsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNyQyxPQUFPLEVBQTZCLHNCQUFzQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDM0YsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQzs7Ozs7Ozs7OztBQVFsRSxNQUFNLE9BQU8sMkJBQTJCO0lBNEd0QyxZQUNVLGlCQUFvQyxFQUNwQyxJQUFnQjtRQURoQixzQkFBaUIsR0FBakIsaUJBQWlCLENBQW1CO1FBQ3BDLFNBQUksR0FBSixJQUFJLENBQVk7UUE3RzFCOztXQUVHO1FBQ0ks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QUFpQixJQUFJLENBQUMsQ0FBQztRQUM1QixJQUFJLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUMvQixJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUM5RCxDQUFDO1FBQ0QsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQ2xCLENBQUM7SUFFTSxNQUFNO1FBQ1gsSUFBSSxDQUFDLGlCQUFpQixJQUFJLENBQUMsQ0FBQztRQUM1QixJQUFJLElBQUksQ0FBQyxpQkFBaUIsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUM3RCxJQUFJLENBQUMsaUJBQWlCLEdBQUcsQ0FBQyxDQUFDO1FBQzdCLENBQUM7UUFDRCxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDbEIsQ0FBQzsrR0EzUFUsMkJBQTJCO21HQUEzQiwyQkFBMkIseWtCQ3BDeEMsKytHQWtEQTs7NEZEZGEsMkJBQTJCO2tCQUx2QyxTQUFTOytCQUNFLDRCQUE0QjsrR0EyQnRCLFFBQVE7c0JBQXZCLEtBQUs7Z0JBS1UsV0FBVztzQkFBMUIsS0FBSztnQkFLVSxZQUFZO3NCQUEzQixLQUFLO2dCQUtVLFdBQVc7c0JBQTFCLEtBQUs7Z0JBS1UsY0FBYztzQkFBN0IsS0FBSztnQkFLVSxjQUFjO3NCQUE3QixLQUFLO2dCQU1VLE9BQU87c0JBQXRCLEtBQUs7Z0JBTVUsdUJBQXVCO3NCQUF0QyxLQUFLO2dCQU9VLHFCQUFxQjtzQkFBcEMsS0FBSztnQkFNVyxpQkFBaUI7c0JBQWpDLE1BQU07Z0JBTVUsV0FBVztzQkFBM0IsTUFBTTtnQkFFOEMsV0FBVztzQkFBL0QsU0FBUzt1QkFBQyxjQUFjLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIExpY2Vuc2VkIHRvIEdpc2HDr2EgdW5kZXIgb25lIG9yIG1vcmUgY29udHJpYnV0b3JcbiAqIGxpY2Vuc2UgYWdyZWVtZW50cy4gU2VlIHRoZSBOT1RJQ0UudHh0IGZpbGUgZGlzdHJpYnV0ZWQgd2l0aFxuICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHRcbiAqIG93bmVyc2hpcC4gR2lzYcOvYSBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyXG4gKiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5XG4gKiBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIENoYW5nZURldGVjdG9yUmVmLCBDb21wb25lbnQsXG4gIEVsZW1lbnRSZWYsIElucHV0LCBPbkNoYW5nZXMsIE9uRGVzdHJveSwgT3V0cHV0LCBTaW1wbGVDaGFuZ2VzLCBWaWV3Q2hpbGRcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGdWxsU2NyZWVuVmlld2VyLCBJbWFnZVZpZXdlciB9IGZyb20gJ2l2LXZpZXdlcic7XG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBJdGVtIH0gZnJvbSAnLi4vbW9kZWwvaXRlbSc7XG5pbXBvcnQgeyBBY3Rpb24sIEVsZW1lbnRJZGVudGlmaWVyLCBQUk9URUNURURfSU1BR0VfSEVBREVSIH0gZnJvbSAnLi4vdXRpbHMvcmVzdWx0cy51dGlscyc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgbWFya2VyIH0gZnJvbSAnQGNvbHNlbjE5OTEvbmd4LXRyYW5zbGF0ZS1leHRyYWN0LW1hcmtlcic7XG5pbXBvcnQgeyBEZXRhaWxlZERhdGFSZXRyaWV2ZXIgfSBmcm9tICcuLi91dGlscy9kZXRhaWxlZC1kYXRhLXJldHJpZXZlcic7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2FybGFzLXJlc3VsdC1kZXRhaWxlZC1ncmlkJyxcbiAgdGVtcGxhdGVVcmw6ICcuL3Jlc3VsdC1kZXRhaWxlZC1ncmlkLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vcmVzdWx0LWRldGFpbGVkLWdyaWQuY29tcG9uZW50LnNjc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBSZXN1bHREZXRhaWxlZEdyaWRDb21wb25lbnQgaW1wbGVtZW50cyBPbkNoYW5nZXMsIE9uRGVzdHJveSB7XG4gIC8qKlxuICAgKiBAY29uc3RhbnRcbiAgICovXG4gIHB1YmxpYyBTSE9XX0RFVEFJTFMgPSBtYXJrZXIoJ1Nob3cgZGV0YWlscycpO1xuICAvKipcbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBwdWJsaWMgVklFV19JTUFHRSA9IG1hcmtlcignVmlldyBpbiBmdWxsIHNjcmVlbicpO1xuICAvKipcbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBwdWJsaWMgU0hPV19JTUFHRSA9IG1hcmtlcignU2hvdyBpbWFnZScpO1xuICAvKipcbiAgICogQGNvbnN0YW50XG4gICAqL1xuICBwdWJsaWMgQ0xPU0VfREVUQUlMUyA9IG1hcmtlcignQ2xvc2UgZGV0YWlscycpO1xuICBwcml2YXRlIGZ1bGxTY3JlZW5WaWV3ZXIgPSBuZXcgRnVsbFNjcmVlblZpZXdlcigpO1xuXG4gIC8qKlxuICAgKiBASW5wdXRcbiAgICogQGRlc2NyaXB0aW9uIEFuIG9iamVjdCByZXByZXNlbnRpbmcgYW4gSXRlbSBhbmQgdGhhdCBjb250YWlucyB0aGUgZGV0YWlsZWQgZGF0YS5cbiAgICovXG4gIEBJbnB1dCgpIHB1YmxpYyBncmlkVGlsZTogSXRlbTtcbiAgLyoqXG4gICAqIEBJbnB1dFxuICAgKiBAZGVzY3JpcHRpb24gV2lkdGggb2YgdGhlIGRldGFpbGVkIGdyaWQuXG4gICAqL1xuICBASW5wdXQoKSBwdWJsaWMgZGV0YWlsV2lkdGg6IG51bWJlcjtcbiAgLyoqXG4gICAqIEBJbnB1dFxuICAgKiBAZGVzY3JpcHRpb24gSGVpZ2h0IG9mIHRoZSBkZXRhaWxlZCBncmlkLlxuICAgKi9cbiAgQElucHV0KCkgcHVibGljIGRldGFpbEhlaWdodDogbnVtYmVyO1xuICAvKipcbiAgICogQElucHV0XG4gICAqIEBkZXNjcmlwdGlvbiBOYW1lIG9mIHRoZSBpZCBmaWVsZC5cbiAgICovXG4gIEBJbnB1dCgpIHB1YmxpYyBpZEZpZWxkTmFtZTogc3RyaW5nO1xuICAvKipcbiAgICogQElucHV0XG4gICAqIEBkZXNjcmlwdGlvbiBXaGV0aGVyIHRoZSBkZXRhaWwgaXMgdmlzaWJsZS5cbiAgICovXG4gIEBJbnB1dCgpIHB1YmxpYyBpc0RldGFpbFNob3dlZDogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEBJbnB1dFxuICAgKiBAZGVzY3JpcHRpb24gV2hldGhlciBkaXNwbGF5IGdyb3VwIHdpdGggbm8gZGV0YWlsLlxuICAgKi9cbiAgQElucHV0KCkgcHVibGljIHNob3dFbXB0eUdyb3VwID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIEBJbnB1dCA6IEFuZ3VsYXJcbiAgICogQGRlc2NyaXB0aW9uIFdoZXRoZXIgdG8gdXNlIGEgaHR0cCByZXF1ZXN0IHRvIHF1ZXJ5IGRldGFpbGVkIGltYWdlIGluc3RlYWQgb2YgcmVseWluZyBvbiBpbWcgdGFnIGludGVybmFsIG1lY2hhbmlzbS5cbiAgICovXG4gIEBJbnB1dCgpIHB1YmxpYyB1c2VIdHRwID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIEBJbnB1dCA6IEFuZ3VsYXJcbiAgICogQGRlc2NyaXB0aW9uIExpc3Qgb2YgYWN0aXZlIGFjdGlvbnMgcGVyIGl0ZW0uXG4gICovXG4gIEBJbnB1dCgpIHB1YmxpYyBhY3RpdmF0ZWRBY3Rpb25zUGVySXRlbTogTWFwPHN0cmluZywgU2V0PHN0cmluZz4+ID0gbmV3IE1hcDxzdHJpbmcsIFNldDxzdHJpbmc+PigpO1xuXG4gIC8qKlxuICAqIEBJbnB1dFxuICAqIEBkZXNjcmlwdGlvbiBBIGRldGFpbGVkLWRhdGEtcmV0cmlldmVyIG9iamVjdCB0aGF0IGltcGxlbWVudHNcbiAgKiBEZXRhaWxlZERhdGFSZXRyaWV2ZXIgaW50ZXJmYWNlLlxuICAqL1xuICBASW5wdXQoKSBwdWJsaWMgZGV0YWlsZWREYXRhUmV0cmlldmVyOiBEZXRhaWxlZERhdGFSZXRyaWV2ZXI7XG4gIC8qKlxuICAgKiBAT3V0cHV0XG4gICAqIEBkZXNjcmlwdGlvbiBFbWl0cyB0aGUgZXZlbnQgb2YgYXBwbHlpbmcgdGhlIHNwZWNpZmllZCBhY3Rpb24gb24gdGhlIHNwZWNpZmllZCBpdGVtLlxuICAgKi9cblxuICBAT3V0cHV0KCkgcHVibGljIGFjdGlvbk9uSXRlbUV2ZW50OiBTdWJqZWN0PHsgYWN0aW9uOiBBY3Rpb247IGVsZW1lbnRpZGVudGlmaWVyOiBFbGVtZW50SWRlbnRpZmllcjsgfT4gPVxuICAgIG5ldyBTdWJqZWN0PHsgYWN0aW9uOiBBY3Rpb247IGVsZW1lbnRpZGVudGlmaWVyOiBFbGVtZW50SWRlbnRpZmllcjsgfT4oKTtcbiAgLyoqXG4gKiBAT3V0cHV0XG4gKiBAZGVzY3JpcHRpb24gRW1pdHMgdGhlIGV2ZW50IG9mIGNsb3NpbmcgZGV0YWlscy5cbiAqL1xuICBAT3V0cHV0KCkgcHVibGljIGNsb3NlRGV0YWlsOiBTdWJqZWN0PGJvb2xlYW4+ID0gbmV3IFN1YmplY3QoKTtcblxuICBAVmlld0NoaWxkKCdpbWFnZV9kZXRhaWwnLCB7IHN0YXRpYzogZmFsc2UgfSkgcHVibGljIGltYWdlVmlld2VyOiBFbGVtZW50UmVmO1xuXG5cbiAgcHVibGljIGlzRGV0YWlsZWREYXRhU2hvd2VkID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBUaGUgaW1hZ2Ugc291cmNlIHRvIGRpc3BsYXkuIEVpdGhlciBpcyBhbiB1cmwgb3IgdGhlIGNvbnRlbnQgb2YgdGhlIGltYWdlLlxuICAgKi9cbiAgcHVibGljIGltZ1NyYzogc3RyaW5nIHwgQXJyYXlCdWZmZXI7XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBXaGV0aGVyIHRoZSByZXF1ZXN0IGZvciB0aGUgaW1hZ2UgaXMgYmVpbmcgcHJvY2Vzc2VkXG4gICAqL1xuICBwdWJsaWMgaXNMb2FkaW5nID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBJbiB0aGUgY2FzZSBvZiBtdWx0aXBsZSBpbWFnZXMsIGluZGljYXRlcyB3aGljaCBvbmUgaXMgc2VsZWN0ZWRcbiAgICovXG4gIHB1YmxpYyBjdXJyZW50SW1hZ2VJbmRleCA9IDA7XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBXaGV0aGVyIHRoZSB2aWV3ZXIgaXMgaW4gZnVsbCBzY3JlZW4gbW9kZVxuICAgKi9cbiAgcHVibGljIGlzRnVsbFNjcmVlbiA9IGZhbHNlO1xuXG4gIHByaXZhdGUgdmlld2VyO1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGNoYW5nZURldGVjdG9yUmVmOiBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICBwcml2YXRlIGh0dHA6IEh0dHBDbGllbnRcbiAgKSB7IH1cblxuICBwdWJsaWMgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5kZXN0cm95Vmlld2VyKHRydWUpO1xuICB9XG5cbiAgcHVibGljIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcbiAgICBpZiAoY2hhbmdlc1snZ3JpZFRpbGUnXSkge1xuICAgICAgaWYgKHRoaXMudmlld2VyKSB7XG4gICAgICAgIHRoaXMudmlld2VyID0gdGhpcy52aWV3ZXIuZGVzdHJveSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5pc0Z1bGxTY3JlZW4gPSBmYWxzZTtcbiAgICAgIHRoaXMuY3VycmVudEltYWdlSW5kZXggPSAwO1xuICAgICAgdGhpcy5nZXRJbWFnZSgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0SW1hZ2UoKSB7XG4gICAgdGhpcy5pbWdTcmMgPSB1bmRlZmluZWQ7XG4gICAgaWYgKCF0aGlzLmdyaWRUaWxlIHx8ICh0aGlzLmdyaWRUaWxlICYmICghdGhpcy5ncmlkVGlsZS51cmxJbWFnZXMgfHwgdGhpcy5ncmlkVGlsZS51cmxJbWFnZXMubGVuZ3RoID09PSAwKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy51c2VIdHRwKSB7XG4gICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICB0aGlzLmh0dHAuZ2V0KHRoaXMuZ3JpZFRpbGUudXJsSW1hZ2VzW3RoaXMuY3VycmVudEltYWdlSW5kZXhdLCB7IGhlYWRlcnM6IHsgW1BST1RFQ1RFRF9JTUFHRV9IRUFERVJdOiAndHJ1ZScgfSwgcmVzcG9uc2VUeXBlOiAnYmxvYicgfSlcbiAgICAgICAgLnN1YnNjcmliZSh7XG4gICAgICAgICAgbmV4dDogKGltYWdlOiBCbG9iKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgICAgcmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuaW1nU3JjID0gcmVhZGVyLnJlc3VsdDtcbiAgICAgICAgICAgICAgdGhpcy5ncmlkVGlsZS5pbWFnZUVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICB0aGlzLnJlc2V0Vmlld2VyKCk7XG4gICAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgICAgICBpZiAoaW1hZ2UpIHtcbiAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW1hZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIGVycm9yOiAoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaW1nU3JjID0gdGhpcy5ncmlkVGlsZS51cmxJbWFnZXNbdGhpcy5jdXJyZW50SW1hZ2VJbmRleF07XG4gICAgICB0aGlzLmdyaWRUaWxlLmltYWdlRW5hYmxlZCA9IHRydWU7XG4gICAgICB0aGlzLnJlc2V0Vmlld2VyKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZXNldFZpZXdlcigpIHtcbiAgICBpZiAodGhpcy52aWV3ZXIpIHtcbiAgICAgIHRoaXMudmlld2VyID0gdGhpcy52aWV3ZXIuZGVzdHJveSgpO1xuICAgIH1cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICh0aGlzLmlzRnVsbFNjcmVlbikge1xuICAgICAgICB0aGlzLmZ1bGxTY3JlZW5WaWV3ZXIuc2hvdyh0aGlzLmltZ1NyYyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoISF0aGlzLmltYWdlVmlld2VyICYmICF0aGlzLnZpZXdlcikge1xuICAgICAgICAgIHRoaXMudmlld2VyID0gbmV3IEltYWdlVmlld2VyKHRoaXMuaW1hZ2VWaWV3ZXIubmF0aXZlRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCAwKTtcbiAgfVxuXG4gIHB1YmxpYyBkZXN0cm95Vmlld2VyKGlzQ29tcG9uZW50RGVzdHJveT86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAodGhpcy52aWV3ZXIpIHtcbiAgICAgIHRoaXMudmlld2VyID0gdGhpcy52aWV3ZXIuZGVzdHJveSgpO1xuICAgIH1cbiAgICBpZiAoaXNDb21wb25lbnREZXN0cm95ICYmIHRoaXMuZnVsbFNjcmVlblZpZXdlcikge1xuICAgICAgdGhpcy5mdWxsU2NyZWVuVmlld2VyLmRlc3Ryb3koKTtcbiAgICB9XG4gICAgLy8gQWRkIGEgZGVsYXkgdG8gYWxsb3cgZm9yIHRoZSB2aWV3ZXIgdG8gYmUgZGVzdHJveWVkIHByb3Blcmx5XG4gICAgLy8gYmVmb3JlIHJlbW92aW5nIGl0IGR1ZSB0byB2aXNpYmlsaXR5IHJ1bGVzIGluIHRoZSB0ZW1wbGF0ZVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5pbWdTcmMgPSB1bmRlZmluZWQ7XG4gICAgfSwgMCk7XG4gIH1cblxuICBwdWJsaWMgc2hvd0hpZGVEZXRhaWxlZERhdGEoKSB7XG4gICAgdGhpcy5pc0RldGFpbGVkRGF0YVNob3dlZCA9ICF0aGlzLmlzRGV0YWlsZWREYXRhU2hvd2VkO1xuICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIHRoaXMucmVzZXRWaWV3ZXIoKTtcbiAgfVxuXG4gIHB1YmxpYyBjbG9zZURldGFpbGVkRGF0YSgpIHtcbiAgICB0aGlzLmlzRGV0YWlsU2hvd2VkID0gZmFsc2U7XG4gICAgdGhpcy5jbG9zZURldGFpbC5uZXh0KHRydWUpO1xuICB9XG5cbiAgLy8gRW1pdHMgdGhlIGFjdGlvbiBvbiB0aGlzIFJlc3VsdERldGFpbGVkSXRlbSB0byB0aGUgcGFyZW50IChSZXN1bHRMaXN0KVxuICBwdWJsaWMgdHJpZ2dlckFjdGlvbk9uSXRlbShhY3Rpb25Pbkl0ZW06IHsgYWN0aW9uOiBBY3Rpb247IGVsZW1lbnRpZGVudGlmaWVyOiBFbGVtZW50SWRlbnRpZmllcjsgfSk6IHZvaWQge1xuICAgIHRoaXMuYWN0aW9uT25JdGVtRXZlbnQubmV4dChhY3Rpb25Pbkl0ZW0pO1xuICB9XG5cbiAgcHVibGljIHNob3dPdmVybGF5KCkge1xuICAgIHRoaXMuaXNGdWxsU2NyZWVuID0gdHJ1ZTtcbiAgICB0aGlzLnJlc2V0Vmlld2VyKCk7XG5cbiAgICBsZXQgdmlld2VyQ29udGFpbmVyOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBmdWxsU2NyZWVuQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLml2LWZ1bGxzY3JlZW4tY29udGFpbmVyJyk7XG5cbiAgICBjb25zdCBhY3Rpb25zSW5mb3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd2aWV3ZXJfYWN0aW9ucy1pbmZvcycpO1xuICAgIGlmICghIWFjdGlvbnNJbmZvcyAmJiAhIWFjdGlvbnNJbmZvc1swXSkge1xuICAgICAgdmlld2VyQ29udGFpbmVyID0gYWN0aW9uc0luZm9zWzBdLnBhcmVudEVsZW1lbnQ7XG4gICAgICBjb25zdCBlbGVtZW50cyA9IGFjdGlvbnNJbmZvcy5sZW5ndGg7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRzOyBpKyspIHtcbiAgICAgICAgLy8gVGhlIGVsZW1lbnQgaXMgcmVtb3ZlZCBmcm9tIHRoZSBsaXN0IG9uY2UgcmV0cmlldmVkXG4gICAgICAgIGZ1bGxTY3JlZW5Db250YWluZXIuYXBwZW5kQ2hpbGQoYWN0aW9uc0luZm9zLml0ZW0oMCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pdi1mdWxsc2NyZWVuLWNsb3NlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmlzRnVsbFNjcmVlbiA9IGZhbHNlO1xuICAgICAgaWYgKHZpZXdlckNvbnRhaW5lcikge1xuICAgICAgICBjb25zdCBhY3Rpb25zSW5mb3NGdWxsU2NyZWVuID0gZnVsbFNjcmVlbkNvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd2aWV3ZXJfYWN0aW9ucy1pbmZvcycpO1xuICAgICAgICBjb25zdCBlbGVtZW50cyA9IGFjdGlvbnNJbmZvc0Z1bGxTY3JlZW4ubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRzOyBpKyspIHtcbiAgICAgICAgICAvLyBUaGUgZWxlbWVudCBpcyByZW1vdmVkIGZyb20gdGhlIGxpc3Qgb25jZSByZXRyaWV2ZWRcbiAgICAgICAgICB2aWV3ZXJDb250YWluZXIuYXBwZW5kQ2hpbGQoYWN0aW9uc0luZm9zRnVsbFNjcmVlbi5pdGVtKDApKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5yZXNldFZpZXdlcigpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIG9uUHJldmlvdXMoKSB7XG4gICAgdGhpcy5jdXJyZW50SW1hZ2VJbmRleCAtPSAxO1xuICAgIGlmICh0aGlzLmN1cnJlbnRJbWFnZUluZGV4IDwgMCkge1xuICAgICAgdGhpcy5jdXJyZW50SW1hZ2VJbmRleCA9IHRoaXMuZ3JpZFRpbGUudXJsSW1hZ2VzLmxlbmd0aCAtIDE7XG4gICAgfVxuICAgIHRoaXMuZ2V0SW1hZ2UoKTtcbiAgfVxuXG4gIHB1YmxpYyBvbk5leHQoKSB7XG4gICAgdGhpcy5jdXJyZW50SW1hZ2VJbmRleCArPSAxO1xuICAgIGlmICh0aGlzLmN1cnJlbnRJbWFnZUluZGV4ID49IHRoaXMuZ3JpZFRpbGUudXJsSW1hZ2VzLmxlbmd0aCkge1xuICAgICAgdGhpcy5jdXJyZW50SW1hZ2VJbmRleCA9IDA7XG4gICAgfVxuICAgIHRoaXMuZ2V0SW1hZ2UoKTtcbiAgfVxufVxuIiwiPGRpdiBjbGFzcz1cInJlc3VsdGdyaWRcIiAqbmdJZj1pc0RldGFpbFNob3dlZD5cbiAgPGRpdiBjbGFzcz1cInJlc3VsdGdyaWQtLWNvbnRhaW5lclwiPlxuICAgIDxkaXYgW2hpZGRlbl09XCJpc0RldGFpbGVkRGF0YVNob3dlZFwiPlxuICAgICAgPGRpdiBjbGFzcz1cInJlc3VsdGdyaWRfX2ltZ1wiIFtzdHlsZS5oZWlnaHQucHhdPVwiZGV0YWlsSGVpZ2h0XCIgW3N0eWxlLndpZHRoLnB4XT1cImRldGFpbFdpZHRoXCI+XG4gICAgICAgIDxpbWcgY2xhc3M9XCJpbWFnZV92aWV3XCIgI2ltYWdlX2RldGFpbCAqbmdJZj1cImdyaWRUaWxlLmltYWdlRW5hYmxlZFwiIHNyYz1cInt7aW1nU3JjfX1cIiAoZXJyb3IpPVwiZGVzdHJveVZpZXdlcigpXCI+XG4gICAgICAgIDxpbWcgKm5nSWY9XCIoIWdyaWRUaWxlLmltYWdlRW5hYmxlZCB8fCAhaW1nU3JjKSAmJiAhaXNMb2FkaW5nXCIgc3JjPVwie3tub1ZpZXdJbWd9fVwiPlxuICAgICAgICA8bWF0LXByb2dyZXNzLXNwaW5uZXIgKm5nSWY9XCJpc0xvYWRpbmdcIiBbY29sb3JdPVwiJ2FjY2VudCdcIiBbZGlhbWV0ZXJdPVwiZGV0YWlsSGVpZ2h0IDwgZGV0YWlsV2lkdGggPyBkZXRhaWxIZWlnaHQgLyAyIDogZGV0YWlsV2lkdGggLyAyXCIgW21vZGVdPVwiJ2luZGV0ZXJtaW5hdGUnXCI+PC9tYXQtcHJvZ3Jlc3Mtc3Bpbm5lcj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8YnV0dG9uIG1hdC1pY29uLWJ1dHRvbiBjbGFzcz1cInZpZXdlcl9hY3Rpb25zLWluZm9zIG5hdmlnYXRlLWJ1dHRvbiBwcmV2aW91c1wiICpuZ0lmPVwiZ3JpZFRpbGUudXJsSW1hZ2VzICYmIGdyaWRUaWxlLnVybEltYWdlcy5sZW5ndGggPiAxXCIgbWF0VG9vbHRpcD1cInt7J1ByZXZpb3VzIGltYWdlJyB8IHRyYW5zbGF0ZX19XCIgKGNsaWNrKT1cIm9uUHJldmlvdXMoKVwiPlxuICAgICAgICA8bWF0LWljb24+a2V5Ym9hcmRfYXJyb3dfbGVmdDwvbWF0LWljb24+XG4gICAgICA8L2J1dHRvbj5cbiAgICAgIDxkaXYgY2xhc3M9XCJ2aWV3ZXJfYWN0aW9ucy1pbmZvcyBkZXNjcmlwdGlvblwiICpuZ0lmPVwiZ3JpZFRpbGUuZGVzY3JpcHRpb25zXCI+e3sgZ3JpZFRpbGUuZGVzY3JpcHRpb25zW2N1cnJlbnRJbWFnZUluZGV4XSB9fTwvZGl2PlxuICAgICAgPGJ1dHRvbiBtYXQtaWNvbi1idXR0b24gY2xhc3M9XCJ2aWV3ZXJfYWN0aW9ucy1pbmZvcyBuYXZpZ2F0ZS1idXR0b24gbmV4dFwiICpuZ0lmPVwiZ3JpZFRpbGUudXJsSW1hZ2VzICYmIGdyaWRUaWxlLnVybEltYWdlcy5sZW5ndGggPiAxXCIgbWF0VG9vbHRpcD1cInt7J05leHQgaW1hZ2UnIHwgdHJhbnNsYXRlfX1cIiAoY2xpY2spPVwib25OZXh0KClcIj5cbiAgICAgICAgPG1hdC1pY29uPmtleWJvYXJkX2Fycm93X3JpZ2h0PC9tYXQtaWNvbj5cbiAgICAgIDwvYnV0dG9uPlxuXG4gICAgICA8ZGl2IGNsYXNzPVwicmVzdWx0Z3JpZF9faW5mby1idXR0b25cIj5cbiAgICAgICAgPGJ1dHRvbiBbZGlzYWJsZWRdPVwiIWdyaWRUaWxlLmltYWdlRW5hYmxlZCB8fCBpc0xvYWRpbmdcIiBpZD1cInZpZXdfaW1hZ2VfZ3JpZG1vZGVfYnRuXCIgbWF0VG9vbHRpcD1cInt7VklFV19JTUFHRSB8IHRyYW5zbGF0ZX19XCJcbiAgICAgICAgICBjbGFzcz1cInJlc3VsdGdyaWRfX2luZm8tdmlldy1idXR0b25cIiBtYXQtbWluaS1mYWIgKGNsaWNrKT1cInNob3dPdmVybGF5KClcIj5cbiAgICAgICAgICA8bWF0LWljb24gY2xhc3M9XCJyZXN1bHRncmlkX19pbmZvX291dGxpbmVcIj5maXRfc2NyZWVuPC9tYXQtaWNvbj5cbiAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDxidXR0b24gaWQ9XCJzaG93X2RldGFpbHNfZ3JpZG1vZGVfYnRuXCIgbWF0VG9vbHRpcD1cInt7U0hPV19ERVRBSUxTIHwgdHJhbnNsYXRlfX1cIiBjbGFzcz1cInJlc3VsdGdyaWRfX2luZm8tc2hvdy1idXR0b25cIiBtYXQtbWluaS1mYWIgY29sb3I9XCJwcmltYXJ5XCIgKGNsaWNrKT1cInNob3dIaWRlRGV0YWlsZWREYXRhKClcIj5cbiAgICAgICAgICA8bWF0LWljb24gY2xhc3M9XCJyZXN1bHRncmlkX19pbmZvX291dGxpbmVcIj5pbmZvX291dGxpbmU8L21hdC1pY29uPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvbiBpZD1cImNsb3NlX2RldGFpbHNfZ3JpZG1vZGVfYnRuXCIgbWF0VG9vbHRpcD1cInt7Q0xPU0VfREVUQUlMUyB8IHRyYW5zbGF0ZX19XCIgY2xhc3M9XCJyZXN1bHRncmlkX19pbmZvLWNsb3NlLWJ1dHRvblwiIG1hdC1taW5pLWZhYiBjb2xvcj1cInByaW1hcnlcIiAoY2xpY2spPVwiY2xvc2VEZXRhaWxlZERhdGEoKVwiPlxuICAgICAgICAgICAgPG1hdC1pY29uIGNsYXNzPVwicmVzdWx0Z3JpZF9fY2xvc2VcIj5jbG9zZTwvbWF0LWljb24+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IFtoaWRkZW5dPVwiIWlzRGV0YWlsZWREYXRhU2hvd2VkXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwicmVzdWx0Z3JpZF9faW5mby1idXR0b25cIj5cbiAgICAgICAgPGJ1dHRvbiBpZD1cInNob3dfaW1hZ2VfZ3JpZG1vZGVfYnRuXCIgbWF0VG9vbHRpcD1cInt7U0hPV19JTUFHRSB8IHRyYW5zbGF0ZX19XCIgY2xhc3M9XCJyZXN1bHRncmlkX19pbmZvLXNob3ctYnV0dG9uXCIgbWF0LW1pbmktZmFiIGNvbG9yPVwicHJpbWFyeVwiIChjbGljayk9XCJzaG93SGlkZURldGFpbGVkRGF0YSgpXCI+XG4gICAgICAgICAgPG1hdC1pY29uIGNsYXNzPVwicmVzdWx0Z3JpZF9faW1hZ2VcIj5pbWFnZTwvbWF0LWljb24+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8YnV0dG9uIGlkPVwiY2xvc2VfZGV0YWlsc19ncmlkbW9kZV9idG5cIiBtYXRUb29sdGlwPVwie3tDTE9TRV9ERVRBSUxTIHwgdHJhbnNsYXRlfX1cIiBjbGFzcz1cInJlc3VsdGdyaWRfX2luZm8tY2xvc2UtYnV0dG9uXCIgbWF0LW1pbmktZmFiIGNvbG9yPVwicHJpbWFyeVwiIChjbGljayk9XCJjbG9zZURldGFpbGVkRGF0YSgpXCI+XG4gICAgICAgICAgPG1hdC1pY29uIGNsYXNzPVwicmVzdWx0Z3JpZF9fY2xvc2VcIj5jbG9zZTwvbWF0LWljb24+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGFybGFzLXJlc3VsdC1kZXRhaWxlZC1pdGVtIGNsYXNzPVwicmVzdWx0Z3JpZC0tZGV0YWlsZWQtaXRlbVwiXG4gICAgICAgIFtyb3dJdGVtXT1cImdyaWRUaWxlXCIgW2NvbnRhaW5lclR5cGVdPVwiJ2dyaWQnXCIgW2lkRmllbGROYW1lXT1cImlkRmllbGROYW1lXCJcbiAgICAgICAgW2RldGFpbGVkRGF0YVJldHJpZXZlcl09XCJkZXRhaWxlZERhdGFSZXRyaWV2ZXJcIlxuICAgICAgICBbYWN0aXZhdGVkQWN0aW9uc1Blckl0ZW1dPVwiYWN0aXZhdGVkQWN0aW9uc1Blckl0ZW1cIlxuICAgICAgICBbc3R5bGUud2lkdGgucHhdPVwiZGV0YWlsV2lkdGhcIiBbc3R5bGUuaGVpZ2h0LnB4XT1cImRldGFpbEhlaWdodFwiXG4gICAgICAgIFtzaG93RW1wdHlHcm91cF09IFwic2hvd0VtcHR5R3JvdXBcIiAoYWN0aW9uT25JdGVtRXZlbnQpPVwidHJpZ2dlckFjdGlvbk9uSXRlbSgkZXZlbnQpXCI+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L2Rpdj5cbiJdfQ==