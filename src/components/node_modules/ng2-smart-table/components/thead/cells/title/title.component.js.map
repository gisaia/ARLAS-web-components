{"version":3,"file":"title.component.js","sourceRoot":"","sources":["../../../../../../src/ng2-smart-table/components/thead/cells/title/title.component.ts"],"names":[],"mappings":";;;;;;;;;AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,EAAE,YAAY,EAA4B,MAAM,eAAe,CAAC;AAGjG,OAAO,EAAE,UAAU,EAAE,MAAM,yCAAyC,CAAC;AACrE,OAAO,EAAE,MAAM,EAAE,MAAM,iCAAiC,CAAC;AAezD,IAAa,cAAc;IAb3B;QAeE,qBAAgB,GAAG,EAAE,CAAC;QAGZ,SAAI,GAAG,IAAI,YAAY,EAAO,CAAC;IA+C3C,CAAC;IA3CC,oCAAW,GAAX,UAAY,OAAsB;QAAlC,iBAmBC;QAlBC,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;YACnB,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC;gBAChC,IAAI,CAAC,cAAc,CAAC,WAAW,EAAE,CAAC;YACpC,CAAC;YACD,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,SAAS,CAAC,UAAC,WAAW;gBAClE,IAAM,QAAQ,GAAG,KAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;gBAEvC,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,KAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;oBACnE,KAAI,CAAC,gBAAgB,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;gBACnD,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;gBAC7B,CAAC;gBAED,QAAQ,CAAC,OAAO,CAAC,UAAC,SAAc;gBAEhC,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAED,8BAAK,GAAL,UAAM,KAAU;QACd,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC3B,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC;YAClB;gBACE,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE;gBACrB,SAAS,EAAE,IAAI,CAAC,gBAAgB;gBAChC,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,kBAAkB,EAAE;aAC1C;SACF,CAAC,CAAC;QACH,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACvB,CAAC;IAED,4CAAmB,GAAnB;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;YAC1B,IAAM,YAAY,GAAG,IAAI,CAAC,gBAAgB,KAAK,KAAK,GAAG,MAAM,GAAG,KAAK,CAAC;YACtE,IAAI,CAAC,gBAAgB,GAAG,YAAY,CAAC;QACvC,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC;QACpD,CAAC;QACD,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC;IAC/B,CAAC;IACH,qBAAC;AAAD,CAAC,AApDD,IAoDC;AAjDU;IAAR,KAAK,EAAE;8BAAS,MAAM;8CAAC;AACf;IAAR,KAAK,EAAE;8BAAS,UAAU;8CAAC;AAClB;IAAT,MAAM,EAAE;;4CAAgC;AAL9B,cAAc;IAb1B,SAAS,CAAC;QACT,QAAQ,EAAE,uBAAuB;QACjC,SAAS,EAAE,CAAC,wBAAwB,CAAC;QACrC,QAAQ,EAAE,4UAQT;KACF,CAAC;GACW,cAAc,CAoD1B;SApDY,cAAc","sourcesContent":["import { Component, Input, Output, EventEmitter, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { Subscription } from 'rxjs/Subscription';\r\n\r\nimport { DataSource } from '../../../../lib/data-source/data-source';\r\nimport { Column } from '../../../../lib/data-set/column';\r\n\r\n@Component({\r\n  selector: 'ng2-smart-table-title',\r\n  styleUrls: ['./title.component.scss'],\r\n  template: `\r\n    <a href=\"#\" *ngIf=\"column.isSortable\"\r\n                (click)=\"_sort($event, column)\"\r\n                class=\"ng2-smart-sort-link sort\"\r\n                [ngClass]=\"currentDirection\">\r\n      {{ column.title }}\r\n    </a>\r\n    <span class=\"ng2-smart-sort\" *ngIf=\"!column.isSortable\">{{ column.title }}</span>\r\n  `,\r\n})\r\nexport class TitleComponent implements OnChanges {\r\n\r\n  currentDirection = '';\r\n  @Input() column: Column;\r\n  @Input() source: DataSource;\r\n  @Output() sort = new EventEmitter<any>();\r\n\r\n  protected dataChangedSub: Subscription;\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (changes.source) {\r\n      if (!changes.source.firstChange) {\r\n        this.dataChangedSub.unsubscribe();\r\n      }\r\n      this.dataChangedSub = this.source.onChanged().subscribe((dataChanges) => {\r\n        const sortConf = this.source.getSort();\r\n\r\n        if (sortConf.length > 0 && sortConf[0]['field'] === this.column.id) {\r\n          this.currentDirection = sortConf[0]['direction'];\r\n        } else {\r\n          this.currentDirection = '';\r\n        }\r\n\r\n        sortConf.forEach((fieldConf: any) => {\r\n\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  _sort(event: any) {\r\n    event.preventDefault();\r\n    this.changeSortDirection();\r\n    this.source.setSort([\r\n      {\r\n        field: this.column.id,\r\n        direction: this.currentDirection,\r\n        compare: this.column.getCompareFunction(),\r\n      },\r\n    ]);\r\n    this.sort.emit(null);\r\n  }\r\n\r\n  changeSortDirection(): string {\r\n    if (this.currentDirection) {\r\n      const newDirection = this.currentDirection === 'asc' ? 'desc' : 'asc';\r\n      this.currentDirection = newDirection;\r\n    } else {\r\n      this.currentDirection = this.column.sortDirection;\r\n    }\r\n    return this.currentDirection;\r\n  }\r\n}\r\n"]}