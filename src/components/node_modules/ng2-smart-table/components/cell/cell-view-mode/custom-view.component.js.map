{"version":3,"file":"custom-view.component.js","sourceRoot":"","sources":["../../../../../src/ng2-smart-table/components/cell/cell-view-mode/custom-view.component.ts"],"names":[],"mappings":";;;;;;;;;AAAA,OAAO,EACL,SAAS,EACT,KAAK,EACL,wBAAwB,EACxB,SAAS,EACT,gBAAgB,GAGjB,MAAM,eAAe,CAAC;AAEvB,OAAO,EAAE,IAAI,EAAE,MAAM,4BAA4B,CAAC;AASlD,IAAa,mBAAmB;IAM9B,6BAAoB,QAAkC;QAAlC,aAAQ,GAAR,QAAQ,CAA0B;IACtD,CAAC;IAED,sCAAQ,GAAR;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;YACvC,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAC7B,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAC3B,IAAI,CAAC,aAAa,EAAE,CAAC;QACvB,CAAC;IACH,CAAC;IAED,yCAAW,GAAX;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;YACzB,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,CAAC;QACjC,CAAC;IACH,CAAC;IAES,mDAAqB,GAA/B;QACE,IAAM,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,eAAe,CAAC,CAAC;QACtG,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,gBAAgB,CAAC,CAAC;IAC9E,CAAC;IAES,iDAAmB,GAA7B;QACE,IAAM,uBAAuB,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,0BAA0B,EAAE,CAAC;QACnF,uBAAuB,IAAI,uBAAuB,CAAC,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;IACpF,CAAC;IAES,2CAAa,GAAvB;QACE,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;IAChE,CAAC;IAES,sCAAQ,GAAlB;QACE,MAAM,CAAC;YACL,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAC3B,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,OAAO,EAAE;SACtC,CAAA;IACH,CAAC;IACH,0BAAC;AAAD,CAAC,AA3CD,IA2CC;AAxCU;IAAR,KAAK,EAAE;8BAAO,IAAI;iDAAC;AACoC;IAAvD,SAAS,CAAC,eAAe,EAAE,EAAE,IAAI,EAAE,gBAAgB,EAAE,CAAC;;0DAAoB;AAJhE,mBAAmB;IAN/B,SAAS,CAAC;QACT,QAAQ,EAAE,uBAAuB;QACjC,QAAQ,EAAE,sDAET;KACF,CAAC;qCAO8B,wBAAwB;GAN3C,mBAAmB,CA2C/B;SA3CY,mBAAmB","sourcesContent":["import {\r\n  Component,\r\n  Input,\r\n  ComponentFactoryResolver,\r\n  ViewChild,\r\n  ViewContainerRef,\r\n  OnInit,\r\n  OnDestroy,\r\n} from '@angular/core';\r\n\r\nimport { Cell } from '../../../lib/data-set/cell';\r\nimport { ViewCell } from './view-cell';\r\n\r\n@Component({\r\n  selector: 'custom-view-component',\r\n  template: `\r\n    <ng-template #dynamicTarget></ng-template>\r\n  `,\r\n})\r\nexport class CustomViewComponent implements OnInit, OnDestroy {\r\n\r\n  customComponent: any;\r\n  @Input() cell: Cell;\r\n  @ViewChild('dynamicTarget', { read: ViewContainerRef }) dynamicTarget: any;\r\n\r\n  constructor(private resolver: ComponentFactoryResolver) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.cell && !this.customComponent) {\r\n      this.createCustomComponent();\r\n      this.callOnComponentInit();\r\n      this.patchInstance();\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.customComponent) {\r\n      this.customComponent.destroy();\r\n    }\r\n  }\r\n\r\n  protected createCustomComponent() {\r\n    const componentFactory = this.resolver.resolveComponentFactory(this.cell.getColumn().renderComponent);\r\n    this.customComponent = this.dynamicTarget.createComponent(componentFactory);\r\n  }\r\n\r\n  protected callOnComponentInit() {\r\n    const onComponentInitFunction = this.cell.getColumn().getOnComponentInitFunction();\r\n    onComponentInitFunction && onComponentInitFunction(this.customComponent.instance);\r\n  }\r\n\r\n  protected patchInstance() {\r\n    Object.assign(this.customComponent.instance, this.getPatch());\r\n  }\r\n\r\n  protected getPatch(): ViewCell {\r\n    return {\r\n      value: this.cell.getValue(),\r\n      rowData: this.cell.getRow().getData()\r\n    }\r\n  }\r\n}\r\n"]}