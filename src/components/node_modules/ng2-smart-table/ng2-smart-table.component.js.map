{"version":3,"file":"ng2-smart-table.component.js","sourceRoot":"","sources":["../../src/ng2-smart-table/ng2-smart-table.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, Input, Output, SimpleChange, EventEmitter, OnChanges } from '@angular/core';\r\n\r\nimport { Grid } from './lib/grid';\r\nimport { DataSource } from './lib/data-source/data-source';\r\nimport { Row } from './lib/data-set/row';\r\nimport { deepExtend } from './lib/helpers';\r\nimport { LocalDataSource } from './lib/data-source/local/local.data-source';\r\n\r\n@Component({\r\n  selector: 'ng2-smart-table',\r\n  styleUrls: ['./ng2-smart-table.component.scss'],\r\n  templateUrl: './ng2-smart-table.component.html',\r\n})\r\nexport class Ng2SmartTableComponent implements OnChanges {\r\n\r\n  @Input() source: any;\r\n  @Input() settings: Object = {};\r\n\r\n  @Output() rowSelect = new EventEmitter<any>();\r\n  @Output() userRowSelect = new EventEmitter<any>();\r\n  @Output() delete = new EventEmitter<any>();\r\n  @Output() edit = new EventEmitter<any>();\r\n  @Output() create = new EventEmitter<any>();\r\n  @Output() custom = new EventEmitter<any>();\r\n  @Output() deleteConfirm = new EventEmitter<any>();\r\n  @Output() editConfirm = new EventEmitter<any>();\r\n  @Output() createConfirm = new EventEmitter<any>();\r\n  @Output() rowHover: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  tableClass: string;\r\n  tableId: string;\r\n  isHideHeader: boolean;\r\n  isHideSubHeader: boolean;\r\n  isPagerDisplay: boolean;\r\n  rowClassFunction: Function;\r\n\r\n\r\n  grid: Grid;\r\n  defaultSettings: Object = {\r\n    mode: 'inline', // inline|external|click-to-edit\r\n    selectMode: 'single', // single|multi\r\n    hideHeader: false,\r\n    hideSubHeader: false,\r\n    actions: {\r\n      columnTitle: 'Actions',\r\n      add: true,\r\n      edit: true,\r\n      delete: true,\r\n      custom: [],\r\n      position: 'left', // left|right\r\n    },\r\n    filter: {\r\n      inputClass: '',\r\n    },\r\n    edit: {\r\n      inputClass: '',\r\n      editButtonContent: 'Edit',\r\n      saveButtonContent: 'Update',\r\n      cancelButtonContent: 'Cancel',\r\n      confirmSave: false,\r\n    },\r\n    add: {\r\n      inputClass: '',\r\n      addButtonContent: 'Add New',\r\n      createButtonContent: 'Create',\r\n      cancelButtonContent: 'Cancel',\r\n      confirmCreate: false,\r\n    },\r\n    delete: {\r\n      deleteButtonContent: 'Delete',\r\n      confirmDelete: false,\r\n    },\r\n    attr: {\r\n      id: '',\r\n      class: '',\r\n    },\r\n    noDataMessage: 'No data found',\r\n    columns: {},\r\n    pager: {\r\n      display: true,\r\n      perPage: 10,\r\n    },\r\n    rowClassFunction: () => \"\"\r\n  };\r\n\r\n  isAllSelected: boolean = false;\r\n\r\n  ngOnChanges(changes: { [propertyName: string]: SimpleChange }) {\r\n    if (this.grid) {\r\n      if (changes['settings']) {\r\n        this.grid.setSettings(this.prepareSettings());\r\n      }\r\n      if (changes['source']) {\r\n        this.source = this.prepareSource();\r\n        this.grid.setSource(this.source);\r\n      }\r\n    } else {\r\n      this.initGrid();\r\n    }\r\n    this.tableId = this.grid.getSetting('attr.id');\r\n    this.tableClass = this.grid.getSetting('attr.class');\r\n    this.isHideHeader = this.grid.getSetting('hideHeader');\r\n    this.isHideSubHeader = this.grid.getSetting('hideSubHeader');\r\n    this.isPagerDisplay = this.grid.getSetting('pager.display');\r\n    this.rowClassFunction = this.grid.getSetting('rowClassFunction');\r\n  }\r\n\r\n  editRowSelect(row: Row) {\r\n    if (this.grid.getSetting('selectMode') === 'multi') {\r\n      this.onMultipleSelectRow(row);\r\n    } else {\r\n      this.onSelectRow(row);\r\n    }\r\n  }\r\n\r\n  onUserSelectRow(row: Row) {\r\n    if (this.grid.getSetting('selectMode') !== 'multi') {\r\n      this.grid.selectRow(row);\r\n      this.emitUserSelectRow(row);\r\n      this.emitSelectRow(row);\r\n    }\r\n  }\r\n\r\n  onRowHover(row: Row) {\r\n    this.rowHover.emit(row);\r\n  }\r\n\r\n  multipleSelectRow(row: Row) {\r\n    this.grid.multipleSelectRow(row);\r\n    this.emitUserSelectRow(row);\r\n    this.emitSelectRow(row);\r\n  }\r\n\r\n  onSelectAllRows($event: any) {\r\n    this.isAllSelected = !this.isAllSelected;\r\n    this.grid.selectAllRows(this.isAllSelected);\r\n\r\n    this.emitUserSelectRow(null);\r\n    this.emitSelectRow(null);\r\n  }\r\n\r\n  onSelectRow(row: Row) {\r\n    this.grid.selectRow(row);\r\n    this.emitSelectRow(row);\r\n  }\r\n\r\n  onMultipleSelectRow(row: Row) {\r\n    this.emitSelectRow(row);\r\n  }\r\n\r\n  initGrid() {\r\n    this.source = this.prepareSource();\r\n    this.grid = new Grid(this.source, this.prepareSettings());\r\n    this.grid.onSelectRow().subscribe((row) => this.emitSelectRow(row));\r\n  }\r\n\r\n  prepareSource(): DataSource {\r\n    if (this.source instanceof DataSource) {\r\n      return this.source;\r\n    } else if (this.source instanceof Array) {\r\n      return new LocalDataSource(this.source);\r\n    }\r\n\r\n    return new LocalDataSource();\r\n  }\r\n\r\n  prepareSettings(): Object {\r\n    return deepExtend({}, this.defaultSettings, this.settings);\r\n  }\r\n\r\n  changePage($event: any) {\r\n    this.resetAllSelector();\r\n  }\r\n\r\n  sort($event: any) {\r\n    this.resetAllSelector();\r\n  }\r\n\r\n  filter($event: any) {\r\n    this.resetAllSelector();\r\n  }\r\n\r\n  private resetAllSelector() {\r\n    this.isAllSelected = false;\r\n  }\r\n\r\n  private emitUserSelectRow(row: Row) {\r\n    const selectedRows = this.grid.getSelectedRows();\r\n\r\n    this.userRowSelect.emit({\r\n      data: row ? row.getData() : null,\r\n      isSelected: row ? row.getIsSelected() : null,\r\n      source: this.source,\r\n      selected: selectedRows && selectedRows.length ? selectedRows.map((r: Row) => r.getData()) : [],\r\n    });\r\n  }\r\n\r\n  private emitSelectRow(row: Row) {\r\n    this.rowSelect.emit({\r\n      data: row ? row.getData() : null,\r\n      isSelected: row ? row.getIsSelected() : null,\r\n      source: this.source,\r\n    });\r\n  }\r\n\r\n}\r\n"]}