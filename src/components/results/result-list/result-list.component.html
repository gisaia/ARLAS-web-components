<table [style.width.px]="tableWidth" class=" table-sm table-responsive table-hover resultlist">
  <thead >
    <tr class="resultlist__header">
      <ng-container *ngFor="let column of columns">
        <th *ngIf="column.isIdField"
            [style.max-width.px]="column.width"
            [style.min-width.px]="column.width"
            class="resultlist__header--columns" >
          <span  class="resultlist__header--columns--hidden"></span>
        </th>
        <th *ngIf="!column.isIdField && !column.isToggleField"
            [style.max-width.px]="column.width"
            [style.min-width.px]="column.width"
            class="resultlist__header--columns" >
          <span>
            <a (click) = "sort(column)">{{column.columnName}}{{column.dataType}}</a>
          </span>
          <div *ngIf="column.sortDirection !== SortEnum.none" class="resultlist__header--columns__sort">
            <md-icon *ngIf="column.sortDirection === SortEnum.asc" (click) = "sort(column)" class="resultlist__header--columns__sort--icon">expand_more</md-icon>
            <md-icon *ngIf="column.sortDirection === SortEnum.desc" (click) = "sort(column)" class="resultlist__header--columns__sort--icon">expand_less</md-icon>
          </div>
        </th>
        <th *ngIf="column.isToggleField" class="resultlist__header--columns"
                           [style.max-width.px]="column.width"
                           [style.min-width.px]="column.width">
          <span  class="resultlist__header--columns--hidden">
          </span>
        </th>
      </ng-container>
    </tr>
    <tr class="resultlist__filter">
      <ng-container *ngFor="let column of columns">
        <td [style.width.px]="column.width" *ngIf="column.isIdField">
          <span class="resultlist__header--columns--hidden"></span>
        </td>
        <td arlas-result-filter *ngIf="!column.isIdField && !column.isToggleField"
                           [style.width.px]="column.width"
                           [column]="column"
                           [filtersMap]="filtersMap"
                           (setFiltersEvent)="setFilters($event)">
        </td>
        <td *ngIf="column.isToggleField" [style.width.px]="column.width">
          <span class="resultlist__header--columns--hidden"></span>
        </td>
      </ng-container>
    </tr>
    <tr class="resultlist__mode">
      <td [colSpan]="columns.length" class="resultlist__mode__groupedButton">
          <md-button-toggle-group #group="mdButtonToggleGroup" style="margin: 5px" (change)="whichMode($event)">
            <md-button-toggle value="{{ModeEnum.list}}" [checked]="true">
              <md-icon>list</md-icon>
            </md-button-toggle>
            <md-button-toggle value="{{ModeEnum.grid}}">
              <md-icon>apps</md-icon>
            </md-button-toggle>
          </md-button-toggle-group>
        </td>
    </tr>
  </thead>
  <tbody arlasResultScroll [style.height.px]="tbodyHeight"
                           [rowItemList]="rowItemList"
                           [searchSize]="searchSize"
                           [nLastLines]="nLastLines"
                           (moreDataEvent)="askForMoreData($event)">
    <ng-container>
      <ng-container *ngFor="let rowItem of rows; index as i">
        <tr arlas-result-item class="resultlist__body--item"
                            (mouseenter)="setConsultedItem(rowItem.identifier)"
                            (mouseleave)="setConsultedItem('leave-'+rowItem.identifier)"
                            [rowItem]="rowItem"
                            (changeheckBoxEvent)="notifyCheckbox($event)"
                            [lastChangedCheckBoxEvent]="lastChangedCheckBoxEvent"
                            [detailedDataRetriever]="detailedDataRetriever"
                            [selectedItems]="selectedItems"
                            (selectedItemsEvent)="setSelectedItems($event)"
                            (borderStyleEvent)="setBorderStyle($event)"
                            [style.border-bottom-style]="borderStyle"
                            [style.display]="displayList" >
        </tr>
        <tr arlas-result-detailed-item *ngIf="rowItem.isDetailToggled" class="resultlist__body--detailed-item"
                            (mouseenter)="setConsultedItem(rowItem.identifier)"
                            (mouseleave)="setConsultedItem('leave-'+rowItem.identifier)"
                            [detailColspan]="rowItem.columns.length"
                            [rowItem]="rowItem"
                            [idFieldName]="idFieldName"
                            (actionOnItemEvent)="triggerActionOnItem($event)"
                            [style.display]="displayList">
        </tr>
      </ng-container>
    </ng-container>
    <ng-container >
      <md-grid-list cols="4" rowHeight="1:1" [style.display]="displayGrid">
        <md-grid-tile class="barbet" *ngFor="let gridTile of gridTiles" >
              <arlas-result-grid-tile class="hamou"
                            [gridTile]="gridTile"
                            [selectedItems]="selectedItems"
                            (selectedItemsEvent)="setSelectedItems($event)"
                            [lastChangedCheckBoxEvent]="lastChangedCheckBoxEvent"
                            (changedCheckBoxEvent)="notifyCheckbox($event)">
              </arlas-result-grid-tile>
        </md-grid-tile>
      </md-grid-list>
    </ng-container>
  </tbody>
</table>
<div *ngIf="isMoreDataRequested" class="resultlist__moredata" [style.width.px]="tableWidth">
  <ngx-loading
        [show]="isMoreDataRequested"
        [config]="{ animationType: ANIMATION_TYPES.threeBounce, backdropBackgroundColour: 'rgba(100,100,100,0.5)',
                    backdropBorderRadius: '0', primaryColour: '#ffffff', secondaryColour: '#ffffff', tertiaryColour: '#ffffff' }">
  </ngx-loading>
</div>
