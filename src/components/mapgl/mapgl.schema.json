{
  "$schema": "http://json-schema.org/draft-06/schema#",
  "title": "Map's inputs configuration",
  "description": "The Configuration of the map's inputs",
  "type": "object",
  "$id": "mapgl.schema.json",
  "properties": {
    "displayScale": {
      "description": "Whether the scale is displayed",
      "type": "boolean"
    },
    "maxWidthScale": {
      "description": "Max width of the scale in px. Default value is 100px.",
      "type": "number"
    },
    "unitScale": {
      "description": "Unit of the scale. Default value is 'metric'.",
      "type": "string"
    },
    "mapLayers": {
      "$id": "/properties/mapLayers",
      "type": "object",
      "properties": {
        "layers": {
          "description": "List of mapbox-gl layers",
          "type": "array"
        },
        "styleGroups": {
          "description": "Either a hex string color or a color name (in English) or a saturation interval.",
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "description": "Id of the style group.",
                "type": "string"
              },
              "name": {
                "description": "Name of the style group.",
                "type": "string"
              },
              "base": {
                "description": "Ids list of base layers that are added to the map once this style group is chosen.",
                "type": "array"
              },
              "isDefault": {
                "description": "Whether this style group is the default one",
                "type": "boolean"
              },
              "styles": {
                "description": "List of the styles",
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "description": "Id of the style.",
                      "type": "string"
                    },
                    "name": {
                      "description": "Name of the style.",
                      "type": "string"
                    },
                    "geomStrategy": {
                      "description": "Geometry method of representation for aggregate data",
                      "enum": [
                          "bbox",
                          "centroid",
                          "first",
                          "last",
                          "byDefault",
                          "geohash"
                      ]
                  },
                    "layerIds": {
                      "description": "Ids list of layers that are added to the map when this style is chosen.",
                      "type": "array"
                    },
                    "isDefault": {
                      "description": "Whether this style group is the default one",
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "id", "name", "layerIds"
                  ]
                }
              }
            },
            "required": [
              "id", "name", "base", "styles"
            ]
          }
        },
        "events": {
          "type": "object",
          "properties": {
            "onHover": {
              "description": "List of layers ids to listen to on hover",
              "type": "array"
            },
            "emitOnClick": {
              "description": "List of layers ids to listen to on click event in order to emit features",
              "type": "array"
            },
            "zoomOnClick": {
              "description": "List of layers ids to listen to on click event in order to trigger zoom action",
              "type": "array"
            }
          },
          "required": [
            "onHover", "emitOnClick", "zoomOnClick"
          ]
        }
      },
      "required": [
        "layers", "styleGroups", "events"
      ]
    },
    "idFeatureField": {
      "description": "Field name of the identifier",
      "type": "string"
    },
    "mapSources": {
      "description": "List of mapboxgl sources to add to the map",
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "description": "Id of the source.",
            "type": "string"
          },
          "source": {
            "description": "Mapboxgl source.",
            "type": "object",
            "properties": {
              "type": {
                "description": "Type of the source. Possible values : 'vector' | 'raster' | 'geojson' | 'image' | 'video' | 'canvas'",
                "type": "string"
              },
              "minzoom": {
                "description": "Minimum zoom to display the source layers",
                "type": "integer"
              },
              "maxzoom": {
                "description": "Maximum zoom to display the source layers",
                "type": "integer"
              },
              "url": {
                "description": "Url to the source (for `vector`, `raster`, `image`, `video` types).",
                "type": "string"
              },
              "tiles" : {
                "description": "List of tiles (for `vector` and `raster` types).",
                "type": "array"
              },
              "coordinates": {
                "description": "The 4 corners coordinates of the canvas/image/video, given as [longitude, latitude].",
                "type": "array"
              },
              "data" : {
                "description": "A geojson object or a url to a geojson file (for `geosjson` type).",
                "type": "array"
              },
              "canvas":  {
                "description": "Id of the canvas element (for `canvas` type)",
                "type": "string"
              },
              "animate":  {
                "description": "Whether the canvas source is animated (for `canvas` type)",
                "type": "boolean"
              }
            },
            "required": [
              "type"
            ]
          }
        },
        "required": [
          "id", "source"
        ]
      }
    },
    "defaultBasemapStyle": {
      "description": "Defines the name and default basemap style.",
      "type": "object",
      "properties": {
        "name": {
          "description": "name of the style",
          "type": "string"
        },
        "styleFile": {
          "description": "url to basemap style or a `mapboxgl.Style`",
          "type": ["string", "object"]
        }
      },
      "required": [
        "name", "styleFile"
      ]
    },
    "basemapStyles": {
      "description": "List of basemaps styles",
      "type": "array",
      "items": {
        "description": "Defines the name and the basemap style.",
        "type": "object",
        "properties": {
          "name": {
            "description": "name of the style",
            "type": "string"
          },
          "styleFile": {
            "description": "url to basemap style or a `mapboxgl.Style`",
            "type": ["string","object"]
          }
        },
        "required": [
          "name", "styleFile"
        ]
      }
    },
    "initCenter": {
      "description": "Coordinates of the map's centre when it's initialized.",
      "type": "array",
      "minItems": 2,
      "maxItems": 2,
      "items": [
        {
            "description": "Longitude",
            "type": "number"
        },
        {
            "description": "Latitude",
            "type": "number"
        }
      ]
    },
    "initZoom": {
      "description": "Zoom of the map when it's initialized",
      "type": "number"
    },
    "minZoom": {
      "description": "Min zoom of the map",
      "type": "number"
    },
    "maxZoom": {
      "description": "Max zoom of the map",
      "type": "number"
    },
    "margePanForLoad": {
      "description": "Margin applied to the map extent. Data is loaded in all this extent",
      "type": "number"
    },
    "margePanForTest": {
      "description": "Margin applied to the map extent. Before loading data, the components checks first if there are features already loaded in this extent.",
      "type": "number"
    }
  },
  "required": [
      "mapLayers", "idFeatureField", "margePanForLoad", "margePanForTest"
  ]
}
